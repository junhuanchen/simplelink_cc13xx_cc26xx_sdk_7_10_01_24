<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Power Configuration &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Z-Stack User&#39;s Guide
 7.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Zigbee Network Processor (ZNP) Interface" href="znp_interface.html" />
    <link rel="prev" title="Network Configurations" href="network_configuration.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug zigbee power_configuration";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../zigbee-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Z-Stack User's Guide

          </a>
              <div class="version">
                7.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/tirtos-index.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">SimpleLink CC13xx/CC26xx SDK Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developing_zigbee_applications.html">Developing Zigbee Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="application_overview.html">Application Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpd_application_overview.html">Green Power Application Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="z-stack-overview.html">Z-Stack Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="flash_memory-cc13xx_cc26xx.html">Flash</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_map.html">Memory Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_applications.html">Running the Example Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="network_configuration.html">Network Configurations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Power Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tx-power-configuration">TX Power Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#changing-tx-power-level">Changing TX Power Level</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#additional-optimizations">Additional Optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-application-power-test-definitions">Example Application Power Test Definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#power-test-poll-ack">POWER_TEST_POLL_ACK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-test-data-ack">POWER_TEST_DATA_ACK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-test-poll-data">POWER_TEST_POLL_DATA</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="znp_interface.html">Zigbee Network Processor (ZNP) Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="mt_interface.html">MT Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="product_certification.html">Product Certification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cc13xx_cc26xx/fcc-certification.html">FCC Certification Considerations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/custom-hardware-cc13xx_cc26xx.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/zigbee-ota-index.html">Zigbee Over-The-Air Firmware Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coexistence/coexistence-ieee.html">Wi-Fi Coexistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="packet_sniffer.html">Packet Sniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/sysconfig-index.html">System Configuration (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/references-cc13xx_cc26xx.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zigbee-guide/glossary.html">Terms and Acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../zigbee-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Z-Stack User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../zigbee-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="developing_zigbee_applications.html">Developing Zigbee Applications</a> &raquo;</li>
      <li>Power Configuration</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="power-configuration">
<span id="power-config"></span><h1>Power Configuration<a class="headerlink" href="#power-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The following sections provides different code and variables to be considered
when designing a low-power mesh network. Power management functionality
is handled by the TI-RTOS7 power driver and used by the peripheral drivers
(e.g. UART, SPI, I2C, etc). For power consumption measurements on Z-Stack,
refer to <a class="reference external" href="http://www.ti.com/lit/swra625">SWRA625</a>.</p>
</div>
<div class="section" id="tx-power-configuration">
<h2>TX Power Configuration<a class="headerlink" href="#tx-power-configuration" title="Permalink to this headline">¶</a></h2>
<p>The following sections provide configurations which can be implemented to
modify the application’s TX power, to achieve a greater distance the device
can communicate with other devices on the network, or lower the application’s
power consumption for a longer battery life in your device.</p>
<div class="section" id="changing-tx-power-level">
<h3>Changing TX Power Level<a class="headerlink" href="#changing-tx-power-level" title="Permalink to this headline">¶</a></h3>
<p>By default, the CC13xx or CC26xx P-device variants (which have a Power Amplifier
integrated) have the TX power set to 0 dBm. To modify the TX power
level during compile time change the SysConfig <em>RF Stacks</em> → <em>Z-Stack</em> →
<em>Radio</em> → <em>Transmit Power</em> value.</p>
<p>The maximum power level supported for a non-PA CC13xx or CC26xx device in IEEE
802.15.4 mode is 5 dBm. A P-type device can support up to 20 dBm TX power in
IEEE mode, where the High PA will automatically be enabled for
P-devices with a desired TX power level above 5 dBm. To verify High PA is
enabled check the <em>Advanced Radio Settings</em> (disabled section) in SysConfig.</p>
<p>The allowable TX power range with High PA enabled (programmmable by up to 6 dB) is
dependent on the hardware circuitry designed for the 2.4 GHz band.  The
P-2 LaunchPad variants maximize output from 14 to 20 dBm.  By contrast, the
P-4 LaunchPads are optimized to support power levels from 6 to 10 dBm.
These considerations are accounted for inside SysConfig depending on the hardware
option selected in <em>RF DESIGN</em> → <em>RF Design</em>.</p>
<p>To change the TX power during runtime to a different value, the best place to
insert the following code is inside of the ZCL application function. For example,
the switch project would be <code class="docutils literal notranslate"><span class="pre">zclSampleSw_Init</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">zstack_sysSetTxPowerReq_t</span><span class="w"> </span><span class="n">powerReq</span><span class="p">;</span><span class="w"></span>
<span class="n">zstack_sysSetTxPowerRsp_t</span><span class="w"> </span><span class="n">powerRsp</span><span class="p">;</span><span class="w"></span>
<span class="n">powerReq</span><span class="p">.</span><span class="n">requestedTxPower</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Set power to 0 dBm</span>

<span class="n">Zstackapi_sysSetTxPowerReq</span><span class="p">(</span><span class="n">appServiceTaskId</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">powerReq</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">powerRsp</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This code snippet can be used for any example project (excluding ZNP and
Green Power projects).</p>
</div>
</div>
<div class="section" id="additional-optimizations">
<h2>Additional Optimizations<a class="headerlink" href="#additional-optimizations" title="Permalink to this headline">¶</a></h2>
<p>Z-Stack provides several parameters which control the device runtime behavior.
The <a class="reference internal" href="application_overview.html#sec-app-configuration"><span class="std std-ref">Application Preprocessor Configuration</span></a> section discusses several of these parameters.
The most useful for reducing power consumption include setting <code class="docutils literal notranslate"><span class="pre">CUI_DISABLE</span></code> and
removing <code class="docutils literal notranslate"><span class="pre">BOARD_DISPLAY_USE_UART</span></code>. Making these changes to the Predefined Symbols
from Project Settings will disable UART communication, LED, and push button
peripherals used for application information and interaction.</p>
<p>Additionally, shutting down the external flash can save on current consumption.
To shutdown external flash, you can add <code class="code docutils literal notranslate"><span class="pre">Board_initHook</span></code> inside
of <code class="code docutils literal notranslate"><span class="pre">main()</span></code>:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not perform this modification with OTA client projects which use the
external flash for over-the-air downloads</p>
</div>
</div>
<div class="section" id="example-application-power-test-definitions">
<span id="sec-power-test"></span><h2>Example Application Power Test Definitions<a class="headerlink" href="#example-application-power-test-definitions" title="Permalink to this headline">¶</a></h2>
<p>Power consumption use cases have been included inside of the <code class="docutils literal notranslate"><span class="pre">zcl_samplelight</span></code>
and <code class="docutils literal notranslate"><span class="pre">zcl_samplesw</span></code> example applications for users to further evaluate the low
power operation of Z-Stack as part of the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>.  To include this feature,
<code class="docutils literal notranslate"><span class="pre">Z_POWER_TEST</span></code> must be added to the project preprocessor symbols (refer to
<a class="reference internal" href="application_overview.html#sec-app-configuration"><span class="std std-ref">Application Preprocessor Configuration</span></a> for more information) along with
<code class="docutils literal notranslate"><span class="pre">POWER_TEST_TX_PWR</span></code> set to a valid TX power level for the CC13xx or CC26xx being used
and one specific power test case configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">POWER_TEST_POLL_ACK</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POWER_TEST_DATA_ACK</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POWER_TEST_POLL_DATA</span></code></p></li>
</ul>
<p>The operation and behavior of each will be further explained by the following
sections.  The LEDs and UI are disabled in these modes for greater power savings,
also the devices start commissioning automatically on startup.  Otherwise,
behavior of the examples, including CC13xx or CC26xx LaunchPad BTN-1/2 operation, is the same as
described in the <a class="reference internal" href="example_applications.html#chap-example-applications"><span class="std std-ref">Running the Example Applications</span></a> READMEs.</p>
<p>Average power consumption will vary based on the hardware used.  When using a CC13xx or CC26xx LaunchPad
with an external DC power analyzer (as shown in the provided screenshots)
note that all XDS110 jumpers should be removed for accurate results.  If taking
measurements using EnergyTrace™ software please reference the
<a class="reference internal" href="../energy-trace/energy-trace.html#energytrace-users-guide"><span class="std std-ref">EnergyTrace User Guide</span></a>.</p>
<div class="section" id="power-test-poll-ack">
<h3>POWER_TEST_POLL_ACK<a class="headerlink" href="#power-test-poll-ack" title="Permalink to this headline">¶</a></h3>
<p>This test measures the current consumption of a ZED switch as it polls, with no
data transferred between either device.</p>
<p><code class="docutils literal notranslate"><span class="pre">zc_light</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Form the network and perform steering to open permit joining,
but do not commence the finding &amp; binding procedure</p></li>
<li><p>Stay idle and do not buffer any packets from <code class="docutils literal notranslate"><span class="pre">zed_sw</span></code> after the ZED joins the network</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">zed_sw</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Start steering to search for and join the ZC’s network</p></li>
<li><p>After joining, set <code class="docutils literal notranslate"><span class="pre">zgPollRate</span></code> to 5 seconds with <code class="docutils literal notranslate"><span class="pre">Zstackapi_sysConfigWriteReq</span></code></p></li>
<li><p>Send a data poll over-the-air every <code class="docutils literal notranslate"><span class="pre">zgPollRate</span></code> seconds</p></li>
</ol>
<div class="figure align-center">
<img alt="../_images/Zigbee-PollAck.png" src="../_images/Zigbee-PollAck.png" />
</div>
</div>
<div class="section" id="power-test-data-ack">
<h3>POWER_TEST_DATA_ACK<a class="headerlink" href="#power-test-data-ack" title="Permalink to this headline">¶</a></h3>
<p>This test measures the current consumption of a ZED switch as it sends ZCL ON/OFF
packets to the ZC light.</p>
<p><code class="docutils literal notranslate"><span class="pre">zc_light</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Form the network, perform steering to open permit joining,
and begin the Finding &amp; Binding procedure</p></li>
<li><p>Remain idle</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">zed_sw</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Start steering to search for and join the ZC’s network</p></li>
<li><p>Once joined, finding &amp; binding is enabled so that a bind may automatically
be created on the switch client for the On/Off cluster</p></li>
<li><p>After finding &amp; binding, set <code class="docutils literal notranslate"><span class="pre">zgPollRate</span></code> to 0 seconds to disable data reception from the ZC</p></li>
<li><p>Send ZCL on/off toggle packets over-the-air every 5 seconds with <code class="docutils literal notranslate"><span class="pre">OsalPortTimers_startReloadTimer</span></code> and
<code class="docutils literal notranslate"><span class="pre">SAMPLEAPP_POWER_TEST_TOGGLE_EVT</span></code></p></li>
</ol>
<div class="figure align-center">
<img alt="../_images/Zigbee-DataAck.png" src="../_images/Zigbee-DataAck.png" />
</div>
</div>
<div class="section" id="power-test-poll-data">
<h3>POWER_TEST_POLL_DATA<a class="headerlink" href="#power-test-poll-data" title="Permalink to this headline">¶</a></h3>
<p>This test measures the current consumption of a ZED switch as it polls and
receives ZCL data from the ZC light</p>
<p><code class="docutils literal notranslate"><span class="pre">zc_light</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Form the network and perform steering to open permit joining
on startup, but do not find &amp; bind to prevent the ZED switch from sending ZCL On/Off packets</p></li>
<li><p>After the ZED joins the network, process the <code class="docutils literal notranslate"><span class="pre">zstackmsg_CmdIDs_ZDO_DEVICE_ANNOUNCE</span></code> to
locally save the short address of the ZED</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">OsalPortTimers_startReloadTimer</span></code> and <code class="docutils literal notranslate"><span class="pre">SAMPLEAPP_POWER_TEST_ZCL_DATA_EVT</span></code>
to occassionally send ZCL data to the ZED switch with <code class="docutils literal notranslate"><span class="pre">Zstackapi_AfDataReq</span></code></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">zed_sw</span></code> behavior:</p>
<ol class="arabic simple">
<li><p>Start steering to search for and join the ZC’s network</p></li>
<li><p>After joining, set <code class="docutils literal notranslate"><span class="pre">zgPollRate</span></code> to 5 seconds with <code class="docutils literal notranslate"><span class="pre">Zstackapi_sysConfigWriteReq</span></code></p></li>
<li><p>Send a data poll over-the-air every <code class="docutils literal notranslate"><span class="pre">zgPollRate</span></code> seconds and receive ZCL packet from the
ZC if it indicates that data is pending</p></li>
</ol>
<div class="figure align-center">
<img alt="../_images/Zigbee-PollData.png" src="../_images/Zigbee-PollData.png" />
</div>
<p>For more information regarding low power operaion of the CC13xx or CC26xx with Z-Stack, including
battery-less Green Power devices and further practical usage scenarios for battery life
estimations, please refer to <a class="reference external" href="http://www.ti.com/lit/swra625">SWRA625</a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="network_configuration.html" class="btn btn-neutral float-left" title="Network Configurations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="znp_interface.html" class="btn btn-neutral float-right" title="Zigbee Network Processor (ZNP) Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2005-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>