<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>TI Utilities API: Log Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI Utilities API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Log Interface</div>  </div>
</div><!--header-->
<div class="contents">

<p>The Log module provides APIs to instrument source code.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLog__Module.html">Log_Module</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga317a373fb4fc5ad1409c2ca14ad8083d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a>(...)</td></tr>
<tr class="separator:ga317a373fb4fc5ad1409c2ca14ad8083d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae24d4581a38f1bf65adf45459937ca92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gae24d4581a38f1bf65adf45459937ca92">Log_MODULE_USE</a>(...)</td></tr>
<tr class="separator:gae24d4581a38f1bf65adf45459937ca92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec5f63b103bbd24bc654c43c8c5a5f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gaaec5f63b103bbd24bc654c43c8c5a5f9">Log_EVENT_DEFINE</a>(name,  fmt)</td></tr>
<tr class="separator:gaaec5f63b103bbd24bc654c43c8c5a5f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0246c3ea3e6de29ab12847bb0017430f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#ga0246c3ea3e6de29ab12847bb0017430f">Log_EVENT_USE</a>(name,  fmt)</td></tr>
<tr class="separator:ga0246c3ea3e6de29ab12847bb0017430f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga236a43b8f6c37a693a6feec79018ea50"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#ga236a43b8f6c37a693a6feec79018ea50">Log_printf</a>(module,  level, ...)</td></tr>
<tr class="separator:ga236a43b8f6c37a693a6feec79018ea50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ceda57c73ac4acc060b4b668c9de7b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#ga9ceda57c73ac4acc060b4b668c9de7b0">Log_event</a>(module,  level, ...)</td></tr>
<tr class="separator:ga9ceda57c73ac4acc060b4b668c9de7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc802e4801f29c95473ea146d78c8286"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gafc802e4801f29c95473ea146d78c8286">Log_buf</a>(module,  level, ...)</td></tr>
<tr class="separator:gafc802e4801f29c95473ea146d78c8286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ce13ff92a050d357f96b09125e86772"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#ga0ce13ff92a050d357f96b09125e86772">_Log_DEFINE_LOG_VERSION</a>(module,  version)</td></tr>
<tr class="separator:ga0ce13ff92a050d357f96b09125e86772"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gadbd36cdcf1aae2b24f0020d2c5502d2d"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__ti__log__LOG.html#gac2642f9959f3f0287f297b941797c733">Log_Level</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gadbd36cdcf1aae2b24f0020d2c5502d2d">Log_Level</a></td></tr>
<tr class="separator:gadbd36cdcf1aae2b24f0020d2c5502d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4c7e82e2eea245a07ee2f2692d6961f"><td class="memItemLeft" align="right" valign="top">typedef const struct <a class="el" href="structLog__Module.html">Log_Module</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gab4c7e82e2eea245a07ee2f2692d6961f">Log_Module</a></td></tr>
<tr class="separator:gab4c7e82e2eea245a07ee2f2692d6961f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf4df6831bd9c85a8d0a71721b6d1efe"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gadf4df6831bd9c85a8d0a71721b6d1efe">Log_printf_fxn</a>) (const <a class="el" href="structLog__Module.html">Log_Module</a> *handle, uint32_t header, uint32_t index, uint32_t numArgs,...)</td></tr>
<tr class="separator:gadf4df6831bd9c85a8d0a71721b6d1efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab90c5726c5071e85ed719907335c2e9d"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gab90c5726c5071e85ed719907335c2e9d">Log_buf_fxn</a>) (const <a class="el" href="structLog__Module.html">Log_Module</a> *handle, uint32_t header, uint32_t index, uint8_t *data, size_t size)</td></tr>
<tr class="separator:gab90c5726c5071e85ed719907335c2e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac2642f9959f3f0287f297b941797c733"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__log__LOG.html#gac2642f9959f3f0287f297b941797c733">Log_Level</a> { <br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a> = 1, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a4b5a8626a7b43b2f5001716043acfecd">Log_VERBOSE</a> = 4, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a35b2f02bd4c19aa479d15eaa4bd8f082">Log_INFO</a> = 16, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733aabc0ffa529967b95bcfb4652c1f9f6ad">Log_WARNING</a> = 64, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a2339d0128a57a6750f9110f366d924a1">Log_ERROR</a> = 256, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a047c5e3da7cfd4d3870cc5f206360746">Log_ALL</a> = 1 + 4 + 16 + 64 + 256, 
<br />
&#160;&#160;<a class="el" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733af3aa713497ca16a40fc49d4f78c51c1f">Log_ENABLED</a> = 512
<br />
 }</td></tr>
<tr class="separator:gac2642f9959f3f0287f297b941797c733"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Log module provides APIs to instrument source code. </p>
<p>To access the LOG APIs, the application should include its header file as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Log_8h.html">ti/log/Log.h</a>&gt;</span></div></div><!-- fragment --><h2>Beta Disclaimer</h2>
<p>The logging ecosystem are to be considered beta quality. They are not recommended for use in production code by TI. APIs and behaviour will change in future releases. Please report issues or feedback to <a href="https://e2e.ti.com/"><b>E2E</b></a>.</p>
<h2>Definitions</h2>
<p>The following terms are used throughout the log documentation.</p>
<table class="doxtable">
<tr>
<th>Term </th><th>Definition  </th></tr>
<tr>
<td><code>LogModule</code> </td><td>A parameter passed to Log APIs to indicate which software module the log statement originated from. Modules also control the routing of logs to sinks. </td></tr>
<tr>
<td><code>LogLevel</code> </td><td>The severity or importance of a given log statement. </td></tr>
<tr>
<td><code>Sink</code> </td><td>Also simply called a logger. This is a transport specific logger implementation. <br />
 The Logging framework is flexible such that multiple sinks may exist in a single firmware image. </td></tr>
<tr>
<td><code>CallSite</code> </td><td>A specific invocation of a Log API in a given file or program. </td></tr>
<tr>
<td><code>Record</code> </td><td>The binary representation of a log when it is stored or transported by a given sink. The log record format varys slightly with each sink depending on their implementation and needs. However, they all convey the same information. </td></tr>
<tr>
<td>Link Time Optimization (LTO) </td><td>A feature of some toolchains that can significantly reduce the code overhead of the log statements through a process called dead code elimination. In order to maximize the benefits of this, all static libraries and application files should have LTO enabled. </td></tr>
</table>
<h2>Summary</h2>
<p>The following sections describe the usage of the TI logging system implementation. This document will focus on the target (i.e. code that runs) on the embedded device. For associated PC tooling, please see the <a href="../../../tools/log/tiutils/Readme.html">README</a> in the tools/log/tiutils/ folder.</p>
<p>Desgin Philiosophy:</p>
<ul>
<li>Logs target code should be as efficient as possible.<ul>
<li>This means that Log APIs should minimize FLASH, RAM, and execution overhead.</li>
</ul>
</li>
<li>Complexity should be pushed to host side tooling where possible.<ul>
<li>Even if this means that PC setup/tooling requirements are more complex.</li>
</ul>
</li>
<li>Multiple log sink implemenetations shall be able to exist in a system.<ul>
<li>Where applicable, multiple instances should be supported (e.g. multiple circular buffers to collect logs)</li>
</ul>
</li>
<li>It shall be possible to remove logging entirely using the preprocessor</li>
<li>Configuration of logging should be deferred to application compile and link time.<ul>
<li>That means that the end application builder should make decisions about the logging settings. This means that TI provided libraries are not opinionated about what log levels should be enabled or how modules should be routed to sinks.</li>
</ul>
</li>
<li>TI's logging system will leverage SysConfig out of the box, but it should be possible to configure and use logging easily without the needing SysConfig.</li>
</ul>
<h2>Stated Limitations</h2>
<ul>
<li>It is not possible to control which log sink is used for each call site. Routing of logs is controlled at a module level.</li>
<li>A maximum of 8 arguments is supported for variadic APIs.</li>
</ul>
<h2>Anatomy of Log Statement</h2>
<p>At the core of the logging implementation is heavy use of the C preprocessor. When reading an application, the Log APIs may look like function calls, but the preprocessor expands them heavily.</p>
<p>There are several ways in which the preprocessor is used.</p>
<h3>Globally</h3>
<ol type="1">
<li>To enable/disable logs globally. If <code>ti_log_Log_ENABLE</code> is not defined, all statements are removed by the preprocessor. This does not rely on LTO or any other optimization. It removes any traces of logs from the program.</li>
</ol>
<h3>Per Log Statement</h3>
<ol type="1">
<li>(Level filtering): Insert the if statement that checks if the log level of the statement has been enabled in its module configuration. If the log level is not enabled, the process ends here.</li>
<li>(String declaration): Automate placement of constant strings, format strings, and pointers to these strings in the the nonloadable metadata section of the out file. This saves FLASH on the target. Each sring contains a large amount of data, including the following:<ul>
<li>File and line number of the log statement</li>
<li>The log level and module of the log statement</li>
<li>The format string</li>
<li>The number of arguments</li>
</ul>
</li>
<li>(Argument counting): Log APIs are variadic in nature, up to 8 arguments are supported. However, at preprocess time, the number of arguments must be known.</li>
<li>(Name spacing): Routing from module to sink. The module parameter of the Log API controls which sink its log statements will be routed to. The preprocessor does name expansion to look up the enabled log levels and selected sink function pointers from the module's configuration structure. NOTE: The used sink may require initialization. Please verify with the specific sink documentation on how to initialize the sink.</li>
<li>(Sink API Invocation): With the names resolved and levels checked, the logger is now ready to execute the sink function. This is done via function pointer.</li>
</ol>
<p>An simplified pseudo-C implementation of what <code>Log_printf(LogModule_App1, Log_DEBUG, "Hello World!");</code> would expand to is shown below. This will not compile and is not extensive, just for illustration.</p>
<div class="fragment"><div class="line"><span class="comment">// Global log enable check, wrapped around each log site</span></div><div class="line"><span class="preprocessor">#if defined(ti_log_Log_ENABLE)</span></div><div class="line">    <span class="comment">// Check if the level of this specific log statement has been enabled by the module</span></div><div class="line">    <span class="keywordflow">if</span> (LogMod_LogModule_App1.levels &amp; level) {</div><div class="line">          <span class="comment">// Note that ^^ is the record separator. Pack meta information into format string. This is stored off target.</span></div><div class="line">          <span class="keyword">const</span> <span class="keywordtype">string</span> logMeta = <span class="stringliteral">&quot;LOG_OPCODE_FORMATED_TEXT^^&quot;</span>../../log.c<span class="stringliteral">&quot;^^80^^Log_DEBUG^^LogMod_LogModule_App1^^&quot;</span>Hello World!<span class="stringliteral">&quot;^^0&quot;</span>;</div><div class="line">          <span class="comment">// Route log to the selected sink implementation. This is done via function pointer.</span></div><div class="line">          <span class="comment">// The 0 indicates no arguments. If runtime arguments were provided, they would follow.</span></div><div class="line">          LogMod_LogModule_App1.printf(pointerToModuleConfig, 0);</div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p>From here, the logger has transferred control over to the sink implementation, which varys based on the tansport (e.g. circular buffer in memory or UART).</p>
<h2>Modules</h2>
<p>When adding log statements to the target software, it is recommended to create a logging module for each software component in the image. Modules enable the reader to understand where the log record originated from. Some log visualizers may allow the reader to filter or sort log statements by module. It is also recommended to namespace modules.</p>
<p>For example, a good module name for the <code>UART</code> driver that exists in <code>source/ti/drivers</code>, could be <code>ti_drivers_UART</code>.</p>
<p>Modules also control the routing of log records to a sink. Routing is controlled via the LogModule panel in SysConfig, but can be changed in plain C code using the macro <a class="el" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a> and passing the sink specific <code>Log_MODULE_INIT_</code> to the <code>init</code> parameter within the <a class="el" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a> macro. An example for the LogBuf sink is below, it will do the following</p>
<ol type="1">
<li>Create a module called <code>LogModule_App1</code>.</li>
</ol>
<ol type="1">
<li>Initialze the module for use with the buffer based LogSink. Use buffer instance called <code>CONFIG_ti_log_LogSinkBuf_0</code>.</li>
</ol>
<ol type="1">
<li>Enable only the <code>Log_ERROR</code> level. Other logs will not be stored.</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Log_8h.html">ti/log/Log.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ti/log/LogSinkBuf.h&gt;</span></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a>(LogModule_App1, Log_MODULE_INIT_SINK_BUF(CONFIG_ti_log_LogSinkBuf_0, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a2339d0128a57a6750f9110f366d924a1">Log_ERROR</a>));</div></div><!-- fragment --><p>TI created libraries will never use <a class="el" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a>. This leaves the choice of routing logs to their sinks to the end application writer. This is recommended when creating any static libraries to defer the final logging decisions to link time.</p>
<p>Each new module will instantiate a <a class="el" href="structLog__Module.html">Log_Module</a> structure with a <code>levels</code> bitmap and pointers to the selected sink implementation and sink configuration. See the <a class="el" href="structLog__Module.html">Log_Module</a> structure for more information.</p>
<h2>Levels</h2>
<p>Log levels are a way to indicate the severity or importance of the contents of a particular log call site. Each call site takes an argument that allows the user to specify the level. As with modules, log visualization tools allow the user to sort or filter on a given level. This can help the reader to find important or relevant log statements in visualization.</p>
<p>Log levels are also used to control the emission of logs. Each call site will check that the level is enabled before calling the underlying log API.</p>
<p>Depending on optimization, the check at each log statement for whether the given level is enabled or not may end up being optimized away, and the entire log statement may be optimized away if the log level is not enabled.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> ((level) &amp; module.levels) {<span class="comment">// Call Log API</span></div><div class="line">}</div></div><!-- fragment --><p>Optimization level <code>-flto</code> for both the TICLANG toolchain and GCC will typically be able to optimize the above statement.</p>
<dl class="section remark"><dt>Remarks</dt><dd></dd></dl>
<h2>Log Metadata</h2>
<p>Each time a Log API is invoked, a metadata string is placed in the .out file. This string contains information about the API type, file, line module, level, and other information associated with the log call site. Each call site emits a string to a specific memory section called <code>.log_data</code>. In addition to this, a pointer to the string in .log_data is stored in another section called <code>.log_ptr</code>. Because the .log_ptr section is always in the same location, and each entry is the same size, an indexing-scheme can be used to refer to each log-string. Entry 0 in .log_ptr would point to the first string, entry 1 would point to the second string, etc. This Is necessary on some devices where transmitting an entire 32-bit address as a reference to the string is not possible, and instead an 8-bit index can be transmitted across the Log sink implementation instead. In order to use logging, this section should be added to the linker command file. By default, this section points to a nonloadable region of memory. Meaning that the metadata will not be loaded on the target device. Instead, the various logging visualization tools such as wireshark and TI ROV2 will read the metadata from this section and properly decode the log statements. The benefit of this approach is that very little memory is consumed on target. Additionally, the log transport only needs to store or send pointers to this meta section when a log API is called.</p>
<p>This approach minimizes the amount of memory consumed on device and bytes sent over the transport. This section can be loaded on target if desired or if you are creating a custom logger. The design does not preclude this.</p>
<p>In order to use the logging framework, the log section must be added to the linker command file. Here is a sample for the TI linker. Other examples can be found in the TI provided linker files for each toolchain.</p>
<div class="fragment"><div class="line">MEMORY</div><div class="line">{</div><div class="line">    <span class="comment">// List other memory regions here</span></div><div class="line">    LOG_DATA (R) : origin = 0x90000000, length = 0x40000</div><div class="line">    LOG_PTR  (R) : origin = 0x94000008, length = 0x40000</div><div class="line">}</div><div class="line">SECTIONS</div><div class="line">{</div><div class="line">     .log_data       :   &gt; LOG_DATA, type = COPY</div><div class="line">     .log_ptr        : { *(.log_ptr*) } &gt; LOG_PTR align 4, type = COPY</div><div class="line">}</div></div><!-- fragment --><h2>Sinks</h2>
<p>Sinks are responsible for storing or transporting the log record. In general there are two categories of sinks:</p>
<ol type="1">
<li>Those that perform storage of logs.</li>
<li>Those that stream logs over a transport medium, and thus do not perform storage.</li>
</ol>
<p>Sinks may vary in their implementation based on the nature of the storage or transport that they support, but they all have the following in common:</p>
<ul>
<li>Are named ti_log_LogSink&lt;SinkName&gt;. Where <code>&lt;SinkName&gt;</code> is the name of the sink.</li>
<li>Must implement the Log_printf and Log_buf APIs from this file.</li>
<li>Must provide _USE, _INIT, and _DEFINE macros.</li>
</ul>
<p>In addition, some sinks require initialization. This will be listed in the documentation for the sink implementation. Sinks are closely tied to their associated host side tooling. Since the log statements are not parsed at all by the target code, this must be delegated to a program running on a PC. While the binary format of log records may vary across sink implementations, it is suggested that each log record contain:</p>
<ol type="1">
<li>Timestamp</li>
</ol>
<ol type="1">
<li>Pointer to metadata string. This will be looked up by the PC side tooling in the out file.</li>
</ol>
<ol type="1">
<li>Runtime arguments</li>
</ol>
<p>This is the minimum amount of information needed to decode a log statement.</p>
<h1>Usage</h1>
<p>This section provides a basic <a class="el" href="group__ti__log__LOG.html#ti_log_LOG_Synopsis">usage summary</a> and a set of <a class="el" href="group__ti__log__LOG.html#ti_log_LOG_Examples">examples</a> in the form of commented code fragments. Detailed descriptions of the LOG APIs are provided in subsequent sections.</p>
<p><a class="anchor" id="ti_log_LOG_Synopsis"></a></p><h3>Synopsis</h3>
<div class="fragment"><div class="line"><span class="comment">// Import the Log header</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Log_8h.html">ti/log/Log.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Define your log module and log sink</span></div><div class="line"><span class="comment">// If using SysConfig, it will be done automatically, or it can be done manually:</span></div><div class="line"><span class="comment">// Use helper macro from &lt;ti/log/LogSinkBuf.h&gt; to make a sink instance (buffer + config) with 100 entries.</span></div><div class="line">Log_SINK_BUF_DEFINE(MyBufferSink, LogSinkBuf_Type_CIRCULAR, 100);</div><div class="line"></div><div class="line"><span class="comment">// Use helper macro from &lt;ti/log/Log.h&gt; to make a module pointing at the new sink instace.</span></div><div class="line"><span class="comment">// This example will enable all log levels</span></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga317a373fb4fc5ad1409c2ca14ad8083d">Log_MODULE_DEFINE</a>(MyModule, Log_MODULE_INIT_SINK_BUF(MyBufferSink, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a047c5e3da7cfd4d3870cc5f206360746">Log_ALL</a>))</div><div class="line"></div><div class="line"><span class="comment">// Some log sinks may require special initialization to configure hardware. Refer to the documentation of</span></div><div class="line"><span class="comment">// the sink you wish to use. For example, LogSinkITM must be initialised like this before it can be used:</span></div><div class="line"><span class="comment">// LogSinkITM_init();</span></div><div class="line"></div><div class="line"><span class="comment">// Invoke one of the log APIs you want to use for either premade events or formatted strings</span></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga236a43b8f6c37a693a6feec79018ea50">Log_printf</a>(MyModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a>, &quot;The answer is %d&quot;, 42);</div><div class="line">uint8_t buffer[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};</div><div class="line"><a class="code" href="group__ti__log__LOG.html#gafc802e4801f29c95473ea146d78c8286">Log_buf</a>(MyModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a4b5a8626a7b43b2f5001716043acfecd">Log_VERBOSE</a>, buffer, <span class="keyword">sizeof</span>(buffer));</div></div><!-- fragment --><p><a class="anchor" id="ti_log_LOG_Examples"></a></p><h3>Examples</h3>
<ul>
<li><a class="el" href="group__ti__log__LOG.html#ti_utils_LOG_Example_event">Log Event</a></li>
<li><a class="el" href="group__ti__log__LOG.html#ti_utils_LOG_Example_printf">Log printf</a></li>
<li><a class="el" href="group__ti__log__LOG.html#ti_utils_LOG_Example_buf">Logging buffers</a></li>
</ul>
<p><a class="anchor" id="ti_utils_LOG_Example_event"></a><b>Log Event</b>:</p>
<p>The following example demonstrates how to create a log event object and use it in the code. There are two steps to using a log event: 1. instantiation and 2. call site(s). Instantiation creates the event and the necessary metadata, and call site is where the event is actually recorded by the logger framework.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a log event data type called LogEvent_count</span></div><div class="line"><span class="comment">// The log module is MyModule</span></div><div class="line"><span class="comment">// The format string is &quot;count=%d&quot; -- this should describe what the event does</span></div><div class="line"></div><div class="line"><a class="code" href="group__ti__log__LOG.html#gaaec5f63b103bbd24bc654c43c8c5a5f9">Log_EVENT_DEFINE</a>(LogEvent_count, <span class="stringliteral">&quot;count=%d&quot;</span>);</div></div><!-- fragment --><p>Later on, in the application, the count event is consumed. Note the log module must match between event creation and call site. In the code below, a LogEvent record is created for serialization or stage by the Log sink.</p>
<div class="fragment"><div class="line"><a class="code" href="group__ti__log__LOG.html#ga0246c3ea3e6de29ab12847bb0017430f">Log_EVENT_USE</a>(LogEvent_count); <span class="comment">// If not defined in same file</span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga9ceda57c73ac4acc060b4b668c9de7b0">Log_event</a>(MyModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a>, LogEvent_count, count++);</div></div><!-- fragment --><p><a class="anchor" id="ti_utils_LOG_Example_printf"></a><b>Log Printf</b>:</p>
<p>The following example demonstrates use of the Log printf API. in code. Log will embed the format string in the call site and will take arguments using varadic arguments</p>
<div class="fragment"><div class="line"><a class="code" href="group__ti__log__LOG.html#ga236a43b8f6c37a693a6feec79018ea50">Log_printf</a>(MyModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a>, <span class="stringliteral">&quot;Hello World!&quot;</span>);</div></div><!-- fragment --><p><a class="anchor" id="ti_utils_LOG_Example_buf"></a><b>Log Buf</b>:</p>
<p>The following example demonstrates use of the Log buf API. in code.</p>
<p>Buf will embed the format string in the call site and will take the buffer as a pointer and length. Buffers are treated as arrays of bytes. The buffer API should only be used when it is necessary to log data that is only available at runtime. It will actually send or store the entire contents of the buffer, so this API should be used sparingly as it is costly in terms of runtime and memory overhead.</p>
<div class="fragment"><div class="line">uint8_t bufferToLog[] = {0, 1, 2, 3, 4, 5};</div><div class="line"><a class="code" href="group__ti__log__LOG.html#gafc802e4801f29c95473ea146d78c8286">Log_buf</a>(ti_log_LogMain, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a>, <span class="stringliteral">&quot;The contents of bufferToLog are: &quot;</span>, bufferToLog, <span class="keyword">sizeof</span>(bufferToLog));</div></div><!-- fragment --><p><a class="anchor" id="ti_utils_LOG_Example_guide"></a><b>Log API usage</b>:</p>
<p>For a uniform experience with the logging tool, users are recommended to follow certain guidelines regarding the Log API. Typical use-cases for each API call is desribed below</p>
<h4>Log_printf</h4>
<p>Log_printf should be the default mechanism for emitting a log statement within an application. Along with the Log-levels, Log_printf should be used to communicate debug information as a formatted string, which accepts variadic arguments. In this case, a pointer to the string and the arguments themselves are transported by the Log sink.</p>
<div class="fragment"><div class="line"><a class="code" href="group__ti__log__LOG.html#ga236a43b8f6c37a693a6feec79018ea50">Log_printf</a>(MyLibraryLogModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733a2339d0128a57a6750f9110f366d924a1">Log_ERROR</a>, <span class="stringliteral">&quot;Library function received illegal argument: %d&quot;</span>, arg);</div></div><!-- fragment --><h4>Log_event</h4>
<p>Log_event is meant to represent more generic debug-information, and typically something that can occur from anywhere in the application, as opposed to being localised in a single library. Events can also be defined once and referenced from anywhere in the application, so the same event can be used by multiple libraries. A generic example would be an event such as "Entering critical section"</p>
<div class="fragment"><div class="line"><a class="code" href="group__ti__log__LOG.html#gaaec5f63b103bbd24bc654c43c8c5a5f9">Log_EVENT_DEFINE</a>(LogEvent_enterCritical, <span class="stringliteral">&quot;Entering critical section&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga0246c3ea3e6de29ab12847bb0017430f">Log_EVENT_USE</a>(LogEvent_enterCritical); <span class="comment">// If not defined in same file</span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><a class="code" href="group__ti__log__LOG.html#ga9ceda57c73ac4acc060b4b668c9de7b0">Log_event</a>(MyModule, <a class="code" href="group__ti__log__LOG.html#ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557">Log_DEBUG</a>, LogEvent_enterCritical);</div></div><!-- fragment --><h4>Log_buf</h4>
<p>When the debug-information to be emitted is a large amount of dynamic data, and is not suitable as an argument to printf, then Log_buf should be used. Log_buf can transport the contents of large dynamic buffers, and as a consequence has a larger overhead and should be used sparsely. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga317a373fb4fc5ad1409c2ca14ad8083d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga317a373fb4fc5ad1409c2ca14ad8083d">&sect;&nbsp;</a></span>Log_MODULE_DEFINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_MODULE_DEFINE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gae24d4581a38f1bf65adf45459937ca92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae24d4581a38f1bf65adf45459937ca92">&sect;&nbsp;</a></span>Log_MODULE_USE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_MODULE_USE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaaec5f63b103bbd24bc654c43c8c5a5f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaec5f63b103bbd24bc654c43c8c5a5f9">&sect;&nbsp;</a></span>Log_EVENT_DEFINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_EVENT_DEFINE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0246c3ea3e6de29ab12847bb0017430f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0246c3ea3e6de29ab12847bb0017430f">&sect;&nbsp;</a></span>Log_EVENT_USE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_EVENT_USE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga236a43b8f6c37a693a6feec79018ea50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga236a43b8f6c37a693a6feec79018ea50">&sect;&nbsp;</a></span>Log_printf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_printf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9ceda57c73ac4acc060b4b668c9de7b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ceda57c73ac4acc060b4b668c9de7b0">&sect;&nbsp;</a></span>Log_event</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_event</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gafc802e4801f29c95473ea146d78c8286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc802e4801f29c95473ea146d78c8286">&sect;&nbsp;</a></span>Log_buf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Log_buf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0ce13ff92a050d357f96b09125e86772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ce13ff92a050d357f96b09125e86772">&sect;&nbsp;</a></span>_Log_DEFINE_LOG_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _Log_DEFINE_LOG_VERSION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">module, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">version&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gadbd36cdcf1aae2b24f0020d2c5502d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadbd36cdcf1aae2b24f0020d2c5502d2d">&sect;&nbsp;</a></span>Log_Level</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__ti__log__LOG.html#gac2642f9959f3f0287f297b941797c733">Log_Level</a>  <a class="el" href="group__ti__log__LOG.html#gac2642f9959f3f0287f297b941797c733">Log_Level</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gab4c7e82e2eea245a07ee2f2692d6961f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4c7e82e2eea245a07ee2f2692d6961f">&sect;&nbsp;</a></span>Log_Module</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const struct <a class="el" href="structLog__Module.html">Log_Module</a> <a class="el" href="structLog__Module.html">Log_Module</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gadf4df6831bd9c85a8d0a71721b6d1efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf4df6831bd9c85a8d0a71721b6d1efe">&sect;&nbsp;</a></span>Log_printf_fxn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* Log_printf_fxn) (const <a class="el" href="structLog__Module.html">Log_Module</a> *handle, uint32_t header, uint32_t index, uint32_t numArgs,...)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gab90c5726c5071e85ed719907335c2e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab90c5726c5071e85ed719907335c2e9d">&sect;&nbsp;</a></span>Log_buf_fxn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* Log_buf_fxn) (const <a class="el" href="structLog__Module.html">Log_Module</a> *handle, uint32_t header, uint32_t index, uint8_t *data, size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac2642f9959f3f0287f297b941797c733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2642f9959f3f0287f297b941797c733">&sect;&nbsp;</a></span>Log_Level</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__ti__log__LOG.html#gac2642f9959f3f0287f297b941797c733">Log_Level</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733adce8a06ec2711142441a80d1727db557"></a>Log_DEBUG&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733a4b5a8626a7b43b2f5001716043acfecd"></a>Log_VERBOSE&#160;</td><td class="fielddoc"><p>This should be the default level, reserved to be used by users to insert into applications for debugging. Exported libraries should avoid using this level. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733a35b2f02bd4c19aa479d15eaa4bd8f082"></a>Log_INFO&#160;</td><td class="fielddoc"><p>This level is recommended to be used in libraries to emit verbose information </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733aabc0ffa529967b95bcfb4652c1f9f6ad"></a>Log_WARNING&#160;</td><td class="fielddoc"><p>This level is recommended to be used in libraries to emit simple information </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733a2339d0128a57a6750f9110f366d924a1"></a>Log_ERROR&#160;</td><td class="fielddoc"><p>This level is recommended to be used in libraries to emit warnings. It is up to the library developer to decide what constitutes a warning, but it should typially indicate something unexpected, but not something that leads to system failure </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733a047c5e3da7cfd4d3870cc5f206360746"></a>Log_ALL&#160;</td><td class="fielddoc"><p>This level is recommended to be used in libraries to emit errors. Typically, this should be used when something has failed and the system is unable to continue correct operation </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2642f9959f3f0287f297b941797c733af3aa713497ca16a40fc49d4f78c51c1f"></a>Log_ENABLED&#160;</td><td class="fielddoc"><p>This enables all levels </p>
</td></tr>
</table>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">© Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
