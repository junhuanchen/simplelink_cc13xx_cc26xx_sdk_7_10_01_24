<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Configuration &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User&#39;s Guide
 6.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TX Power" href="../proprietary-rf/tx-power.html" />
    <link rel="prev" title="Packet Format" href="packet-format.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ieee-rf basic-configuration";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide

          </a>
              <div class="version">
                6.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/proprietary-rf-quick-start.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/examples-cc13xx_cc26xx.html">Examples User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/custom-hardware.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/rf-core-index.html">RF Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../proprietary-rf-guide/physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf/operation_modes.html">Operation Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf-guide/proprietary-rf-index-cc13xx_cc26xx.html">Proprietary Mode</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../proprietary-rf-guide/ieee-rf-index-cc13xx_cc26xx.html">IEEE 802.15.4 Mode</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="packet-format.html">Packet Format</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Basic Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#phy-configuration">PHY configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-command">Setup Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rx-operation">RX Operation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf/tx-power.html">TX Power</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf/manchester-encoding.html">Manchester Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf/packet-format-debugging.html">Packet format debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proprietary-rf/time-synchronization.html">Time synchronization over the air</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/sysconfig-index.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html">Terms and acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../proprietary-rf-guide/physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a> &raquo;</li>
          <li><a href="../proprietary-rf-guide/ieee-rf-index-cc13xx_cc26xx.html">IEEE 802.15.4 Mode</a> &raquo;</li>
      <li>Basic Configuration</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="basic-configuration">
<h1>Basic Configuration<a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h1>
<p>In this section we will cover how to configure the IEEE PHY and how to schedule basic TX/RX commands
for a more detailed explanation on how to configure the PHY and the differences between command types
go to:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../rf-core/phy-configuration.html"><span class="doc">PHY Configuration</span></a></p></li>
<li><p><a class="reference internal" href="../rf-core/commands.html"><span class="doc">Command Types</span></a></p></li>
<li><p><a class="reference internal" href="../rf-core/rf-commands-reference.html"><span class="doc">RF commands reference</span></a></p></li>
</ul>
<p>Before running any radio operation command described in this section, the radio must be set up in IEEE
802.15.4 mode using the command CMD_RADIO_SETUP. Otherwise, the operation will end with error.</p>
<p>In IEEE 802.15.4 mode, the radio CPU shall accept two levels of radio operation commands. Operations can
run in the background level or in the foreground level. Each operation can only run in one of these levels.
Operations in the foreground level normally require a background level operation to be running at the same time.</p>
<p>The background level operations are the receive and energy detect scan operations. Only one of these can run
at a time. The foreground level operations are the CSMA-CA operation, the receive ACK operation, the transmit
operation, the abort background level operation, and the modify radio setup operation. These can be entered
as a single command or a command chain even if a background level operation is running. The CSMA-CA and receive
ACK operations will run simultaneously with the background level operation. The transmit operation will cause
the background level operation to be suspended until the transmission is done. The allowed combinations of
background and foreground level operations are shown in Table 6. Violation of this shall cause an error when
the foreground level command is about to start, signaled by the ERROR_WRONG_BG status in the status field of the
foreground level command structure.</p>
<img alt="../_images/aafig-bbb90cbe1752f490faff4e1ada84f2b4b7b6e853.png" src="../_images/aafig-bbb90cbe1752f490faff4e1ada84f2b4b7b6e853.png" />
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 14%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><td rowspan="2"><p>‘Foreground level operation’</p></td>
<td colspan="3"><p>‘Background level operation’</p></td>
</tr>
<tr class="row-even"><td><p>None</p></td>
<td><p>CMD_IEEE_RX</p></td>
<td><p>CMD_IEEE_ED_SCAN</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-even"><td><p>CMD_IEEE_TX</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-odd"><td><p>CMD_IEEE_CSMA</p></td>
<td><p>Forbidden</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-even"><td><p>CMD_IEEE_RX_ACK</p></td>
<td><p>Forbidden</p></td>
<td><p>Allowed</p></td>
<td><p>Forbidden</p></td>
</tr>
<tr class="row-odd"><td><p>CMD_IEEE_ABORT_BG</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-even"><td><p>CMD_IEEE_SETUP</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-odd"><td><p>CMD_FG_NOP</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-even"><td><p>CMD_FG_COUNT</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-odd"><td><p>CMD_FG_SCH_IMM</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-even"><td><p>CMD_FG_COUNT_BRANCH</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
<tr class="row-odd"><td><p>CMD_FG_PATTERN_CHECK</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
<td><p>Allowed</p></td>
</tr>
</tbody>
</table>
<p>For more information, a more detailed description is given in the <a class="reference external" href="http://www.ti.com/lit/pdf/swcu185">CC13x2 CC26x2 SimpleLink Wireless MCU Technical Reference Manual</a>.</p>
<div class="section" id="phy-configuration">
<h2>PHY configuration<a class="headerlink" href="#phy-configuration" title="Permalink to this headline">¶</a></h2>
<p>After following
<a class="reference internal" href="../rf-core/phy-configuration.html"><span class="doc">PHY Configuration</span></a>
you should be ready to import one of the examples included in the <code class="docutils literal notranslate"><span class="pre">PropRF/</span></code> folder
(we recommend starting with rfPacketTX/RX). All of the PHY configuration should be
done and applied using syscfg.</p>
<p>Once all PHY modifications are completed you should be able to preview the <code class="docutils literal notranslate"><span class="pre">ti_radio_config.[c|h]</span></code>
files generated by syscfg. These files will have all the commands necessary to operate the device in IEEE mode.</p>
</div>
<div class="section" id="setup-command">
<h2>Setup Command<a class="headerlink" href="#setup-command" title="Permalink to this headline">¶</a></h2>
<p>Setting up the radio is no different than previously explained in
<a class="reference internal" href="../rf-core/phy-configuration.html"><span class="doc">PHY Configuration</span></a> , make sure to follow the name of the new
radio config structures for IEEE mode  in <code class="docutils literal notranslate"><span class="pre">ti_radio_config.[c|h]</span></code> files.:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">RF_Params</span><span class="w"> </span><span class="n">rfParams</span><span class="p">;</span><span class="w"></span>
<span class="n">RF_Params_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rfParams</span><span class="p">);</span><span class="w"></span>
<span class="n">rfParams</span><span class="p">.</span><span class="n">nID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF_STACK_ID_154</span><span class="p">;</span><span class="w"></span>

<span class="cm">/* Request access to the radio */</span><span class="w"></span>
<span class="n">rfHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF_open</span><span class="p">((</span><span class="n">RF_Object</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">rfObject</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">RF_prop_ieee154</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">RF_RadioSetup</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">RF_cmdRadioSetup</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rfParams</span><span class="p">);</span><span class="w"></span>
<span class="cm">/* Set the frequency */</span><span class="w"></span>
<span class="n">RF_postCmd</span><span class="p">(</span><span class="n">rfHandle</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">RF_Op</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">RF_cmdFs_ieee154</span><span class="p">,</span><span class="w"> </span><span class="n">RF_PriorityNormal</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="rx-operation">
<h2>RX Operation<a class="headerlink" href="#rx-operation" title="Permalink to this headline">¶</a></h2>
<p>The receive radio operation is a background level operation. It is started with the CMD_IEEE_RX command.</p>
<p>At the start of an Rx operation, the radio CPU shall wait for the start trigger. It shall then program the
frequency based on the <code class="docutils literal notranslate"><span class="pre">channel</span></code> parameter. If <code class="docutils literal notranslate"><span class="pre">channel</span></code> is 0xFF, the operation shall keep running on a
channel already configured. This requires that the operation follows another receive operation or a synthesizer
programming operation. If the frequency synthesizer is not running, the operation will end with error. After
programming the frequency, the radio CPU shall configure the receiver to receive IEEE 802.15.4 packets.</p>
<p>The number of bytes given by the received PHY header are received and stored in the receive queue given by <code class="docutils literal notranslate"><span class="pre">pRxQ</span></code>.</p>
<p>If there is no available Rx buffer with enough available space to hold the received packet, the received data shall
be discarded. If <code class="docutils literal notranslate"><span class="pre">frameFiltOpt.frameFiltStop</span></code> is 1, the reception shall be stopped, otherwise the packet shall be received
so that the CRC can be checked.</p>
<div class="section" id="setting-up-rx-buffer">
<h3>Setting up Rx Buffer<a class="headerlink" href="#setting-up-rx-buffer" title="Permalink to this headline">¶</a></h3>
<p>In order to prep the radio for RX, you must first define a Queue to receive messages. This is already included in the rfPacketRx
example, but we will show it below:</p>
<p>Let’s first define important parameters about the packet format and length:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Packet RX Configuration */</span><span class="w"></span>
<span class="cp">#define MAX_LENGTH             256 </span><span class="cm">/* Max length byte the radio will accept */</span><span class="cp"></span>
<span class="cp">#define NUM_DATA_ENTRIES       2  </span><span class="cm">/* NOTE: Only two data entries supported at the moment */</span><span class="cp"></span>
<span class="cp">#define MAC_PHY_PHR_IEEE_LEN            1</span>
<span class="cp">#define MAC_RSSI_LEN                    1</span>
<span class="cp">#define MAC_TS_LEN                      4</span>
<span class="cp">#define MAC_FCS2_FIELD_LEN              2       </span><span class="cm">/* 2-byte FCS field */</span><span class="cp"></span>
<span class="cp">#define NUM_APPENDED_BYTES     MAC_PHY_PHR_IEEE_LEN + MAC_RSSI_LEN + MAC_TS_LEN + MAC_FCS2_FIELD_LEN</span>
</pre></div>
</div>
<p>Now let’s define the structures necessary to store these packets:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma DATA_ALIGN (rxRadioBufferPtr, 4);</span>
<span class="k">static</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"></span>
<span class="n">rxRadioBufferPtr</span><span class="p">[</span><span class="n">RF_QUEUE_DATA_ENTRY_BUFFER_SIZE</span><span class="p">(</span><span class="n">NUM_DATA_ENTRIES</span><span class="p">,</span><span class="w"></span>
<span class="w">                                              </span><span class="n">MAX_LENGTH</span><span class="p">,</span><span class="w"></span>
<span class="w">                                              </span><span class="n">NUM_APPENDED_BYTES</span><span class="p">)];</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="n">dataQueue_t</span><span class="w">   </span><span class="n">macRxDataEntryQueue</span><span class="p">;</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="n">rfc_ieeeRxOutput_t</span><span class="w"> </span><span class="n">macRxOutputIeee</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>We need to assign a Callback function to the RX operation command. This callback function will be used to handle the received data:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">macRxCb</span><span class="p">(</span><span class="n">RF_Handle</span><span class="w"> </span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="n">RF_CmdHandle</span><span class="w"> </span><span class="n">ch</span><span class="p">,</span><span class="w"> </span><span class="n">RF_EventMask</span><span class="w"> </span><span class="n">e</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">currentDataEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFQueue_getDataEntry</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">RFQueue_nextEntry</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">RF_EventRxOk</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">packetLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">currentDataEntry</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">MAC_FCS2_FIELD_LEN</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">PIN_setOutputValue</span><span class="p">(</span><span class="n">ledPinHandle</span><span class="p">,</span><span class="w"> </span><span class="n">CONFIG_PIN_RLED</span><span class="p">,</span><span class="o">!</span><span class="n">PIN_getOutputValue</span><span class="p">(</span><span class="n">CONFIG_PIN_RLED</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Now that we have all of our structs and constant values defined, lets set up the Queue and the RX command:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">mainThread</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg0</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_Params</span><span class="w"> </span><span class="n">rfParams</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_Params_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rfParams</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rfParams</span><span class="p">.</span><span class="n">nID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF_STACK_ID_154</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Define Queue for RX operation</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">RFQueue_defineQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">macRxDataEntryQueue</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="n">rxRadioBufferPtr</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="k">sizeof</span><span class="p">(</span><span class="n">rxRadioBufferPtr</span><span class="p">),</span><span class="w"></span>
<span class="w">                            </span><span class="n">NUM_DATA_ENTRIES</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="n">MAX_LENGTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">NUM_APPENDED_BYTES</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>

<span class="w">            </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Request access to the radio */</span><span class="w"></span>
<span class="w">    </span><span class="n">rfHandle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF_open</span><span class="p">((</span><span class="n">RF_Object</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">rfObject</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">RF_prop_ieee154</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">RF_RadioSetup</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">RF_cmdRadioSetup</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rfParams</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* Set the frequency */</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_postCmd</span><span class="p">(</span><span class="n">rfHandle</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">RF_Op</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">RF_cmdFs_ieee154</span><span class="p">,</span><span class="w"> </span><span class="n">RF_PriorityNormal</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Let&#39;s start defining the RX operation scheduling command</span>
<span class="w">    </span><span class="n">RF_ScheduleCmdParams</span><span class="w"> </span><span class="n">rxParam</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_ScheduleCmdParams_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rxParam</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Events that will trigger the Callback Function</span>
<span class="w">    </span><span class="n">RF_EventMask</span><span class="w"> </span><span class="n">evtMask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RF_EventRxOk</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">RF_EventRxNOk</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">RF_EventRxBufFull</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">RF_EventTXAck</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">RF_EventCmdPreempted</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Set the RX cmd satus to IDLE*/</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IDLE</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Set receive queue and output buffer */</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">pRxQ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">dataQueue_t</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">macRxDataEntryQueue</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">pOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rfc_ieeeRxOutput_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">macRxOutputIeee</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Set the Rx command to trigger as soon as the command is scheduled</span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">startTrigger</span><span class="p">.</span><span class="n">triggerType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRIG_NOW</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">startTrigger</span><span class="p">.</span><span class="n">pastTrig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">//Set the operating Channel</span>
<span class="w">    </span><span class="n">RF_cmdIEEERx</span><span class="p">.</span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* Post the RX cmd */</span><span class="w"></span>
<span class="w">    </span><span class="n">RF_scheduleCmd</span><span class="p">(</span><span class="n">rfHandle</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">RF_Op</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">RF_cmdIEEERx</span><span class="p">,</span><span class="w"></span>
<span class="w">                                 </span><span class="o">&amp;</span><span class="n">rxParam</span><span class="p">,</span><span class="w"> </span><span class="n">macRxCb</span><span class="p">,</span><span class="w"> </span><span class="n">evtMask</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This simple code will setup the radio to operate in IEEE mode, and schedule a Rx
command to listen to channel 11 and trigger a callback for <code class="docutils literal notranslate"><span class="pre">EvtMask</span></code> events. Since
the device has no other scheduled commands, it will run forever in RX mode and triggering
the callback everytime it receives a packet.</p>
<p>For more information, a more detailed description is given in the <a class="reference external" href="http://www.ti.com/lit/pdf/swcu185">CC13x2 CC26x2 SimpleLink Wireless MCU Technical Reference Manual</a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="packet-format.html" class="btn btn-neutral float-left" title="Packet Format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../proprietary-rf/tx-power.html" class="btn btn-neutral float-right" title="TX Power" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>