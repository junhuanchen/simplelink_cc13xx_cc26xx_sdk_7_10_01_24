<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMD_PROP_CS &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User&#39;s Guide
 6.10.01 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CMD_PROP_RX_ADV" href="cmd_prop_rx_adv.html" />
    <link rel="prev" title="RF commands reference" href="../rf-commands-reference.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug rf-core rf-commands-reference cmd_prop_cs";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide

          </a>
              <div class="version">
                6.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart-guide/proprietary-rf-quick-start.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/examples-cc13xx_cc26xx.html">Examples User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/custom-hardware.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/rf-core-index.html">RF Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/sysconfig-index.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../proprietary-rf-guide/reference-cc13xx_cc26xx.html">API References</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../proprietary-rf-guide/tidrivers-reference-cc13xx_cc26xx.html">TI-Drivers API reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../rf-commands-reference.html">RF commands reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#protocol-independent-direct-commands">Protocol-Independent Direct Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#protocol-independent-immediate-commands">Protocol-Independent Immediate Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#immediate-commands-for-data-queue-manipulation">Immediate Commands for Data Queue Manipulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#protocol-independent-radio-operation-commands">Protocol-Independent Radio Operation Commands</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../rf-commands-reference.html#prop-radio-operation-commands">Prop Radio Operation Commands</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">CMD_PROP_CS</a></li>
<li class="toctree-l4"><a class="reference internal" href="cmd_prop_rx_adv.html">CMD_PROP_RX_ADV</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#ieee-radio-operation-commands">IEEE Radio Operation Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rf-commands-reference.html#high-speed-hs-radio-operation-commands">High Speed (HS) Radio Operation Commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../proprietary-rf-guide/glossary-cc13xx_cc26xx.html">Terms and acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../proprietary-rf-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../proprietary-rf-guide/reference-cc13xx_cc26xx.html">API References</a> &raquo;</li>
          <li><a href="../rf-commands-reference.html">RF commands reference</a> &raquo;</li>
      <li>CMD_PROP_CS</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="cmd-prop-cs">
<h1><span class="target" id="index-0"></span>CMD_PROP_CS<a class="headerlink" href="#cmd-prop-cs" title="Permalink to this headline">¶</a></h1>
<p>The carrier sense command monitors the RF activity on a channel and decides,
whether a channel is occupied (Busy) or available (Idle).  It can be used to implement a
<a class="reference external" href="https://en.wikipedia.org/wiki/Carrier_sense_multiple_access">CSMA</a> scheme where a TX command
only executes when nothing else occupies the channel.  Channel detection is
based upon two criteria: RSSI measurement and/or correlation (the presence of preamble).</p>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>The RF channel can be in several states:</p>
<dl class="field-list simple">
<dt class="field-odd">Invalid</dt>
<dd class="field-odd"><p>This is the default state at CS start.</p>
</dd>
<dt class="field-even">Idle</dt>
<dd class="field-even"><p>No signal was found.</p>
</dd>
<dt class="field-odd">Busy</dt>
<dd class="field-odd"><p>A signal was detected (RSSI above threshold or correlation succeeded (preamble detected).</p>
</dd>
</dl>
<div class="figure align-center" id="id5">
<span id="fig-channel-states"></span><img alt="../../_images/channel_states.png" src="../../_images/channel_states.png" />
<p class="caption"><span class="caption-number">Figure 100. </span><span class="caption-text">Channel states and possible transitions.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets">*</span></dt>
<dd><p>-&gt; INVALID</p>
</dd>
</dl>
<p>All possible transitions between these states are illustrated in
<a class="reference internal" href="#fig-channel-states"><span class="std std-numref">Figure 100.</span></a>  Carrier sense always starts in <code class="docutils literal notranslate"><span class="pre">INVALID</span></code>
state.  Depending on the measured RSSI and/ or the presence of preamble, the channel
goes either into <code class="docutils literal notranslate"><span class="pre">IDLE</span></code> or <code class="docutils literal notranslate"><span class="pre">BUSY</span></code> state.  The operation ends or may
continue depending on the configuration.  In addition, a timeout may occur
which ends the measurement process immediately.  After that, a status code is
written to the radio operation and an execution result is generated for the
<a class="reference internal" href="../radio-operation-commands.html#condition-evaluation"><span class="std std-ref">evaluation phase</span></a>.</p>
<p>A detailed sequence description of the carrier sense execution phase is shown
in <a class="reference internal" href="#fig-cmd-cs-execution"><span class="std std-numref">Figure 101.</span></a>  In total, four procedures run in parallel:</p>
<dl class="field-list simple">
<dt class="field-odd">watchRssi()</dt>
<dd class="field-odd"><p>Optional.  Constantly measures the signal strength(RSSI) value and updates the channel
state.</p>
</dd>
<dt class="field-even">watchCorr()</dt>
<dd class="field-even"><p>Optional.  Correlates the RF signal with the expected preamble sequence
and updates the channel state.</p>
</dd>
<dt class="field-odd">watchChannelState()</dt>
<dd class="field-odd"><p>Watches and evaluates the channel state changes caused by <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code>
or <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code>.</p>
</dd>
<dt class="field-even">waitForCsEndTrigger()</dt>
<dd class="field-even"><dl class="simple">
<dt>Optional. Waits for a timeout/end trigger (.csEndTrigger) and</dt><dd><p>evaluates the channel state when triggered.</p>
</dd>
</dl>
</dd>
</dl>
<div class="figure align-default" id="id6">
<span id="fig-cmd-cs-execution"></span><p class="plantuml">
<img src="../../_images/plantuml-ac004fa519e541bd1273b1caa7ac0c4a0668e890.png" alt=" scale 0.8

 :Execution started;
 :channelState = INVALID;]
 split
     if (.csConf.bEnaRssi) then (1)
         :watchRssi();|
     else (0)
     endif
     end
 split again
     if (.csConf.bEnaCorr) then (1)
         :watchCorr();|
     else (0)
     endif
     end
 split again
     :watchChannelState();|
 split again
     :waitForCsEndTrigger();|
 end split
 :Execution Finished;

 legend right
     Command parameters:
     - .csConf.bEnaRssi
     - .csConf.bEnaCorr
 Endlegend"/>
</p>
<p class="caption"><span class="caption-number">Figure 101. </span><span class="caption-text">The execution phase of CMD_CS as a SDL diagram.  Four procedures run in parallel.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id7">
<span id="fig-cmd-cs-watchrssi"></span><p class="plantuml">
<img src="../../_images/plantuml-19b4533fcb18698a99ff84b60c390419961353a5.png" alt=" scale 0.8

 start
 :idleCount = 0;\nbusyCount = 0;\nrssiState = INVALID;]
 repeat
     :RSSI sample available&lt;
     note right
         See section 'Timing' below.
     end note
     :RSSI = readRssi();]
     if (RSSI &lt; .rssiThr) then (yes)
         :idleCount++;\nbusyCount = 0;]
         if (idleCount &gt;= .numRssiIdle) then (yes)
             :rssiState = IDLE;]
             :updateChannelState(rssiState);|
             :RSSI state changed&gt;
         endif
     else (no)
         :busyCount++;\nidleCount = 0;]
         if (busyCount &gt;= .numRssiBusy) then (yes)
             :rssiState = BUSY;]
             :updateChannelState(rssiState);|
             :RSSI state changed&gt;
         endif
     endif
 repeat while ()

 legend right
     Command parameters:
     - .numRssiBusy
     - .numRssiIdle
     - .rssiThr
 endlegend"/>
</p>
<p class="caption"><span class="caption-number">Figure 102. </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> function from <a class="reference internal" href="#fig-cmd-cs-execution"><span class="std std-numref">Figure 101.</span></a>. For each change of <code class="docutils literal notranslate"><span class="pre">rssiState</span></code>,
the resulting state is updated ccording to <a class="reference internal" href="#tab-cmd-cs-channel-state-mapping"><span class="std std-numref">Table 13.</span></a>.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id8">
<span id="fig-cmd-cs-watchcorr"></span><img alt="../../_images/cmd_cs_watchCorr.png" src="../../_images/cmd_cs_watchCorr.png" />
<p class="caption"><span class="caption-number">Figure 103. </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code> function from <a class="reference internal" href="#fig-cmd-cs-execution"><span class="std std-numref">Figure 101.</span></a> as a state chart. For each state change, the correlation state is updated according to <a class="reference internal" href="#tab-cmd-cs-channel-state-mapping"><span class="std std-numref">Table 13.</span></a>.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets">†</span></dt>
<dd><p>-&gt; invalid</p>
</dd>
</dl>
<p>Both procedures, <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> and <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code> result in an internal
channel state that is one of <code class="docutils literal notranslate"><span class="pre">INVALID</span></code>, <code class="docutils literal notranslate"><span class="pre">IDLE</span></code> or <code class="docutils literal notranslate"><span class="pre">BUSY</span></code>.  Depending on
<code class="docutils literal notranslate"><span class="pre">.bEnaRssi</span></code> and <code class="docutils literal notranslate"><span class="pre">.bEnaRssi</span></code> one or both functions are active (not possible to set both to 0).
If only one function is active, the resulting channel state is equal to the
internal channel state.  When both functions are active, the
<code class="docutils literal notranslate"><span class="pre">.csConf.operation</span></code> flag specifies how the results from these functions
are combined:</p>
<ul class="simple">
<li><p>0: The channel is <code class="docutils literal notranslate"><span class="pre">BUSY</span></code> if either <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> <strong>OR</strong> <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code> indicate <code class="docutils literal notranslate"><span class="pre">BUSY</span></code>.</p></li>
<li><p>1: The channel is <code class="docutils literal notranslate"><span class="pre">BUSY</span></code> if both <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> <strong>AND</strong> <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code> indicate <code class="docutils literal notranslate"><span class="pre">BUSY</span></code>.</p></li>
</ul>
<p>A complete mapping can be found in <a class="reference internal" href="#tab-cmd-cs-channel-state-mapping"><span class="std std-numref">Table 13.</span></a>  The
resulting channel state is then fed into <code class="docutils literal notranslate"><span class="pre">watchChannelState()</span></code>
(<a class="reference internal" href="#fig-cmd-cs-watchchannelstate"><span class="std std-numref">Figure 104.</span></a>) and <code class="docutils literal notranslate"><span class="pre">waitForCsEndTrigger()</span></code>
(<a class="reference internal" href="#fig-cmd-cs-waitforcsendtrigger"><span class="std std-numref">Figure 105.</span></a>).</p>
<span id="tab-cmd-cs-channel-state-mapping"></span><table class="docutils align-default" id="id9">
<caption><span class="caption-number">Table 13. </span><span class="caption-text">Truth table that combines the output of <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> and <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code>
        depending on <code class="docutils literal notranslate"><span class="pre">.csConf.operation</span></code>. The resulting channel state is used
        as input for <code class="docutils literal notranslate"><span class="pre">watchChannelState()</span></code> in <a class="reference internal" href="#fig-cmd-cs-watchchannelstate"><span class="std std-numref">Figure 104.</span></a>
        and <code class="docutils literal notranslate"><span class="pre">waitForCsEndTrigger()</span></code> in <a class="reference internal" href="#fig-cmd-cs-waitforcsendtrigger"><span class="std std-numref">Figure 105.</span></a>.</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 19%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 11%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="4"><p>RSSI OR Correlation <code class="docutils literal notranslate"><span class="pre">csConf.operation</span> <span class="pre">=</span> <span class="pre">0</span></code></p></th>
<th class="head" colspan="3"><p>RSSI AND Correlation <code class="docutils literal notranslate"><span class="pre">csConf.operation</span> <span class="pre">=</span> <span class="pre">1</span></code></p></th>
</tr>
<tr class="row-even"><th class="head"></th>
<th class="head" colspan="6"><p><strong>Correlation state</strong></p></th>
</tr>
<tr class="row-odd"><th class="head"><p><strong>RSSI State</strong></p></th>
<th class="head"><p>INVALID</p></th>
<th class="head"><p>IDLE</p></th>
<th class="head"><p>BUSY</p></th>
<th class="head"><p>INVALID</p></th>
<th class="head"><p>IDLE</p></th>
<th class="head"><p>BUSY</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>INVALID</strong></p></td>
<td><p>INVALID</p></td>
<td><p>INVALID</p></td>
<td><p>BUSY</p></td>
<td><p>INVALID</p></td>
<td><p>IDLE</p></td>
<td><p>INVALID</p></td>
</tr>
<tr class="row-odd"><td><p><strong>IDLE</strong></p></td>
<td><p>INVALID</p></td>
<td><p>IDLE</p></td>
<td><p>BUSY</p></td>
<td><p>IDLE</p></td>
<td><p>IDLE</p></td>
<td><p>IDLE</p></td>
</tr>
<tr class="row-even"><td><p><strong>BUSY</strong></p></td>
<td><p>BUSY</p></td>
<td><p>BUSY</p></td>
<td><p>BUSY</p></td>
<td><p>INVALID</p></td>
<td><p>IDLE</p></td>
<td><p>BUSY</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id10">
<span id="fig-cmd-cs-watchchannelstate"></span><p class="plantuml">
<img src="../../_images/plantuml-3d6ef3b97a105abb6396edb364526acb69221701.png" alt=" scale 0.8

 start
 :finished = false;]
 repeat
     :channelState changed&lt;
     :channelState = lookup(rssiState, corrState);|
     note right
         See lookup table above
     endnote
     if (channelState) then (IDLE)
         if (.csConf.idleOp) then (1)
             :finished = true;\nresult = FALSE;\n.status = PROP_DONE_IDLE;]
         else (0)
         endif
     elseif (channelState) then (BUSY)
         if (.csConf.busyOp) then (1)
             :finished = true;\nresult = TRUE;\n.status = PROP_DONE_BUSY;]
         else (0)
         endif
     else (INVALID)
     endif
 repeat while (finished?) is (false)
 stop

 legend right
     Command parameters:
     - .csConf.busyOp
     - .csConf.idleOp
 endlegend"/>
</p>
<p class="caption"><span class="caption-number">Figure 104. </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">watchChannelState()</span></code> function from <a class="reference internal" href="#fig-cmd-cs-execution"><span class="std std-numref">Figure 101.</span></a>.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id11">
<span id="fig-cmd-cs-waitforcsendtrigger"></span><p class="plantuml">
<img src="../../_images/plantuml-5bb2b7756335b4f6216c897c764aacaac5d6aadb.png" alt=" scale 0.8

 start
 :csEndTrigger fired&lt;
 if (channelState) then (IDLE)
     :.status = PROP_DONE_IDLE;\nresult = FALSE;]
 elseif (channelState) then (BUSY)
     :.status = PROP_DONE_BUSY;\nresult = TRUE;]
 else (INVALID)
     if (.csConf.timeOutRes) then (1)
         :.status = PROP_DONE_IDLETIMEOUT;\nresult = FALSE;]
     else (0)
         :.status = PROP_DONE_BUSYTIMEOUT;\nresult = TRUE;]
     endif
 endif
 stop

 legend right
     Command parameters:
     - .csConf.timeOutRes
 endlegend"/>
</p>
<p class="caption"><span class="caption-number">Figure 105. </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">waitForCsEndTrigger()</span></code> function from <a class="reference internal" href="#fig-cmd-cs-execution"><span class="std std-numref">Figure 101.</span></a>
in an SDL diagram.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="timing">
<h2>Timing<a class="headerlink" href="#timing" title="Permalink to this headline">¶</a></h2>
<p>The CMD_PROP_CS provides two timing values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.csEndTime</span></code> is the minimum execution time in <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-RAT"><span class="xref std std-term">RAT</span></a> ticks,
after which channel state evaluation is forced. Optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.corrPeriod</span></code> specifies the number of <a class="reference internal" href="../../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-RAT"><span class="xref std std-term">RAT</span></a> ticks between each correlation evaluation.</p></li>
</ul>
<p>How to choose a minimum value for <code class="docutils literal notranslate"><span class="pre">cmd.csEndTime</span></code> so that at least either
<code class="docutils literal notranslate"><span class="pre">.numRssiIdle</span></code> or <code class="docutils literal notranslate"><span class="pre">.numRssiBusy</span></code> RSSI samples are measured before a
final decision is forced?  The following drawing illustrates the CS command
execution phase.</p>
<img alt="../../_images/aafig-98140fe36f89f0c5061f8be503573b94ffe734dc.png" src="../../_images/aafig-98140fe36f89f0c5061f8be503573b94ffe734dc.png" />
<p>After the obligatory parsing delay of approximatly 50 µs, command execution
starts and the end trigger for <code class="docutils literal notranslate"><span class="pre">.csEndTime</span></code> is armed. After a fixed time
<img class="math" src="../../_images/math/873c3b9b38d7a7cfff6039734d06451601d25b35.svg" alt="Rssi_0"/>, the first RSSI sample is available and the  <cite>RSSI available</cite>
signal in <a class="reference internal" href="#fig-cmd-cs-watchrssi"><span class="std std-numref">Figure 102.</span></a> is fired for the first time.
Successive RSSI samples occur with a period <img class="math" src="../../_images/math/f41e119dfef08cb18ea9670c268af47d5dcb58a4.svg" alt="Rssi_n"/>. The execution may
either end up due to channel state evaluation in
<a class="reference internal" href="#fig-cmd-cs-watchchannelstate"><span class="std std-numref">Figure 104.</span></a> or a timeout of <code class="docutils literal notranslate"><span class="pre">cmd.csEndTime</span></code>, but
has an additional evaluation delay of 5 µs.</p>
<p>Please note, that the RSSI sample period might be affected by the Automatic
Gain Correction (AGC) and the AGC is always enabled in RX mode. In case of a
very strong signal, the AGC might increase the first sample period
<img class="math" src="../../_images/math/e4d758b5d0d1e7c968f287401eefe3615e745a6f.svg" alt="Rssi_1"/> up to 4 times. If the signal strength is changing very fast,
the AGC re-adjusts every RSSI sample period. However, in reality it is safe to
assume that only the first period <img class="math" src="../../_images/math/e4d758b5d0d1e7c968f287401eefe3615e745a6f.svg" alt="Rssi_1"/> is delayed by the AGC. The
value <img class="math" src="../../_images/math/873c3b9b38d7a7cfff6039734d06451601d25b35.svg" alt="Rssi_0"/> in contrast, is not affected, but the value might be
wrong if the signal strength is above -50 dBm. For <a class="reference external" href="https://en.wikipedia.org/wiki/Carrier_sense_multiple_access">CSMA</a> applications, this is expected to be
uncritical.</p>
<p>A minimum value for <code class="docutils literal notranslate"><span class="pre">cmd.csEndTime</span></code> can be estimated with formula
<a class="reference internal" href="#equation-eq-cmd-csendtime">(10)</a>.</p>
<div class="math" id="equation-eq-cmd-csendtime">
<p><span class="eqno">(10)<a class="headerlink" href="#equation-eq-cmd-csendtime" title="Permalink to this equation">¶</a></span><img src="../../_images/math/eb8a33069c620f9aaded1d89bc222650fc92d288.svg" alt="csEndTime_{\text{min}}^{\text{rssi}} =
     \begin{cases}
         Rssi_0 + Rssi_n \cdot cmd.numRssiIdle + \SI{5}{\us} \\
         Rssi_0 + Rssi_n \cdot cmd.numRssiBusy + \SI{5}{\us}
     \end{cases}"/></p>
</div><p><a class="reference internal" href="#tab-cmd-cs-rssi-update-period"><span class="std std-numref">Table 14.</span></a> provides measurement results for
<img class="math" src="../../_images/math/873c3b9b38d7a7cfff6039734d06451601d25b35.svg" alt="Rssi_0"/> and <img class="math" src="../../_images/math/f41e119dfef08cb18ea9670c268af47d5dcb58a4.svg" alt="Rssi_n"/>. Both depend on the configured RX bandwidth
(<code class="docutils literal notranslate"><span class="pre">.rxBw</span></code>), specified either in CMD_PROP_RADIO_SETUP or
CMD_PROP_RADIO_DIV_SETUP.</p>
<span id="tab-cmd-cs-rssi-update-period"></span><table class="docutils align-default" id="id12">
<caption><span class="caption-number">Table 14. </span><span class="caption-text">Timing <code class="docutils literal notranslate"><span class="pre">watchRssi()</span></code> and <code class="docutils literal notranslate"><span class="pre">watchCorr()</span></code></span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 26%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>RX bandwidth</p></th>
<th class="head" colspan="2"><p>Value for <code class="docutils literal notranslate"><span class="pre">rxBw</span></code></p></th>
<th class="head"><p>First RSSI sample</p></th>
<th class="head"><p>RSSI sample period</p></th>
</tr>
<tr class="row-even"><th class="head"><p>[kHz]</p></th>
<th class="head"><p>CC13x0</p></th>
<th class="head"><p>CC26x0</p></th>
<th class="head"><p><img class="math" src="../../_images/math/873c3b9b38d7a7cfff6039734d06451601d25b35.svg" alt="Rssi_0"/> [µs]</p></th>
<th class="head"><p><img class="math" src="../../_images/math/f41e119dfef08cb18ea9670c268af47d5dcb58a4.svg" alt="Rssi_n"/> [µs]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>45/55/66</p></td>
<td><p>32/33/34</p></td>
<td><p>n/a</p></td>
<td><p>348</p></td>
<td><p>136</p></td>
</tr>
<tr class="row-even"><td><p>78/98/118</p></td>
<td><p>35/36/37</p></td>
<td><p>1/2/3</p></td>
<td><p>214</p></td>
<td><p>68</p></td>
</tr>
<tr class="row-odd"><td><p>155/196/236</p></td>
<td><p>38/39/40</p></td>
<td><p>4/5/6</p></td>
<td><p>149</p></td>
<td><p>34</p></td>
</tr>
<tr class="row-even"><td><p>311/392/471</p></td>
<td><p>41/42/43</p></td>
<td><p>7/8/9</p></td>
<td><p>114</p></td>
<td><p>17</p></td>
</tr>
<tr class="row-odd"><td><p>622/784/942</p></td>
<td><p>44/45/46</p></td>
<td><p>10/11/12</p></td>
<td><p>98</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>1243/1567/1884</p></td>
<td><p>47/48/49</p></td>
<td><p>13/14/15</p></td>
<td><p>89</p></td>
<td><p>10</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../rf-commands-reference.html" class="btn btn-neutral float-left" title="RF commands reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmd_prop_rx_adv.html" class="btn btn-neutral float-right" title="CMD_PROP_RX_ADV" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>