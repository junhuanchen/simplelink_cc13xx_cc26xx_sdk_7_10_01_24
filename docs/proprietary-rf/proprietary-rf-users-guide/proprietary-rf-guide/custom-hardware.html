<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom Hardware &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User&#39;s Guide
 6.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TI-RTOS7 (RTOS Kernel) Overview" href="tirtos-index-cc13xx_cc26xx.html" />
    <link rel="prev" title="Examples User’s Guide" href="examples-cc13xx_cc26xx.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug proprietary-rf-guide custom-hardware";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide

          </a>
              <div class="version">
                6.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/proprietary-rf-quick-start.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples-cc13xx_cc26xx.html">Examples User’s Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-board-files">Introduction to Board Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-guide-to-creating-a-custom-board-file">Quick guide to Creating a Custom Board File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dio-mapping">DIO mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unused-drivers">Unused drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unused-peripherals">Unused peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cc13x0-f32-f64">CC13x0 F32/ F64</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-32-khz-crystal-less-mode">Using 32-kHz Crystal-Less Mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-much-does-the-rc-oscillator-drift-in-standby-mode">How much does the RC oscillator drift in Standby mode?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-the-software">Configure the Software</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#initial-board-bring-up">Initial Board Bring Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-up-sysconfig-when-using-a-custom-board">Set-up SysConfig When Using a Custom Board</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="rf-core-index.html">RF Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="sysconfig-index.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary-cc13xx_cc26xx.html">Terms and acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
      <li>Custom Hardware</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="custom-hardware">
<span id="sec-custom-hardware"></span><h1>Custom Hardware<a class="headerlink" href="#custom-hardware" title="Permalink to this headline">¶</a></h1>
<p>This section will explain how modify the board files from the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a> to enable code
to run on custom hardware.</p>
<p>A full guide to hardware configuration can be found in the <a class="reference external" href="http://www.ti.com/lit/swra640">CC13xx/CC26xx Hardware
Configuration and PCB Design Considerations</a> app note.</p>
<div class="section" id="introduction-to-board-files">
<h2>Introduction to Board Files<a class="headerlink" href="#introduction-to-board-files" title="Permalink to this headline">¶</a></h2>
<p>TI-RTOS7 drivers rely on “board files” for their board-specific configuration
parameters. The convention is to name these files based on the development kits
provided by TI in addition to a generic <code class="docutils literal notranslate"><span class="pre">Board.h</span></code> with <code class="docutils literal notranslate"><span class="pre">Board_*</span></code> definitions
to map the proper pins defined by <code class="docutils literal notranslate"><span class="pre">ioc.h</span></code>.</p>
<p>In the examples provided in the SDK the board file is typically named after the board used.</p>
<p>For example, for the examples found under CC1310 Launchpad, TI drivers , the following comprise the
set of board files used by the CC13xx or CC26xx LaunchPad development kit:</p>
<ul class="simple">
<li><p>Board.h</p></li>
<li><p>CC1310_LAUNCHXL.h</p></li>
<li><p>CC1310_LAUNCHXL.c</p></li>
</ul>
<p>TI recommends to start with these existing set of board files when porting
an application to custom development boards. When modifying or porting these
board files, user should consult with <a class="reference external" href="../../../drivers/tidriversAPIs.html">TI Drivers API Reference</a>.</p>
</div>
<div class="section" id="quick-guide-to-creating-a-custom-board-file">
<h2>Quick guide to Creating a Custom Board File<a class="headerlink" href="#quick-guide-to-creating-a-custom-board-file" title="Permalink to this headline">¶</a></h2>
<p>Here the names of the files used for the CC1310 Launchpad is used. If you are using a different
Launchpad the names of the board files reflect this. This is valid for all packet sizes. Make sure that
the file you are editing is locally in the project and not a file located in the SDK installation.</p>
<ul>
<li><p>Open CC1310_LAUNCHXL.h</p></li>
<li><p>For each resource, assign a IOID number according to what is used in the custom PCB.</p></li>
<li><p>As an example: If the UART RX pin is connected to DIO 10 set:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define CC1310_LAUNCHXL_UART_RX         IOID_10</span>
</pre></div>
</div>
</li>
<li><p>If UART is not used, set all 4 UART pins to PIN_UNASSIGNED</p></li>
<li><p>Only board signal alias you are using in your code. All other should be set to PIN_UNASSIGNED.</p></li>
<li><p>Test that your code compiles and run.</p></li>
<li><p>Rename the board files to reflect the name of your design.</p></li>
</ul>
<dl>
<dt>As an example: If the UART RX pin is connected to DIO 10 set:</dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define CC1310_LAUNCHXL_UART_RX         IOID_10</span>
</pre></div>
</div>
</dd>
</dl>
<p>If UART is not used, set all 4 UART pins to PIN_UNASSIGNED</p>
</div>
<div class="section" id="dio-mapping">
<h2>DIO mapping<a class="headerlink" href="#dio-mapping" title="Permalink to this headline">¶</a></h2>
<p>Board_init() is called from main() and calls the following functions:
* PIN_init (used if the PIN driver is used)
* Board_initHook</p>
<p>The PIN_init uses BoardGpioInitTable as input. Modify this table to correspond to your board.</p>
<p>The Board_initHook() function is used to run board specific functions. On the launchpad CC1310_LAUNCHXL_shutDownExtFlash
is called. If the custom board doesn’t have an external flash, the call to this function should be removed.</p>
<p>If the GPIO driver is used: The GPIO_setConfig function uses the table defined by GPIO_PinConfig in CC1310_LAUNCHXL.c.
Modify this accordingly to the board you are using. The CC1310_LAUNCHXL_GPIOName enum in CC1310_LAUNCHXL.h have
to be changed in the same manner.
The table in the .c file is the physical pin mapping, the table in the .h file is the logical name used in the code.
The first entry in the table in the .h file correspond to the first entry in the .c file and so on.</p>
<p>The GPIO and PIN tables define the DIO default state.</p>
</div>
<div class="section" id="unused-drivers">
<h2>Unused drivers<a class="headerlink" href="#unused-drivers" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only applicable for CC13X0/CC26X0, for all other devices this is done by SysConfig.</p>
</div>
<p>The board files contains declarations of objects used by the drivers. If a driver is not used the compiler should in most cases
discard the objects but in some cases the unused objects could consume memory. In these cases the unused objects could be deleted.</p>
<p>To delete the objects do as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>Remove the following variables from &lt;BOARD&gt;.h:</p>
<ul>
<li><p>All of PIN defines &lt;BOARD&gt;_&lt;Module&gt;_&lt;PIN&gt;</p></li>
<li><p>All of typedef enum &lt;BOARD&gt;_&lt;Module&gt;Name</p></li>
</ul>
</li>
<li><p>Remove the following variables from &lt;BOARD&gt;.c:</p>
<ul>
<li><p>&lt;Module&gt;_count</p></li>
<li><p>&lt;Module&gt;_config</p></li>
<li><p>&lt;module&gt;CC26xxHWAttrs</p></li>
<li><p>&lt;module&gt;CC26xxObjects</p></li>
<li><p>Any other local variables used by the above</p></li>
</ul>
</li>
<li><p>Remove the following variables from the Board.h:</p>
<ul>
<li><p>All peripherals of Board_&lt;Module&gt;</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>As long as the items are deleted from &lt;BOARD&gt;.h the compiler will give a warning/
error if some other entries are not deleted.</p>
</div>
<div class="section" id="unused-peripherals">
<h2>Unused peripherals<a class="headerlink" href="#unused-peripherals" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only applicable for CC13X0/CC26X0, for all other devices this is done by SysConfig.</p>
</div>
<p>In some cases the driver is used but not all objects tied to the driver is used.
Then the unused objects can be deleted.</p>
<p>Example:</p>
<p>The CC1310 contain two SSI modules. Some applications uses only one SPI but the
board files allocate memory space for usage for both modules. If the application
uses only SPI0 the following can be done:</p>
<p>Go to CC1310_LAUNCHXL.h and locate the SPI definition. Comment out the unused SPI:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPIName</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">CC1310_LAUNCHXL_SPI0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1">//CC1310_LAUNCHXL_SPI1,</span>

<span class="w">    </span><span class="n">CC1310_LAUNCHXL_SPICOUNT</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPIName</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Go to the CC1310_LAUNCHXL.c and locate the following const declarations and
comment out the unused SPI as shown:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">SPI_Config</span><span class="w"> </span><span class="n">SPI_config</span><span class="p">[</span><span class="n">CC1310_LAUNCHXL_SPICOUNT</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">fxnTablePtr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPICC26XXDMA_fxnTable</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">object</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">spiCC26XXDMAObjects</span><span class="p">[</span><span class="n">CC1310_LAUNCHXL_SPI0</span><span class="p">],</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">hwAttrs</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">spiCC26XXDMAHWAttrs</span><span class="p">[</span><span class="n">CC1310_LAUNCHXL_SPI0</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="c1">//{</span>
<span class="w">        </span><span class="c1">//      .fxnTablePtr = &amp;SPICC26XXDMA_fxnTable,</span>
<span class="w">        </span><span class="c1">//      .object      = &amp;spiCC26XXDMAObjects[CC1310_LAUNCHXL_SPI1],</span>
<span class="w">        </span><span class="c1">//      .hwAttrs     = &amp;spiCC26XXDMAHWAttrs[CC1310_LAUNCHXL_SPI1]</span>
<span class="w">        </span><span class="c1">//},</span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">SPICC26XXDMA_HWAttrsV1</span><span class="w"> </span><span class="n">spiCC26XXDMAHWAttrs</span><span class="p">[</span><span class="n">CC1310_LAUNCHXL_SPICOUNT</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">baseAddr</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">SSI0_BASE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">intNum</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="n">INT_SSI0_COMB</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">intPriority</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">swiPriority</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">powerMngrId</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">PowerCC26XX_PERIPH_SSI0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">defaultTxBufValue</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">rxChannelBitMask</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">UDMA_CHAN_SSI0_RX</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">txChannelBitMask</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">UDMA_CHAN_SSI0_TX</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">mosiPin</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPI0_MOSI</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">misoPin</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPI0_MISO</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">clkPin</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPI0_CLK</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">csnPin</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="n">CC1310_LAUNCHXL_SPI0_CSN</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">minDmaTransferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"></span>
<span class="p">},</span><span class="w"></span>
<span class="c1">//{</span>
<span class="c1">//    .baseAddr           = SSI1_BASE,</span>
<span class="c1">//    .intNum             = INT_SSI1_COMB,</span>
<span class="c1">//    .intPriority        = ~0,</span>
<span class="c1">//    .swiPriority        = 0,</span>
<span class="c1">//    .powerMngrId        = PowerCC26XX_PERIPH_SSI1,</span>
<span class="c1">//    .defaultTxBufValue  = 0xFF,</span>
<span class="c1">//    .rxChannelBitMask   = 1&lt;&lt;UDMA_CHAN_SSI1_RX,</span>
<span class="c1">//    .txChannelBitMask   = 1&lt;&lt;UDMA_CHAN_SSI1_TX,</span>
<span class="c1">//    .misoPin            = CC1310_LAUNCHXL_SPI1_MISO,</span>
<span class="c1">//    .mosiPin            = CC1310_LAUNCHXL_SPI1_MOSI,</span>
<span class="c1">//    .clkPin             = CC1310_LAUNCHXL_SPI1_CLK,</span>
<span class="c1">//    .csnPin             = CC1310_LAUNCHXL_SPI1_CSN,</span>
<span class="c1">//    .minDmaTransferSize = 10</span>
<span class="c1">//    }</span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The same method can be used for other objects as ADC, PWM, GPTimer</p>
</div>
<div class="section" id="cc13x0-f32-f64">
<h2>CC13x0 F32/ F64<a class="headerlink" href="#cc13x0-f32-f64" title="Permalink to this headline">¶</a></h2>
<p>The following flash sizes are available for the CC13x0 family: 128 kB, 64 kB and
32 kB. Per default, software examples in the SDK use the 128 kB flash variant.
In order to change the flash size configuration, take the following steps:</p>
<ul class="simple">
<li><p>In the project properties-&gt; General Project tab, select the correct variant.</p></li>
<li><p>In the linker file (file extension .cmd or .icf), change the FLASH_SIZE and
RAM_SIZE variables according to the variant used.</p></li>
</ul>
</div>
<div class="section" id="using-32-khz-crystal-less-mode">
<h2>Using 32-kHz Crystal-Less Mode<a class="headerlink" href="#using-32-khz-crystal-less-mode" title="Permalink to this headline">¶</a></h2>
<p>Depending on timing requirements, the 32.768-kHz crystal may be optional. The
32-kHz internal low-frequency RC oscillator (RCOSC_LF) can be used as a reference
if the low-power crystal oscillator is not used. The RC oscillator can be
calibrated automatically to provide a sleep timer accuracy meeting the Bluetooth®
Low Energy specification. By using the RCOSC_LF, the 32-kHz crystal can be
removed from the board layout. Using an external crystal has the advantage that
it increases sleep clock accuracy and reduces the power consumption for
Bluetooth Low Energy (by shortening RX windows around connection events). An
external crystal is required for time synchronous protocols such as TI 15.4-Stack
and wM-Bus.</p>
<div class="section" id="how-much-does-the-rc-oscillator-drift-in-standby-mode">
<span id="sec-rcosc-drift"></span><h3>How much does the RC oscillator drift in Standby mode?<a class="headerlink" href="#how-much-does-the-rc-oscillator-drift-in-standby-mode" title="Permalink to this headline">¶</a></h3>
<p>RCOSC drift in standby is dependent on the following factors:</p>
<ul class="simple">
<li><p>VDDR supply changes which in turn can be affected by temperature</p></li>
<li><p>temperature change</p></li>
<li><p>individual device differences.</p></li>
</ul>
<p>Because of this drift, when using the RCOSC_LF it’s necessary to wake up fairly
often and do a calibration. The time interval between calibrations will depend
on the accuracy needed and the factors above. E.g., if you know the temperature
of the device will change rapidly, calibration should be done often.</p>
<p>One strategy to find a good calibration interval would be to experiment. If you’re
in an environment where the temperature never changes, the starting point can be
1 minute. If the temperature is rapidly changing, 1 second can be the starting
point. If your application is waking up fairly regularly regardless, it might
not be necessary to add a dedicated timer for calibration.</p>
<p>Note that the biggest factor comes from individual device differences. This means
that any testing should be done on a larger scale to ensure a good picture of the
device differences.</p>
<p>Lastly, it might be good to ensure the radio protocol used has some sort of check
for lost packets and a retransmit mechanism. Many RF protocols implement this,
e.g. Bluetooth low energy. If you are using a proprietary protocol, implementing
acknowledgments and retries can be a good way of ensuring no packets are lost due
to clock drift.</p>
</div>
<div class="section" id="configure-the-software">
<h3>Configure the Software<a class="headerlink" href="#configure-the-software" title="Permalink to this headline">¶</a></h3>
<p>There are a few steps that must be taken to enable this feature. First let’s go
through the configuration.</p>
<ol class="arabic">
<li><p>CCFG configuration. Open the CCFG file (e.g. <code class="docutils literal notranslate"><span class="pre">ccfg.c</span></code>) and make the following
configuration:</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 1. </span><span class="caption-text">ccfg.c</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef SET_CCFG_MODE_CONF_SCLK_LF_OPTION</span>
<span class="c1">// #define SET_CCFG_MODE_CONF_SCLK_LF_OPTION          0x0        // LF clock derived from High Frequency XOSC</span>
<span class="c1">// #define SET_CCFG_MODE_CONF_SCLK_LF_OPTION          0x1        // External LF clock</span>
<span class="c1">// #define SET_CCFG_MODE_CONF_SCLK_LF_OPTION          0x2        // LF XOSC</span>
<span class="cp">#define SET_CCFG_MODE_CONF_SCLK_LF_OPTION          0x3        </span><span class="c1">// LF RCOSC</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Enable the RCOSC in the power policy. Do this either with SysConfig or in the
board file depending on your project set up.</p>
<blockquote>
<div><div class="figure align-default">
<img alt="../_images/power-config.png" src="../_images/power-config.png" />
</div>
</div></blockquote>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">PowerCC26X2_Config</span><span class="w"> </span><span class="n">PowerCC26X2_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">policyInitFxn</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">policyFxn</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PowerCC26XX_standbyPolicy</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">calibrateFxn</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">PowerCC26XX_calibrate</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">.</span><span class="n">enablePolicy</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="p">.</span><span class="n">calibrateRCOSC_LF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"></span>
</span><span class="w">  </span><span class="p">.</span><span class="n">calibrateRCOSC_HF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>When using the RC OSC, it’s necessary to wake up fairly often and do a
calibration. Please see <a class="reference internal" href="#sec-rcosc-drift"><span class="std std-ref">How much does the RC oscillator drift in Standby mode?</span></a> for considerations of how often.</p>
<p>In many applications, this will already be a part of normal device operation.
(E.g. the application wakes up the device every 1 min to read a sensor.) If not,
a simple clock or timer that wakes up the application can be implemented.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="initial-board-bring-up">
<h2>Initial Board Bring Up<a class="headerlink" href="#initial-board-bring-up" title="Permalink to this headline">¶</a></h2>
<p>When powering up a custom board with the CC13xx or CC26xx for the first time, it is
recommended to follow the Board Bring-Up section on
<a class="reference external" href="http://www.ti.com/lit/swra640">CC13xx/CC26xx Hardware Configuration and PCB Design Considerations</a>.
After confirming that the board is being powered correctly by the battery or
power supply and can be identified by the JTAG tool, programming the device with
a minimal SW application to verify stability is also suggested.</p>
</div>
<div class="section" id="set-up-sysconfig-when-using-a-custom-board">
<h2>Set-up SysConfig When Using a Custom Board<a class="headerlink" href="#set-up-sysconfig-when-using-a-custom-board" title="Permalink to this headline">¶</a></h2>
<p>The following only applies when using a <strong>CC1352P</strong> device.</p>
<p>When using a <strong>CC1352P</strong> device, you need to configure SysConfig
in order to meet your design’s needs. This must be done by selecting the
correct option for “<em>Based On RF Design</em>” inside the RF Design module of
SysConfig.</p>
<blockquote>
<div><div class="figure align-center" id="id4">
<img alt="../_images/SysConfig_cc1352P.png" src="../_images/SysConfig_cc1352P.png" />
<p class="caption"><span class="caption-number">Figure 12. </span><span class="caption-text">Select the correct option for “Based On RF Design” inside the RF Design
module of SysConfig</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A few issues might appear when migrating an example from SDK 3.30
or from SDK 3.40. In this case, makes sure that the correct option
for “Based On RF Design” is selected inside all the RF-STACKS
SysConfig modules used by your project.</p>
</div>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples-cc13xx_cc26xx.html" class="btn btn-neutral float-left" title="Examples User’s Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tirtos-index-cc13xx_cc26xx.html" class="btn btn-neutral float-right" title="TI-RTOS7 (RTOS Kernel) Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>