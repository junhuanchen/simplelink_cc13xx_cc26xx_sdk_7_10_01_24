<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tasks &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User&#39;s Guide
 6.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Clocks" href="clocks.html" />
    <link rel="prev" title="Queues" href="queues.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug tirtos tasks";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide

          </a>
              <div class="version">
                6.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/proprietary-rf-quick-start.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/examples-cc13xx_cc26xx.html">Examples User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/custom-hardware.html">Custom Hardware</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../proprietary-rf-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hwis_swis_idle.html">Threading Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="bios7_config.html">Kernel Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_vs_construct.html">Creating vs. Constructing</a></li>
<li class="toctree-l2"><a class="reference internal" href="synchronization.html">Thread Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="queues.html">Queues</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initializing-a-task">Initializing a Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-task-function">A Task Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html">Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="power.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="bios7_migration.html">TI-RTOS to TI-RTOS7 Migration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/rf-core-index.html">RF Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/sysconfig-index.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html">Terms and acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../proprietary-rf-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a> &raquo;</li>
      <li>Tasks</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="tasks">
<span id="sec-rtos-overview-tasks"></span><h1>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h1>
<p>TI-RTOS <em>Tasks</em> are equivalent to independent threads that conceptually execute
functions in parallel within a single C program. In reality, switching the
processor from one task to another helps achieve concurrency. Each Task is
always in one of the following modes of execution:</p>
<ul class="simple">
<li><p><strong>Running</strong>: task is currently running</p></li>
<li><p><strong>Ready</strong>: task is scheduled for execution</p></li>
<li><p><strong>Blocked</strong>: task is suspended from execution</p></li>
<li><p><strong>Terminated</strong>: task is terminated from execution</p></li>
<li><p><strong>Inactive</strong>: task is on inactive list</p></li>
</ul>
<p>One (and only one) task is always running, even if it is only the Idle Task (see
<a class="reference internal" href="hwis_swis_idle.html#tirtos-threads"><span class="std std-numref">Figure 13.</span></a>). The current running task can be blocked from
execution by calling certain Task module functions, as well as functions
provided by other modules like Semaphores. The current task can also terminate
itself. In either case, the processor is switched to the highest priority task
that is ready to run. See the Task module in the package ti.sysbios.knl section
of the <a class="reference external" href="../../../tirtos7/Bios_User_Guide.pdf">TI-RTOS7 Kernel (SYS/BIOS) User’s Guide</a> for more information on these functions.</p>
<p>Numeric priorities are assigned to tasks, and multiple tasks can have the same
priority. Tasks are readied to execute by highest to lowest priority level;
tasks of the same priority are scheduled in order of arrival. The priority of
the currently running task is never lower than the priority of any ready task.
The running task is preempted and rescheduled to execute when there is a ready
task of higher priority.</p>
<div class="section" id="initializing-a-task">
<span id="sec-rtos-overview-initializing-a-task"></span><h2>Initializing a Task<a class="headerlink" href="#initializing-a-task" title="Permalink to this headline">¶</a></h2>
<p>When a task is initialized, it has its own runtime stack for storing local
variables as well as further nesting of function calls. All tasks executing
within a single program share a common set of global variables, accessed
according to the standard rules of scope for C functions. This set of memory is
the context of the task. The following is an example of the application task
being constructed.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<span id="creating-task-listing"></span><div class="code-block-caption"><span class="caption-number">Listing 13. </span><span class="caption-text">A TI-RTOS task</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;xdc/std.h&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ti/sysbios/BIOS.h&gt;</span><span class="cp"></span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ti/sysbios/knl/Task.h&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="cp">#define TASK_STACK_SIZE 512</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cm">/* Task&#39;s stack */</span><span class="w"></span>
<span class="linenos"> 8</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">appTaskStack</span><span class="p">[</span><span class="n">TASK_STACK_SIZE</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="cm">/* Task object (to be constructed) */</span><span class="w"></span>
<span class="linenos">11</span><span class="n">Task_Struct</span><span class="w"> </span><span class="n">task0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="cm">/* Task function */</span><span class="w"></span>
<span class="hll"><span class="linenos">14</span><span class="kt">void</span><span class="w"> </span><span class="nf">taskFunction</span><span class="p">(</span><span class="n">UArg</span><span class="w"> </span><span class="n">arg0</span><span class="p">,</span><span class="w"> </span><span class="n">UArg</span><span class="w"> </span><span class="n">arg1</span><span class="p">)</span><span class="w"></span>
</span><span class="hll"><span class="linenos">15</span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="linenos">16</span><span class="w">    </span><span class="cm">/* Local variables. Variables here go onto task stack!! */</span><span class="w"></span>
</span><span class="hll"><span class="linenos">17</span>
</span><span class="hll"><span class="linenos">18</span><span class="w">    </span><span class="cm">/* Run one-time code when task starts */</span><span class="w"></span>
</span><span class="hll"><span class="linenos">19</span>
</span><span class="hll"><span class="linenos">20</span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="cm">/* Run loop forever (unless terminated) */</span><span class="w"></span>
</span><span class="hll"><span class="linenos">21</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="linenos">22</span><span class="w">        </span><span class="cm">/*</span>
</span><span class="hll"><span class="linenos">23</span><span class="cm">         * Block on a signal or for a duration. Examples:</span>
</span><span class="hll"><span class="linenos">24</span><span class="cm">         *  ``Sempahore_pend()``</span>
</span><span class="hll"><span class="linenos">25</span><span class="cm">         *  ``Event_pend()``</span>
</span><span class="hll"><span class="linenos">26</span><span class="cm">         *  ``Task_sleep()``</span>
</span><span class="hll"><span class="linenos">27</span><span class="cm">         *</span>
</span><span class="hll"><span class="linenos">28</span><span class="cm">         * &quot;Process data&quot;</span>
</span><span class="hll"><span class="linenos">29</span><span class="cm">         */</span><span class="w"></span>
</span><span class="hll"><span class="linenos">30</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span class="hll"><span class="linenos">31</span><span class="p">}</span><span class="w"></span>
</span><span class="linenos">32</span>
<span class="linenos">33</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="w">    </span><span class="n">Task_Params</span><span class="w"> </span><span class="n">taskParams</span><span class="p">;</span><span class="w"></span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">    </span><span class="c1">// Configure task</span>
<span class="linenos">38</span><span class="w">    </span><span class="n">Task_Params_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskParams</span><span class="p">);</span><span class="w"></span>
<span class="linenos">39</span><span class="w">    </span><span class="n">taskParams</span><span class="p">.</span><span class="n">stack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">appTaskStack</span><span class="p">;</span><span class="w"></span>
<span class="linenos">40</span><span class="w">    </span><span class="n">taskParams</span><span class="p">.</span><span class="n">stackSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TASK_STACK_SIZE</span><span class="p">;</span><span class="w"></span>
<span class="linenos">41</span><span class="w">    </span><span class="n">taskParams</span><span class="p">.</span><span class="n">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TASK_PRIORITY</span><span class="p">;</span><span class="w"></span>
<span class="linenos">42</span>
<span class="hll"><span class="linenos">43</span><span class="w">    </span><span class="n">Task_construct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">task0</span><span class="p">,</span><span class="w"> </span><span class="n">taskFunction</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">taskParams</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
</span><span class="linenos">44</span>
<span class="linenos">45</span><span class="w">    </span><span class="n">BIOS_start</span><span class="p">();</span><span class="w"></span>
<span class="linenos">46</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>The task creation is done in the main() function, before the TI-RTOS Kernel’s
scheduler is started by <code class="docutils literal notranslate"><span class="pre">BIOS_start()</span></code>. The task executes at its assigned
priority level after the scheduler is started.</p>
<p>TI recommends using an existing application task for application-specific
processing.</p>
<p>When adding an additional task to the application project,
its priority must be assigned within the TI-RTOS7 priority-level range,
configured via SysConfig inside <code class="docutils literal notranslate"><span class="pre">TI-RTOS</span></code> → <code class="docutils literal notranslate"><span class="pre">Core</span> <span class="pre">Kernel</span></code> →
<code class="docutils literal notranslate"><span class="pre">Task</span></code> → <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Task</span> <span class="pre">Priorities</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Reduce the number of Task priority levels to gain additional RAM savings
via SysConfig by modifying <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Task</span> <span class="pre">Priorities</span></code>.</p>
</div>
<p>Ensure the task has a minimum task stack size of 512 bytes of predefined
memory. At a minimum, each stack must be large enough to handle normal
subroutine calls and one task preemption context. A task preemption context is
the context that is saved when one task preempts another as a result of an
interrupt thread readying a higher priority task. Using the TI-RTOS profiling
tools of the IDE, the task can be analyzed to determine the peak task stack
usage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The term <em>created</em> describes the instantiation of a task. The actual
TI-RTOS method is to construct the task. See <a class="reference internal" href="create_vs_construct.html#create-vs-construct"><span class="std std-ref">Creating vs. Constructing</span></a> for
details on constructing TI-RTOS objects.</p>
</div>
</div>
<div class="section" id="a-task-function">
<h2>A Task Function<a class="headerlink" href="#a-task-function" title="Permalink to this headline">¶</a></h2>
<p>When a task is initialized, a function pointer to a task function is passed to
the <code class="docutils literal notranslate"><span class="pre">Task_construct</span></code> function. When the task first gets a chance to process,
this is the function which the TI-RTOS runs. <a class="reference internal" href="#creating-task-listing"><span class="std std-numref">Listing 13.</span></a>
shows the general topology of this Task function.</p>
<p>In typical use cases, the task spends most of its time in the blocked state,
where it calls a <code class="docutils literal notranslate"><span class="pre">_pend()</span></code> API such as <code class="docutils literal notranslate"><span class="pre">Semaphore_pend()</span></code>. Often, high
priority threads such as Hwis or Swis unblock the task with a <code class="docutils literal notranslate"><span class="pre">_post()</span></code> API
such as <code class="docutils literal notranslate"><span class="pre">Semaphore_post()</span></code>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="queues.html" class="btn btn-neutral float-left" title="Queues" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="clocks.html" class="btn btn-neutral float-right" title="Clocks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2023, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>