<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MAC and Frequency Hopping &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
TI Wi-SUN FAN 1.0 Stack User&#39;s Guide
 2.10.00.00 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="EAPOL Layer" href="networklayer.html" />
    <link rel="prev" title="Data Rate and PHY" href="PHY.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug wisun-stack MAC";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../wisun-guide/index.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
TI Wi-SUN FAN 1.0 Stack User's Guide

          </a>
              <div class="version">
                2.10.00.00
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/wisun-quick-start.html">Wi-SUN Stack Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/tirtos-index.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/freertos-index.html">FreeRTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../wisun-guide/wisun-index.html">TI Wi-SUN FAN Stack</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="wisun-stack-overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="wisun-stack-overview.html#what-is-a-fan">What is a FAN?</a></li>
<li class="toctree-l2"><a class="reference internal" href="wisun-stack-overview.html#architecture-choices">Architecture Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="PHY.html">Data Rate and PHY</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MAC and Frequency Hopping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#broadcast-channel-hopping-schedule">Broadcast Channel Hopping Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unicast-channel-hopping-schedule">Unicast Channel Hopping Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#join-process">Join Process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#joining-state-1-select-pan">Joining State 1: Select PAN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joining-state-2-authenticate">Joining State 2: Authenticate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joining-state-3-acquire-pan-config">Joining State 3: Acquire PAN Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joining-state-4-configure-routing">Joining State 4: Configure Routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joining-state-5-operational">Joining State 5: Operational</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="networklayer.html">EAPOL Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networklayer.html#lowpan-layer">6LoWPAN Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networklayer.html#ipv6-layer">IPv6 Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networklayer.html#routing-layer-rpl">Routing Layer (RPL)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/NWP_interface.html">TI Wi-SUN FAN NWP Interface Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/example-applications.html">Example Application Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/custom-hardware-cc13xx_cc26xx.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/wisun-oad-index.html">MCUBoot Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/sysconfig-index.html">System Configuration (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/migration-guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wisun-guide/references.html#terms-and-acronyms">Terms and Acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../wisun-guide/index.html">
SimpleLink™ CC13XX/CC26XX SDK
TI Wi-SUN FAN 1.0 Stack User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../wisun-guide/index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../wisun-guide/wisun-index.html">TI Wi-SUN FAN Stack</a> &raquo;</li>
      <li>MAC and Frequency Hopping</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="mac-and-frequency-hopping">
<h1>MAC and Frequency Hopping<a class="headerlink" href="#mac-and-frequency-hopping" title="Permalink to this headline">¶</a></h1>
<p>The Wi-SUN FAN Specification implements a frequency-hopping configuration where the network devices
hop on different frequencies. TI Wi-SUN FAN Stack supports an unslotted channel-hopping
feature based on the directed frame exchange (DFE) mode of the <a class="reference external" href="https://www.wi-sun.org">Wi-SUN
FAN specification</a> v1.0. (For users familiar with TI 15.4-Stack, the same FH
mode is implemented in this stack.)</p>
<p>Channel hopping is a feature by which a node shall hop or move to different
channels (frequency bands). The channel hopping behavior has two advantages:</p>
<ul class="simple">
<li><p>Increased network throughput by promoting simultaneous data transfer over
multiple channels between different pair of nodes</p></li>
<li><p>Increased reliability in noisy channel conditions by exploiting the channel
diversity.</p></li>
</ul>
<p>According to Wi-SUN FAN Specification, only non sleepy nodes are allowed. Each node shall maintain
its broadcast schedule as well as a unicast schedule.</p>
<ul class="simple">
<li><p>The broadcast mechanism is used to send data to multiple recipients.</p></li>
<li><p>The unicast mechanism is used to send data to one unique recipient.</p></li>
</ul>
<div class="section" id="broadcast-channel-hopping-schedule">
<h2>Broadcast Channel Hopping Schedule<a class="headerlink" href="#broadcast-channel-hopping-schedule" title="Permalink to this headline">¶</a></h2>
<p>The node will transmit its broadcast data during its broadcast schedule and its
neighbors who are already tracking this node are expected to listing in its
channel during the broadcast slot. The broadcast hopping pattern and some terms
are shown below.</p>
<div class="figure align-center" id="fig-broadcast-sequence">
<a class="reference internal image-reference" href="../_images/fig-broadcast-sequence.png"><img alt="../_images/fig-broadcast-sequence.png" src="../_images/fig-broadcast-sequence.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-number">Figure 22. </span><span class="caption-text">Broadcast Channel Hopping Sequence</span><a class="headerlink" href="#fig-broadcast-sequence" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="unicast-channel-hopping-schedule">
<h2>Unicast Channel Hopping Schedule<a class="headerlink" href="#unicast-channel-hopping-schedule" title="Permalink to this headline">¶</a></h2>
<p>During the broadcast interval, the nodes shall follow their own receiver-directed
unicast channel hopping schedules. It’s not necessary for the unicast channel
hop slots to be synchronized.</p>
<p>The unicast schedules are always receiver directed in the sense that a node
shall transmit the frame in the receiver’s channel using CSMA/CA. This is
illustrated in <a class="reference internal" href="#fig-unicast-sequence"><span class="std std-numref">Figure 23.</span></a>. As you can see, each node
maintains its own hopping pattern.</p>
<p>The Wi-SUN FAN Specification describes the mechanisms for how a device can synchronize itself to
the receiver node in order to successfully transmit a unicast packet to it. These
mechanisms rely on exchange of appropriate information called <a class="reference internal" href="../wisun-guide/references.html#term-Information-elements"><span class="xref std std-term">Information
elements</span></a> (IEs). IEs can be exchanged either during the joining of the network
or during the network operation time.</p>
<div class="figure align-center" id="id3">
<span id="fig-unicast-sequence"></span><img alt="../_images/fig-unicast-sequence.png" src="../_images/fig-unicast-sequence.png" />
<p class="caption"><span class="caption-number">Figure 23. </span><span class="caption-text">Unicast Hopping Sequence</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="join-process">
<span id="sec-wisun-node-join"></span><h2>Join Process<a class="headerlink" href="#join-process" title="Permalink to this headline">¶</a></h2>
<p>A brief walk-through of the joining process is given in <a class="reference internal" href="#fig-node-joining"><span class="std std-numref">Figure 24.</span></a>
More detail is given below.</p>
<div class="figure align-center" id="id4">
<span id="fig-node-joining"></span><p class="plantuml">
<img src="../_images/plantuml-4a278c2418e98cb0b82d267dfa16ceeea5e9992c.png" alt="  &#64;startuml
  participant Node as &quot;Joining device&quot;
  participant Network

  rnote over &quot;Node&quot;
     &lt;b&gt;Join state 1:
     &lt;b&gt;Select PAN
  end note

  Node-&gt;Network: PAN Advert Solicit(s)
  Node&lt;-Network: PAN Advert Solicit(s)
  Node&lt;-Network: PAN Advert

  rnote over &quot;Node&quot;
     EAPOL Target Select
  end note

  rnote over &quot;Node&quot;
     &lt;b&gt;Join state 2:
     &lt;b&gt;Authenticate
  end note

  Node&lt;-&gt;Network: Security Exchange

  rnote over &quot;Node&quot;
     GTKs Acquired
  end note

  rnote over &quot;Node&quot;
     &lt;b&gt;Join state 3:
     &lt;b&gt;Acquire PAN Config
  end note

  Node-&gt;Network: PAN Config Solicit(s)
  Node&lt;-Network: PAN Config Solicit(s)
  Node&lt;-Network: PAN Config(s)

  rnote over &quot;Node&quot;
     Decrypt PAN configuration
  end note

  rnote over &quot;Node&quot;
     &lt;b&gt;Join state 4:
     &lt;b&gt;Configure Routing
  end note

  Node&lt;-&gt;Network: DIO Exchange
  Node&lt;-&gt;Network: Neighbor Discovery
  Node&lt;-&gt;Network: DHCPv6 Solicit/Replay Exchange
  Node&lt;-&gt;Network: DAO/DAO ACK Exchange

  rnote over &quot;Node&quot;
     Routing Configured
  end note

  rnote over &quot;Node&quot;
     &lt;b&gt;Join state 5:
     &lt;b&gt;Operational
  end note
  &#64;enduml"/>
</p>
<p class="caption"><span class="caption-number">Figure 24. </span><span class="caption-text">Nodes Joining</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="joining-state-1-select-pan">
<h3>Joining State 1: Select PAN<a class="headerlink" href="#joining-state-1-select-pan" title="Permalink to this headline">¶</a></h3>
<p>The device sends PAN advertisements and receives PAN Advert Solicit packets. This
will give an image of what network(s) are in operation in the area. The device
then selects the PAN to join. PAN Advert and PAN Advert Solicit packets are sent
asynchronously.</p>
</div>
<div class="section" id="joining-state-2-authenticate">
<h3>Joining State 2: Authenticate<a class="headerlink" href="#joining-state-2-authenticate" title="Permalink to this headline">¶</a></h3>
<p>EAPOL layer authenticates the PAN. In case of <code class="docutils literal notranslate"><span class="pre">EAPOL</span> <span class="pre">fail</span></code>, go back to joining
state 1. The joining device performs a security exchange with a neighbor router
node (or BR) over unicast. After the authenticate state, the node will acquire
GTKs.</p>
</div>
<div class="section" id="joining-state-3-acquire-pan-config">
<h3>Joining State 3: Acquire PAN Config<a class="headerlink" href="#joining-state-3-acquire-pan-config" title="Permalink to this headline">¶</a></h3>
<p>The joining device and network sends out PAN Config Solicit packets. In reply
the joining device gets a PAN Config packet. PAN Config and PAN Config Solicit
packets are sent asynchronously. In case of PCS_Max, the PAN configuration
request will be unsuccessful and the joining device will start again from join
state 1.</p>
<p>When the PAN Config is received, it will be decrypted using GTKs.</p>
</div>
<div class="section" id="joining-state-4-configure-routing">
<h3>Joining State 4: Configure Routing<a class="headerlink" href="#joining-state-4-configure-routing" title="Permalink to this headline">¶</a></h3>
<p>In this state, the joining device will do the following:</p>
<ul class="simple">
<li><p>The joining device will form its link local IPv6 address.</p></li>
<li><p>The joining device will listen for RPL DIOs, and form its RPL candidate
parent set by applying the RSL threshold to the set of neighbors from which
it has received a RPL DIO.</p></li>
<li><p>The joining device will perform unicast Neighbor Discovery (Neighbor Solicit
using its link local IPv6 address) with all neighbors from which it has
received a RPL DIO (thereby collecting ETX and bi-directional RSL for the neighbor).</p></li>
<li><p>The joining device will determine its RPL parent/preferred upward route by submitting
the candidate parent set to the MRHOF objective function.</p></li>
<li><p>The joining device will perform DHCPv6 to acquire GUAs and/or ULAs.</p></li>
<li><p>The joining device will unicast a RPL DAO to the Border Router.</p></li>
</ul>
</div>
<div class="section" id="joining-state-5-operational">
<h3>Joining State 5: Operational<a class="headerlink" href="#joining-state-5-operational" title="Permalink to this headline">¶</a></h3>
<p>The joining device is now an operational router in the network. As such it can add new
devices to the network.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="PHY.html" class="btn btn-neutral float-left" title="Data Rate and PHY" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="networklayer.html" class="btn btn-neutral float-right" title="EAPOL Layer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>