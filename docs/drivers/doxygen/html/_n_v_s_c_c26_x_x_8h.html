<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>NVSCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_dd8fa7f0a423552d37651735ac37558f.html">ti</a></li><li class="navelem"><a class="el" href="dir_15fb9a92674a5e15cac1f3112cfb19ae.html">drivers</a></li><li class="navelem"><a class="el" href="dir_b5e354bd7b5f0f3da90966e8f2e19633.html">nvs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">NVSCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Non-Volatile Storage driver for CC13XX/CC26XX devices. </p>
<hr/>
<h2>Interrupt Latency During Flash Operations</h2>
<p>When writing or erasing flash, interrupts must be disabled to avoid executing code in flash while the flash is being reprogrammed. This constraint is handled by the driver. Application code does not need to safeguard against this.</p>
<p>Additionally, to avoid extremely large interrupt latencies that would be incurred if entire blocks were written with interrupts disabled, block writes to flash are broken into multiple smaller sizes.</p>
<p>Even with this scheme in place, latencies of roughly 64 microseconds will be incurred while flash is being written to.</p>
<p>A similar caveat applies to flash erase operations. Erasing an entire flash sector (the minimal amount that can be erased at a time) can take roughly 8 milliseconds. This entire operation must be performed with interrupts disabled. Here again, this requirement is met internally by the driver and flash region erases are performed one sector at a time to minimize this significant latency impact.</p>
<p>Care must be taken by the user to not perform flash write or erase operations during latency critical phases of an application. See the <a class="el" href="_n_v_s_8h.html#a62d1593df9acb6d3c6446f1719f3bf28" title="Function to lock the NVS driver. ">NVS_lock()</a> and <a class="el" href="_n_v_s_8h.html#a01fb843c26ca406c5c9463eae6b0b817" title="Function to unlock the NVS driver. ">NVS_unlock()</a> API descriptions for more information.</p>
<h2>Maximum flash writes before erase</h2>
<p>On CC13XX &amp; CC26XX memory rows can be 128 or 256 bytes in length; refer to the device datasheet for the exact size. A maximum of 83 write operations can be performed on a memory row. Once the limit is reached, the row must be erased before it is written to again. It is the developer's responsibility to ensure that this limit is not exceeded in their applications. The developer may also opt to use the third party SPIFFS library implementation supported by TIRTOS which does track writes.</p>
<dl class="section note"><dt>Note</dt><dd>The 83 write limit persists through device reset &amp; power cycles. If 60 write operations were performed on a memory row &amp; the device is reset; the page can still only be written to 23 more times before it must be erased.</dd></dl>
<p>A write "Scoreboard" can be enabled in this driver; the scoreboard keeps track of how many times a page has been written to. It is provided as a debug tool to ensure the 83 write limit is not exceeded. If a page is written to more than 83 times, the NVSCC26XX driver will spin forever. Each byte in the scoreboard corresponds to a memory page in the NVS region. The byte is incremented when the memory is written to &amp; set to 0 when erased.</p>
<p>To enable the "scoreboard" the "NVSCC26XX_INSTRUMENTED" symbol must be defined when the driver is compiled. Three new fields are added to the <a class="el" href="struct_n_v_s_c_c26_x_x___h_w_attrs.html" title="NVSCC26XX hardware attributes. ">NVSCC26XX_HWAttrs</a> structure:</p><ul>
<li>scoreboard - a buffer provided by the application where each byte represents how many times a page has been written to.</li>
<li>scoreboardSize - number of bytes in the scoreboard.</li>
<li>flashPageSize - number of bytes in a flash page (i.e. 128 or 256)</li>
</ul>
<p>When configured correctly, the scoreboard can be viewed in a memory browser.</p>
<dl class="section note"><dt>Note</dt><dd>The scoreboard will only keep track of writes to flash within a NVS region using a NVS driver. Writes performed outside the NVS region or without the NVS driver are untracked.</dd>
<dd>
The scoreboard is in RAM &amp; will be lost on reset or power cycle.</dd></dl>
<hr/>
</div><div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for NVSCC26XX.h:</div>
<div class="dyncontent">
<div class="center"><img src="_n_v_s_c_c26_x_x_8h__incl.png" border="0" usemap="#_n_v_s_c_c26_x_x_8h" alt=""/></div>
<map name="_n_v_s_c_c26_x_x_8h" id="_n_v_s_c_c26_x_x_8h">
</map>
</div>
</div>
<p><a href="_n_v_s_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n_v_s_c_c26_x_x___h_w_attrs.html">NVSCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NVSCC26XX hardware attributes.  <a href="struct_n_v_s_c_c26_x_x___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n_v_s_c_c26_x_x___object.html">NVSCC26XX_Object</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa21de44fea696d5e49503a7e0d9a00b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_v_s_c_c26_x_x_8h.html#aa21de44fea696d5e49503a7e0d9a00b7">NVSCC26XX_STATUS_LOW_VOLTAGE</a>&#160;&#160;&#160;(<a class="el" href="group___n_v_s___c_o_n_t_r_o_l.html#gad82fd139152ca14946c80c6c91edb4a0">NVS_STATUS_RESERVED</a> - 1)</td></tr>
<tr class="memdesc:aa21de44fea696d5e49503a7e0d9a00b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error status code returned by <a class="el" href="_n_v_s_8h.html#a4f309d160ac4641c89501adc95d170b3" title="Erase size bytes of the region beginning at offset bytes from the base of the region referenced by th...">NVS_erase()</a>, <a class="el" href="_n_v_s_8h.html#aae7abe0cb889a6d0cc1858bfc69ab7e0" title="Write data to the NVS region associated with the NVS_Handle. ">NVS_write()</a>.  <a href="#aa21de44fea696d5e49503a7e0d9a00b7">More...</a><br /></td></tr>
<tr class="separator:aa21de44fea696d5e49503a7e0d9a00b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ade3114c185df6a15ec62305dd5c6f6cc"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_n_v_s___fxn_table.html">NVS_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n_v_s_c_c26_x_x_8h.html#ade3114c185df6a15ec62305dd5c6f6cc">NVSCC26XX_fxnTable</a></td></tr>
<tr class="separator:ade3114c185df6a15ec62305dd5c6f6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa21de44fea696d5e49503a7e0d9a00b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21de44fea696d5e49503a7e0d9a00b7">&sect;&nbsp;</a></span>NVSCC26XX_STATUS_LOW_VOLTAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVSCC26XX_STATUS_LOW_VOLTAGE&#160;&#160;&#160;(<a class="el" href="group___n_v_s___c_o_n_t_r_o_l.html#gad82fd139152ca14946c80c6c91edb4a0">NVS_STATUS_RESERVED</a> - 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error status code returned by <a class="el" href="_n_v_s_8h.html#a4f309d160ac4641c89501adc95d170b3" title="Erase size bytes of the region beginning at offset bytes from the base of the region referenced by th...">NVS_erase()</a>, <a class="el" href="_n_v_s_8h.html#aae7abe0cb889a6d0cc1858bfc69ab7e0" title="Write data to the NVS region associated with the NVS_Handle. ">NVS_write()</a>. </p>
<p>This error status is returned if the system voltage is too low to safely perform the flash operation. Voltage must be 1.5V or greater. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ade3114c185df6a15ec62305dd5c6f6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade3114c185df6a15ec62305dd5c6f6cc">&sect;&nbsp;</a></span>NVSCC26XX_fxnTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_n_v_s___fxn_table.html">NVS_FxnTable</a> NVSCC26XX_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">© Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
