<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>TRNGCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_dd8fa7f0a423552d37651735ac37558f.html">ti</a></li><li class="navelem"><a class="el" href="dir_15fb9a92674a5e15cac1f3112cfb19ae.html">drivers</a></li><li class="navelem"><a class="el" href="dir_97f54e7b4efed9cf1559837825c68bd4.html">trng</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TRNGCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TRNG driver implementation for the CC26XX family. </p>
<hr/>
<p>This file should only be included in the board file to fill the TRNG_config struct.</p>
<h1>Hardware</h1>
<p>The CC26XX family has a dedicated hardware TRNG based on sampling multiple free running oscillators. With all FROs enabled, the TRNG hardware generates 64 bits of entropy approximately every 5ms. The driver implementation chains multiple 64-bit entropy generation operations together to generate an arbitrary amount of entropy.</p>
<h1>Behaviour</h1>
<p>The driver keeps a global pool of entropy available to service any requests immediately. If the pool is not sufficiently large or is too depleted to service a request, entropy will be generated until the request is serviced. If there is an ongoing TRNG request that the hardware is generating entropy for, the driver will queue any other requests and work them off in FIFO order.</p>
<p>Requests issued by driver instances with polling return behaviour will preempt any executing requests and be serviced immediately.</p>
<p>After the request queue is emptied, the driver will start an asynchronous operation in the background to refill the depleted entropy pool.</p>
<h1>Samples Per Cycle</h1>
<p>The EIP-75t HW takes 240,000 clock cycles in the default setting to generate one round of output (i.e. 64 bits). This comes to 5ms on a 48MHz clock. The clock cycles per round can be configured to be as low as 2^8 (256) to as high as 2^24 (16,777,216). Entropy re-generation time can be tailored in a trade-off between speed of random number generation and amount of entropy in each of those random numbers. </p>
</div><div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_8h_source.html">ti/drivers/Power.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_t_r_n_g_8h_source.html">ti/drivers/TRNG.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_crypto_key_8h_source.html">ti/drivers/cryptoutils/cryptokey/CryptoKey.h</a>&gt;</code><br />
<code>#include &lt;ti/drivers/dpl/HwiP.h&gt;</code><br />
<code>#include &lt;ti/drivers/dpl/SemaphoreP.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for TRNGCC26XX.h:</div>
<div class="dyncontent">
<div class="center"><img src="_t_r_n_g_c_c26_x_x_8h__incl.png" border="0" usemap="#_t_r_n_g_c_c26_x_x_8h" alt=""/></div>
<map name="_t_r_n_g_c_c26_x_x_8h" id="_t_r_n_g_c_c26_x_x_8h">
<area shape="rect" id="node4" href="_power_8h.html" title="Power Manager. " alt="" coords="39,80,173,107"/>
<area shape="rect" id="node7" href="_t_r_n_g_8h.html" title="TRNG driver header. " alt="" coords="253,80,386,107"/>
<area shape="rect" id="node8" href="_crypto_key_8h.html" title="The CryptoKey type is an opaque representation of a cryptographic key. " alt="" coords="354,155,525,196"/>
<area shape="rect" id="node5" href="_list_8h.html" title="Linked List interface for use in drivers. " alt="" coords="27,162,177,189"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_t_r_n_g_c_c26_x_x_8h__dep__incl.png" border="0" usemap="#_t_r_n_g_c_c26_x_x_8hdep" alt=""/></div>
<map name="_t_r_n_g_c_c26_x_x_8hdep" id="_t_r_n_g_c_c26_x_x_8hdep">
<area shape="rect" id="node2" href="_e_c_d_s_a_c_c26_x1_8h.html" title="ECDSA driver implementation for the CC26X1 family. " alt="" coords="5,80,136,107"/>
<area shape="rect" id="node3" href="_e_c_d_s_a_c_c26_x2_8h.html" title="ECDSA driver implementation for the CC26X2 family. " alt="" coords="160,80,291,107"/>
<area shape="rect" id="node4" href="_r_n_g_c_c26_x_x_8h.html" title="RNG driver implementation for the CC26XX family. " alt="" coords="315,80,429,107"/>
</map>
</div>
</div>
<p><a href="_t_r_n_g_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_r_n_g_c_c26_x_x___h_w_attrs.html">TRNGCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">TRNGCC26XX Hardware Attributes.  <a href="struct_t_r_n_g_c_c26_x_x___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a87d56eccbfb7c1c49a47030dec766164"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#a87d56eccbfb7c1c49a47030dec766164">TRNGCC26XX_SAMPLES_PER_CYCLE_MIN</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a87d56eccbfb7c1c49a47030dec766164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum random samples for each entropy generation call.  <a href="#a87d56eccbfb7c1c49a47030dec766164">More...</a><br /></td></tr>
<tr class="separator:a87d56eccbfb7c1c49a47030dec766164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc6bf67d2a3df12949dfdf94ebac3fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#a5bc6bf67d2a3df12949dfdf94ebac3fc">TRNGCC26XX_SAMPLES_PER_CYCLE_DEFAULT</a>&#160;&#160;&#160;240000</td></tr>
<tr class="memdesc:a5bc6bf67d2a3df12949dfdf94ebac3fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default random samples for each entropy generation call.  <a href="#a5bc6bf67d2a3df12949dfdf94ebac3fc">More...</a><br /></td></tr>
<tr class="separator:a5bc6bf67d2a3df12949dfdf94ebac3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3e322edac954acb97d1ed7bb8449f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#a4b3e322edac954acb97d1ed7bb8449f7">TRNGCC26XX_SAMPLES_PER_CYCLE_MAX</a>&#160;&#160;&#160;16777216</td></tr>
<tr class="memdesc:a4b3e322edac954acb97d1ed7bb8449f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum random samples for each entropy generation call.  <a href="#a4b3e322edac954acb97d1ed7bb8449f7">More...</a><br /></td></tr>
<tr class="separator:a4b3e322edac954acb97d1ed7bb8449f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b1661634b07febb09d165c53b93bc02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#a5b1661634b07febb09d165c53b93bc02">TRNGCC26XX_MIN_BYTES_PER_ITERATION</a>&#160;&#160;&#160;(2 * sizeof(uint32_t))</td></tr>
<tr class="memdesc:a5b1661634b07febb09d165c53b93bc02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum number of bytes provided by the TRNG hardware in one go.  <a href="#a5b1661634b07febb09d165c53b93bc02">More...</a><br /></td></tr>
<tr class="separator:a5b1661634b07febb09d165c53b93bc02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ec46a45afa1718279bf08dfb0645f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#ab3ec46a45afa1718279bf08dfb0645f8">TRNGCC26XX_ENTROPY_POOL_SIZE</a>&#160;&#160;&#160;(32 / sizeof(uint64_t))</td></tr>
<tr class="memdesc:ab3ec46a45afa1718279bf08dfb0645f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default TRNGCC26XX entropy pool size in 64-bit elements.  <a href="#ab3ec46a45afa1718279bf08dfb0645f8">More...</a><br /></td></tr>
<tr class="separator:ab3ec46a45afa1718279bf08dfb0645f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a18699f957e3c06f2a16b23ae9ca9c8f3"><td class="memItemLeft" align="right" valign="top">int_fast16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_r_n_g_c_c26_x_x_8h.html#a18699f957e3c06f2a16b23ae9ca9c8f3">TRNGCC26XX_setSamplesPerCycle</a> (<a class="el" href="_t_r_n_g_8h.html#a4adf751507cdd181131bd0ed63d38f64">TRNG_Handle</a> handle, uint32_t samplesPerCycle)</td></tr>
<tr class="memdesc:a18699f957e3c06f2a16b23ae9ca9c8f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the number of entropy generation cycles before the results are returned.  <a href="#a18699f957e3c06f2a16b23ae9ca9c8f3">More...</a><br /></td></tr>
<tr class="separator:a18699f957e3c06f2a16b23ae9ca9c8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a87d56eccbfb7c1c49a47030dec766164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87d56eccbfb7c1c49a47030dec766164">&sect;&nbsp;</a></span>TRNGCC26XX_SAMPLES_PER_CYCLE_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRNGCC26XX_SAMPLES_PER_CYCLE_MIN&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum random samples for each entropy generation call. </p>

</div>
</div>
<a id="a5bc6bf67d2a3df12949dfdf94ebac3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc6bf67d2a3df12949dfdf94ebac3fc">&sect;&nbsp;</a></span>TRNGCC26XX_SAMPLES_PER_CYCLE_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRNGCC26XX_SAMPLES_PER_CYCLE_DEFAULT&#160;&#160;&#160;240000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default random samples for each entropy generation call. </p>
<p>Set to generate 64 bits of randomness in 5ms with all FROs active. </p>

</div>
</div>
<a id="a4b3e322edac954acb97d1ed7bb8449f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3e322edac954acb97d1ed7bb8449f7">&sect;&nbsp;</a></span>TRNGCC26XX_SAMPLES_PER_CYCLE_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRNGCC26XX_SAMPLES_PER_CYCLE_MAX&#160;&#160;&#160;16777216</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum random samples for each entropy generation call. </p>

</div>
</div>
<a id="a5b1661634b07febb09d165c53b93bc02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b1661634b07febb09d165c53b93bc02">&sect;&nbsp;</a></span>TRNGCC26XX_MIN_BYTES_PER_ITERATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRNGCC26XX_MIN_BYTES_PER_ITERATION&#160;&#160;&#160;(2 * sizeof(uint32_t))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum number of bytes provided by the TRNG hardware in one go. </p>
<p>Smaller amounts can by requested in driver calls but the full number will always be generated. Part of the generated entropy will simply not be copied back to the target buffer if the requested length is not a multiple of TRNGCC26XX_MIN_BYTES_PER_ITERATION. </p>

</div>
</div>
<a id="ab3ec46a45afa1718279bf08dfb0645f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ec46a45afa1718279bf08dfb0645f8">&sect;&nbsp;</a></span>TRNGCC26XX_ENTROPY_POOL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRNGCC26XX_ENTROPY_POOL_SIZE&#160;&#160;&#160;(32 / sizeof(uint64_t))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default TRNGCC26XX entropy pool size in 64-bit elements. </p>
<p>By default, the entropy pool is sized to immediately fulfill a 256-bit entropy generation request. If we assume that the TRNG is used infrequently, this should greatly decrease the latency of &lt;= 256-bit requests. This value may be overridden by defining it at the project level and recompiling the driver. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a18699f957e3c06f2a16b23ae9ca9c8f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18699f957e3c06f2a16b23ae9ca9c8f3">&sect;&nbsp;</a></span>TRNGCC26XX_setSamplesPerCycle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int_fast16_t TRNGCC26XX_setSamplesPerCycle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_r_n_g_8h.html#a4adf751507cdd181131bd0ed63d38f64">TRNG_Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>samplesPerCycle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the number of entropy generation cycles before the results are returned. </p>
<p>The default value is set to generate 64 bits of entropy.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="_t_r_n_g_8h.html#a77b3120825e3d0514fc213ff626be0ed" title="This function opens a given TRNG peripheral. ">TRNG_open()</a> has to be called first successfully</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>A TRNGCC26XX handle returned from TRNGCC26XX_open </td></tr>
    <tr><td class="paramname">samplesPerCycle</td><td>Number of 48MHz clock cycles to sample. Must be between 2^8 and 2^24.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_t_r_n_g_8h.html#a77b3120825e3d0514fc213ff626be0ed" title="This function opens a given TRNG peripheral. ">TRNG_open()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">© Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
