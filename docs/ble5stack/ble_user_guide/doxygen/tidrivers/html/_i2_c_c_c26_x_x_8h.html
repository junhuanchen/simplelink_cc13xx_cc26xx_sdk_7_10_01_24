<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Documentation: I2CCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Documentation
   &#160;<span id="projectnumber">2.02.08.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7cbdeeebfd6c35dfb9f916d627233e4c.html">.build.ble5.cc13xx_cc26xx</a></li><li class="navelem"><a class="el" href="dir_b2f8c81104a2ac3484e8fd4e13690447.html">api-sources</a></li><li class="navelem"><a class="el" href="dir_f3b85fdd586b4d5305da1fbc937bb135.html">tidrivers</a></li><li class="navelem"><a class="el" href="dir_441a49e194f6815a0bbfd80143881040.html">source</a></li><li class="navelem"><a class="el" href="dir_fa51baead25b91abbb34fe63ff5bf27a.html">ti</a></li><li class="navelem"><a class="el" href="dir_a11f29ccc0b8753095dc31bd7d48d03d.html">drivers</a></li><li class="navelem"><a class="el" href="dir_88d7cde9c877dc75af470cceb93c16f6.html">i2c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">I2CCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>I2C driver implementation for a CC26XX I2C controller.  
<a href="#details">More...</a></p>

<p><a href="_i2_c_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs_v1.html">I2CCC26XX_HWAttrsV1</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Hardware attributes.  <a href="struct_i2_c_c_c26_x_x___h_w_attrs_v1.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Pin Configuration.  <a href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___object.html">I2CCC26XX_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Object.  <a href="struct_i2_c_c_c26_x_x___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C driver implementation for a CC26XX I2C controller. </p>
<hr/>
<h1>Driver Include</h1>
<p>The I2C header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_i2_c_8h.html">ti/drivers/I2C.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_i2_c_c_c26_x_x_8h.html">ti/drivers/i2c/I2CCC26XX.h</a>&gt;</span></div></div><!-- fragment --><p>Refer to <a class="el" href="_i2_c_8h.html">I2C.h</a> for a complete description of APIs.</p>
<h1>Overview</h1>
<p>The general I2C API is normally used in application code, e.g. <a class="el" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> is used instead of I2CCC26XX_open(). The board file will define the device specific config, and casting in the general API will ensure that the correct device specific functions are called. This is also reflected in the example code in <a class="el" href="_i2_c_c_c26_x_x_8h.html#I2C_USE_CASES">Use Cases</a>.</p>
<h2>General Behavior</h2>
<p>Before using the I2C in CC26XX:</p><ul>
<li>The I2C driver is initialized by calling <a class="el" href="_i2_c_8h.html#a9ff51ddf1d325776fef90cce0223772b" title="Function to initialize the I2C driver. ">I2C_init()</a>.</li>
<li>The I2C HW is configured and system dependencies are declared (e.g. IOs, power, etc.) by calling <a class="el" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a>.</li>
</ul>
<p>The following is true for receive operation:</p><ul>
<li>RX is enabled by calling <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a>. The readCount of the <a class="el" href="struct_i2_c___transaction.html" title="Defines a transaction to be used with I2C_transfer() or I2C_transferTimeout() ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>The following apply for transmit operation:</p><ul>
<li>TX is enabled by calling <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a>. The writeCount of the <a class="el" href="struct_i2_c___transaction.html" title="Defines a transaction to be used with I2C_transfer() or I2C_transferTimeout() ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>After I2C operation has ended:</p><ul>
<li>Release system dependencies for I2C by calling <a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a>.</li>
</ul>
<h3>Known Issue</h3>
<dl class="section warning"><dt>Warning</dt><dd>The I2C will transmit a single data byte in the event that the I2C slave address is not acknowledged (NACK'd). This is due to a known hardware bug.</dd></dl>
<h2>Error handling</h2>
<p>If an error occurs during operation:</p><ul>
<li>The I2C Master transmits a stop bit and remains enabled.</li>
</ul>
<h2>Power Management</h2>
<p>The I2CCC26XX driver sets a power constraint during transactions to keep the device out of standby; so when all tasks are blocked, the device will enter idle mode instead of standby. When the transactions have finished, the power constraint to prohibit standby is released. The following statements are valid:</p><ul>
<li>After <a class="el" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> call: I2C is enabled, there are no active I2C transactions, the device can enter standby.</li>
<li>After <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> call: active I2C transactions exist, the device might enter idle, but not standby.</li>
<li>When <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> completes, either after success or error, I2C remains enabled, and the device can enter standby.</li>
<li>After <a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a> call: I2C is disabled</li>
<li>If the device goes into idle during a transaction, the state of SDA is undefined in the time between the transaction completing and the device waking up. SCL will go low until the device wakes up and starts another transaction or releases the bus. If this is a problem for another device on the I2C bus, you can set a power constraint for <a class="el" href="_power_c_c26_x_x_8h.html#ab80d8e6de86d3acfa903ceab156da031">PowerCC26XX_DISALLOW_IDLE</a> before the transaction and release it when the transaction completes.</li>
</ul>
<h2>Supported Functions</h2>
<table class="doxtable">
<tr>
<th>Generic API Function </th><th>API Function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#a9ff51ddf1d325776fef90cce0223772b" title="Function to initialize the I2C driver. ">I2C_init()</a> </td><td>I2CCC26XX_init() </td><td>Initialize I2C driver </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6" title="Open an I2C driver instance. ">I2C_open()</a> </td><td>I2CCC26XX_open() </td><td>Initialize I2C HW and set system dependencies </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to close an I2C driver instance. ">I2C_close()</a> </td><td>I2CCC26XX_close() </td><td>Disable I2C HW and release system dependencies </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Perform an I2C transaction with an I2C slave peripheral. ">I2C_transfer()</a> </td><td>I2CCC26XX_transfer() </td><td>Start I2C transfer </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>All calls should go through the generic API.</dd></dl>
<h2>Supported Bit Rates</h2>
<ul>
<li><a class="el" href="_i2_c_8h.html#ac954e3197f04c50293db466c4abb6fbea966fd2df13b3a9825615c50335cf1987">I2C_100kHz</a></li>
<li><a class="el" href="_i2_c_8h.html#ac954e3197f04c50293db466c4abb6fbea83cc3750242e6ae9194cd7ed94f764d9">I2C_400kHz</a></li>
</ul>
<h2>Unsupported Functionality</h2>
<p>The CC26XX I2C driver currently does not support:</p><ul>
<li>Multi-master mode</li>
<li>I2C slave mode</li>
</ul>
<h2>Use Cases<a class="anchor" id="I2C_USE_CASES"></a></h2>
<h3>Basic Receive</h3>
<p>Receive 10 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26abe065350be2a0ae5c9beb24624626c75">I2C_MODE_BLOCKING</a>. </p><div class="fragment"><div class="line"><span class="comment">// Locals</span></div><div class="line"><a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line"><a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line"><a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line">uint8_t rxBuf[32];      <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuf[32];      <span class="comment">// Transmit buffer</span></div><div class="line"></div><div class="line"><span class="comment">// Configure I2C parameters.</span></div><div class="line"><a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line"></div><div class="line"><span class="comment">// Initialize master I2C transaction structure</span></div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 0;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>     = txBuf;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 10;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>      = rxBuf;</div><div class="line">i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2e5c027c6f243f7169305f86bb2ab6e0">slaveAddress</a> = 0x3C;</div><div class="line"></div><div class="line"><span class="comment">// Open I2C</span></div><div class="line">handle = <a class="code" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line"><span class="comment">// Do I2C transfer receive</span></div><div class="line"><a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div></div><!-- fragment --><h3>Basic Transmit</h3>
<p>Transmit 16 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p><div class="fragment"><div class="line">uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div><div class="line"><span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> transferCallback(<a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div><div class="line">{</div><div class="line">    <span class="comment">// Set length bytes</span></div><div class="line">    <span class="keywordflow">if</span> (result) {</div><div class="line">        transferDone = <span class="keyword">true</span>;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// Transaction failed, act accordingly...</span></div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(uintptr_t a0, uintptr_t a1)</div><div class="line">{</div><div class="line">    <span class="comment">// Locals</span></div><div class="line">    <a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line">    <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line"></div><div class="line">    <span class="comment">// Configure I2C parameters.</span></div><div class="line">    <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = transferCallback;</div><div class="line"></div><div class="line">    <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div><div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div><div class="line">        txBuffer[i] = (uint8_t) i;</div><div class="line"></div><div class="line">    <span class="comment">// Initialize master I2C transaction structure</span></div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 16;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>     = txBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>      = rxBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2e5c027c6f243f7169305f86bb2ab6e0">slaveAddress</a> = 0x3C;</div><div class="line"></div><div class="line">    <span class="comment">// Open I2C</span></div><div class="line">    handle = <a class="code" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line">    <span class="comment">// Do I2C transfer (in callback mode)</span></div><div class="line">    <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div><div class="line"></div><div class="line">    <span class="comment">// Do other stuff while I2C is handling the transfer</span></div><div class="line">    .</div><div class="line">    .</div><div class="line"></div><div class="line">    <span class="comment">// Do something if I2C transfer is finished</span></div><div class="line">    <span class="keywordflow">if</span>(transferDone) {</div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Continue...</span></div><div class="line">    .</div><div class="line">    .</div><div class="line">}</div></div><!-- fragment --><h3>Chained Transactions</h3>
<p>Transmit 10 bytes and then 32 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p><div class="fragment"><div class="line">uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div><div class="line">uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div><div class="line">uint8_t rxBuffer2[64];           <span class="comment">// Receive buffer 2</span></div><div class="line">uint8_t txBuffer2[64];           <span class="comment">// Transmit buffer 2</span></div><div class="line"><span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> writeCallbackDefault(<a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div><div class="line">{</div><div class="line">    <span class="comment">// Set length bytes</span></div><div class="line">    <span class="keywordflow">if</span> (result) {</div><div class="line">        transferDone = <span class="keyword">true</span>;</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">// Transaction failed, act accordingly...</span></div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(uintptr_t a0, uintptr_t a1)</div><div class="line">{</div><div class="line">    <span class="comment">// Locals</span></div><div class="line">    <a class="code" href="struct_i2_c___config__.html">I2C_Handle</a> handle;</div><div class="line">    <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div><div class="line">    <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans2;</div><div class="line"></div><div class="line">    <span class="comment">// Configure I2C parameters.</span></div><div class="line">    <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div><div class="line">    params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = writeCallbackDefault;</div><div class="line"></div><div class="line">    <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div><div class="line">    <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div><div class="line">        txBuffer[i] = (uint8_t) i;</div><div class="line"></div><div class="line">    <span class="comment">// Initialize first master I2C transaction structure</span></div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 10;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>     = txBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>      = rxBuffer;</div><div class="line">    i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2e5c027c6f243f7169305f86bb2ab6e0">slaveAddress</a> = 0x3C;</div><div class="line"></div><div class="line">    <span class="comment">// Second transaction</span></div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 32;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#aa3490c2af4b443a7a4ec13f57aec6d20">writeBuf</a>     = txBuffer2;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a804b918d5cb08bb75a39866d0b89e01e">readBuf</a>      = rxBuffer2;</div><div class="line">    i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a2e5c027c6f243f7169305f86bb2ab6e0">slaveAddress</a> = 0x2E;</div><div class="line"></div><div class="line">    <span class="comment">// Open I2C</span></div><div class="line">    handle = <a class="code" href="_i2_c_8h.html#a2db3461e1e956d9b86af414da2fb05f6">I2C_open</a>(CONFIG_I2C, &amp;params);</div><div class="line"></div><div class="line">    <span class="comment">// Do chained I2C transfers (in callback mode).</span></div><div class="line">    <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div><div class="line">    <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans2);</div><div class="line"></div><div class="line">    <span class="comment">// Do other stuff while I2C is handling the transfers</span></div><div class="line">    .</div><div class="line">    .</div><div class="line"></div><div class="line">    <span class="comment">// Do something if I2C transfers are finished</span></div><div class="line">    <span class="keywordflow">if</span>(transferDone) {</div><div class="line">        .</div><div class="line">        .</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Continue...</span></div><div class="line">    .</div><div class="line">    .</div><div class="line">}</div></div><!-- fragment --><h1>Instrumentation</h1>
<p>The I2C driver interface produces log statements if instrumentation is enabled.</p>
<table class="doxtable">
<tr>
<th>Diagnostics Mask </th><th>Log details  </th></tr>
<tr>
<td>Diags_USER1 </td><td>basic I2C operations performed </td></tr>
<tr>
<td>Diags_USER2 </td><td>detailed I2C operations performed </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 21 2023 18:46:20 for API Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
