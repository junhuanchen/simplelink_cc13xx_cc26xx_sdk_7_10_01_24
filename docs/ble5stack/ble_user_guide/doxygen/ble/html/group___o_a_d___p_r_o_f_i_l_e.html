<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>TI BLE5-Stack API Documentation: OAD BLE Profile</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="https://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI BLE5-Stack API Documentation
   &#160;<span id="projectnumber">2.02.08.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">OAD BLE Profile</div>  </div>
</div><!--header-->
<div class="contents">

<p>BLE Profile implementation of the TI over the air download solution. This file is responsible for processing data from the BLE-Stack, passing this data to the application, and processing queued OAD events as well as the OAD state machine.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___o_a_d___e_v_t_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___e_v_t_s.html">OAD Events</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___o_a_d___e_x_t___c_t_r_l___o_p_c_o_d_e_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___e_x_t___c_t_r_l___o_p_c_o_d_e_s.html">OAD Extended Control Command op codes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___o_a_d___s_v_c___i_n_d_e_x_e_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___s_v_c___i_n_d_e_x_e_s.html">OAD Service Indexes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___o_a_d___s_v_c___u_u_i_d_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___s_v_c___u_u_i_d_s.html">OAD Service UUIDs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___o_a_d___s_t_a_t_u_s___c_o_d_e_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html">OAD return status codes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:oad_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oad_8h.html">oad.h</a></td></tr>
<tr class="memdesc:oad_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains OAD Profile header file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structblock_req_pld__t.html">blockReqPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structblock_size_rsp_pld__t.html">blockSizeRspPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdevice_type_rsp_pld__t.html">deviceTypeRspPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structext_img_enable_req__t.html">extImgEnableReq_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgeneric_ext_ctrl_rsp__t.html">genericExtCtrlRsp_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimage_info__t.html">imageInfo_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimage_info_rsp_pld__t.html">imageInfoRspPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimg_identify_pld__t.html">imgIdentifyPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structoad_target_c_bs__t.html">oadTargetCBs_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprofile_ver_rsp__t.html">profileVerRsp_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw_version_pld__t.html">swVersionPld_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga277d13f4e5d87e0bc37e95afc50e19da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga277d13f4e5d87e0bc37e95afc50e19da">EXT_CTRL_OP_CODE</a>(pData)&#160;&#160;&#160;(pData[0])</td></tr>
<tr class="separator:ga277d13f4e5d87e0bc37e95afc50e19da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b21227a27d1f619fb8c0df673e9ad35"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga5b21227a27d1f619fb8c0df673e9ad35">OAD_ATT_OVERHEAD</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ga5b21227a27d1f619fb8c0df673e9ad35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae480be4051078cfd255c63898979e53d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gae480be4051078cfd255c63898979e53d">OAD_BLK_NUM_HDR_SZ</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:gae480be4051078cfd255c63898979e53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga228354ce88f04c0fdb25f66f14f99d2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga228354ce88f04c0fdb25f66f14f99d2d">OAD_CCCD_CNT</a>&#160;&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaa9c4528fb7d7dcc91b3d51ce0477876d">OAD_CHAR_CNT</a></td></tr>
<tr class="separator:ga228354ce88f04c0fdb25f66f14f99d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9c4528fb7d7dcc91b3d51ce0477876d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaa9c4528fb7d7dcc91b3d51ce0477876d">OAD_CHAR_CNT</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:gaa9c4528fb7d7dcc91b3d51ce0477876d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04aca5818ba2f122fe6c9161a0ab555e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga04aca5818ba2f122fe6c9161a0ab555e">OAD_DEFAULT_BLOCK_SIZE</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:ga04aca5818ba2f122fe6c9161a0ab555e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11f88a9dc918a4345f48771d6642b09e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga11f88a9dc918a4345f48771d6642b09e">OAD_DEFAULT_INACTIVITY_TIME</a>&#160;&#160;&#160;10000</td></tr>
<tr class="separator:ga11f88a9dc918a4345f48771d6642b09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b5c446f7eb43814e68b8a05d8d3ef04"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga4b5c446f7eb43814e68b8a05d8d3ef04">OAD_EFL_MAX_META</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:ga4b5c446f7eb43814e68b8a05d8d3ef04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5e2740ce38241476a129644fb37cd08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaf5e2740ce38241476a129644fb37cd08">OAD_EXT_CTRL_CMD_NOT_SUPPORTED</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:gaf5e2740ce38241476a129644fb37cd08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf12817150b842abffa2115911ff8a0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaaf12817150b842abffa2115911ff8a0a">OAD_IMAGE_ID_RSP_LEN</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:gaaf12817150b842abffa2115911ff8a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8211e712e3299a74aa0d661600eeb5b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga8211e712e3299a74aa0d661600eeb5b7">OAD_IMG_ID_RETRIES</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ga8211e712e3299a74aa0d661600eeb5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf07ca8238231cc455648c061db748358"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaf07ca8238231cc455648c061db748358">OAD_IMG_INFO_ONCHIP</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:gaf07ca8238231cc455648c061db748358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20e8f113dcbaba0b85bc5e03bff5ae6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga20e8f113dcbaba0b85bc5e03bff5ae6e">OAD_IMG_PG_INVALID</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="memdesc:ga20e8f113dcbaba0b85bc5e03bff5ae6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">OAD Security Types.  <a href="#ga20e8f113dcbaba0b85bc5e03bff5ae6e">More...</a><br /></td></tr>
<tr class="separator:ga20e8f113dcbaba0b85bc5e03bff5ae6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33ff903e08b31dfa0c4da907d25db421"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga33ff903e08b31dfa0c4da907d25db421">OAD_MAX_BLOCK_SIZE</a>&#160;&#160;&#160;244</td></tr>
<tr class="separator:ga33ff903e08b31dfa0c4da907d25db421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92c966bf6f7d4eb9f0983ba24f4a0cc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga92c966bf6f7d4eb9f0983ba24f4a0cc2">OAD_MIN_INACTIVITY_TIME</a>&#160;&#160;&#160;4000</td></tr>
<tr class="separator:ga92c966bf6f7d4eb9f0983ba24f4a0cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1f3fc32b61e11ffb447a161516467d4"><td class="memItemLeft" align="right" valign="top"><a id="gad1f3fc32b61e11ffb447a161516467d4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gad1f3fc32b61e11ffb447a161516467d4">OAD_SEC_AES_128_CBC</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:gad1f3fc32b61e11ffb447a161516467d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">OAD Security Type for AES 128. <br /></td></tr>
<tr class="separator:gad1f3fc32b61e11ffb447a161516467d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21961e126306070467fa78202a86d0ab"><td class="memItemLeft" align="right" valign="top"><a id="ga21961e126306070467fa78202a86d0ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga21961e126306070467fa78202a86d0ab">OAD_SEC_ECDSA_P256</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:ga21961e126306070467fa78202a86d0ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">OAD Security Type for ECDSA P256. <br /></td></tr>
<tr class="separator:ga21961e126306070467fa78202a86d0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabf8aa7f25ad91111192f18eb3a8a9f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaabf8aa7f25ad91111192f18eb3a8a9f0">OAD_WRITE_PERMIT</a>&#160;&#160;&#160;<a class="el" href="group___g_a_t_t___permits.html#gadefabc5a273d86efd52439dc7e539eb3">GATT_PERMIT_WRITE</a></td></tr>
<tr class="separator:gaabf8aa7f25ad91111192f18eb3a8a9f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga4be569b4d33c3294056b24ef3ac4f3ba"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga4be569b4d33c3294056b24ef3ac4f3ba">oadWriteCB_t</a>) (uint8_t event, uint16_t arg)</td></tr>
<tr class="separator:ga4be569b4d33c3294056b24ef3ac4f3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gad4b401cc4b8481417d8570d0e69827bf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gad4b401cc4b8481417d8570d0e69827bf">oadEvent_e</a> { <br />
&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad4b401cc4b8481417d8570d0e69827bfa46ac7c7b76ad0141979ca4d4fd69e738">OAD_WRITE_IDENTIFY_REQ</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad4b401cc4b8481417d8570d0e69827bfaf0d1ffedbebe1c117a9fb6b4c5d62540">OAD_WRITE_BLOCK_REQ</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad4b401cc4b8481417d8570d0e69827bfa1dc3da5c3825a5f028bce48cb0e4df80">OAD_IMAGE_COMPLETE</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad4b401cc4b8481417d8570d0e69827bfacd28a632c2a0807ecbe5f61cc7a32db0">OAD_EXT_CTRL_WRITE_CMD</a>, 
<br />
&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad4b401cc4b8481417d8570d0e69827bfa1eadf83f6dc9f0eb40f77efc08f8c539">OAD_TIMEOUT</a>
<br />
 }</td></tr>
<tr class="separator:gad4b401cc4b8481417d8570d0e69827bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1ea8a3da785c5a2093e0dbe1cd6377d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gad1ea8a3da785c5a2093e0dbe1cd6377d">oadState_e</a> { <br />
&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377dab74044f1ed07ff166452832f0ec42ac2">OAD_IDLE</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377daf457278dd0fe8c986586c4c683d81e02">OAD_VALIDATE_IMG</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377da95ffd72bb45ded99d361b2e30eb37111">OAD_CONFIG</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377dae290b91e9b560084991b02879595f514">OAD_DOWNLOAD</a>, 
<br />
&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377da5e49471f213609dc9fb9882be793c8b7">OAD_CHECK_DL</a>, 
<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ggad1ea8a3da785c5a2093e0dbe1cd6377dab33ff5a6c7db4f77bfb7c499307cd76b">OAD_COMPLETE</a>
<br />
 }</td></tr>
<tr class="separator:gad1ea8a3da785c5a2093e0dbe1cd6377d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7e018834c081dac83b188060da0d9d40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga7e018834c081dac83b188060da0d9d40">OAD_cancel</a> (void)</td></tr>
<tr class="separator:ga7e018834c081dac83b188060da0d9d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga784477682bc2262e2f7812c5aa28d3a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga784477682bc2262e2f7812c5aa28d3a7">OAD_close</a> (void)</td></tr>
<tr class="separator:ga784477682bc2262e2f7812c5aa28d3a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef92ab5984404f574055665323c0d423"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaef92ab5984404f574055665323c0d423">OAD_evenBitCount</a> (uint32_t value)</td></tr>
<tr class="separator:gaef92ab5984404f574055665323c0d423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13eb01eda6b99c0a92ddfee789c897ef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga13eb01eda6b99c0a92ddfee789c897ef">OAD_getactiveCxnHandle</a> ()</td></tr>
<tr class="separator:ga13eb01eda6b99c0a92ddfee789c897ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b8279aa44644d2d6641bf22084cbb0f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga0b8279aa44644d2d6641bf22084cbb0f">OAD_getBlockSize</a> (void)</td></tr>
<tr class="separator:ga0b8279aa44644d2d6641bf22084cbb0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfe0535ff9350a7d0db0653c44577b80"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gacfe0535ff9350a7d0db0653c44577b80">OAD_getSWVersion</a> (uint8_t *swVer, uint8_t len)</td></tr>
<tr class="separator:gacfe0535ff9350a7d0db0653c44577b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca9c5ead6eaf971e3e036143cd0dfaf5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaca9c5ead6eaf971e3e036143cd0dfaf5">OAD_isUsrAppValid</a> (void)</td></tr>
<tr class="separator:gaca9c5ead6eaf971e3e036143cd0dfaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9b27cf820ce479a22791f5cc88f3046"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaf9b27cf820ce479a22791f5cc88f3046">OAD_open</a> (uint32_t oadTimeout)</td></tr>
<tr class="separator:gaf9b27cf820ce479a22791f5cc88f3046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0101276c443b40db0a7325ea422bfab"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gab0101276c443b40db0a7325ea422bfab">OAD_processQueue</a> (void)</td></tr>
<tr class="separator:gab0101276c443b40db0a7325ea422bfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87d66d35fff2fb99e519cf4d64af503c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga87d66d35fff2fb99e519cf4d64af503c">OAD_register</a> (<a class="el" href="structoad_target_c_bs__t.html">oadTargetCBs_t</a> *pfnOadCBs)</td></tr>
<tr class="separator:ga87d66d35fff2fb99e519cf4d64af503c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8f663cb72232d4a600152cf04390c91"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gae8f663cb72232d4a600152cf04390c91">OAD_setBlockSize</a> (uint16_t mtuSize)</td></tr>
<tr class="separator:gae8f663cb72232d4a600152cf04390c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fdc85161b1c628746dee6c774f4e099"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga8fdc85161b1c628746dee6c774f4e099">oadCreateFactoryImageBackup</a> (void)</td></tr>
<tr class="separator:ga8fdc85161b1c628746dee6c774f4e099"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>BLE Profile implementation of the TI over the air download solution. This file is responsible for processing data from the BLE-Stack, passing this data to the application, and processing queued OAD events as well as the OAD state machine. </p>
<p>============================================================================</p>
<h1>Header Include</h1>
<p>The OAD Profile header should be included in an OAD enabled application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="oad_8h.html">profiles/oad/cc26xx/oad.h</a>&gt;</span></div></div><!-- fragment --><h1>Overview</h1>
<p>This module is intended to handle OAD related functionality for the application. At a high level it is responsible for receiving and parsing OAD profile data and commands. This includes:</p><ul>
<li>Receiving image blocks and commands</li>
<li>Executing commands and writing blocks to flash</li>
<li>Reporting status to both local application and peer device</li>
<li>Metadata management</li>
<li>Checking the received image for integrity (CRC, etc)</li>
</ul>
<h2>General Behavior</h2>
<p>For code examples, see the use cases below.</p>
<h3>Initialzation</h3>
<ul>
<li>The application must plug a callback function that allows the OAD profile to queue an event or packet up for processing in the app thread context <div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="structoad_target_c_bs__t.html">oadTargetCBs_t</a> MyApp_oadCBs =</div><div class="line">{</div><div class="line">    MyApp_processOadWriteCB <span class="comment">// Write Callback.</span></div><div class="line">};</div></div><!-- fragment --></li>
<li>Inside the <a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#ga4be569b4d33c3294056b24ef3ac4f3ba">oadWriteCB_t</a>, the application should do the following: <div class="fragment"><div class="line">Event_post(appEvent, event); </div></div><!-- fragment --></li>
<li>The application thread should additionally pend on the following OAD events<ul>
<li><a class="el" href="group___o_a_d___e_v_t_s.html#ga280184274e90bd40627c540ca047437e">OAD_QUEUE_EVT</a></li>
<li><a class="el" href="group___o_a_d___e_v_t_s.html#ga44dd9bfc1d95f95a691e5ed641c11373">OAD_DL_COMPLETE_EVT</a></li>
</ul>
</li>
<li>In the _init function of the a BLE-Stack enabled application thread, Do the following calls: <div class="fragment"><div class="line"><span class="comment">// Open the OAD module and add the OAD service to the application</span></div><div class="line"><span class="keywordflow">if</span>(<a class="code" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#ga9c3e1a9b2bdf941ee6d19d6872fa871d">OAD_SUCCESS</a> != <a class="code" href="group___o_a_d___p_r_o_f_i_l_e.html#gaf9b27cf820ce479a22791f5cc88f3046">OAD_open</a>(<a class="code" href="group___o_a_d___p_r_o_f_i_l_e.html#ga11f88a9dc918a4345f48771d6642b09e">OAD_DEFAULT_INACTIVITY_TIME</a>))</div><div class="line">{</div><div class="line">    <span class="comment">// Display or log the error</span></div><div class="line">}</div><div class="line"><span class="keywordflow">else</span></div><div class="line">{</div><div class="line">    <span class="comment">// Register the OAD callback with the application</span></div><div class="line">    <a class="code" href="group___o_a_d___p_r_o_f_i_l_e.html#ga87d66d35fff2fb99e519cf4d64af503c">OAD_register</a>(&amp;MyApp_oadCBs);</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
<h3>Useage</h3>
<p>After plugging the callbacks shown above, and initializing the OAD module the application will begin receive callbacks related to <a class="el" href="group___o_a_d___e_v_t_s.html#ga280184274e90bd40627c540ca047437e">OAD_QUEUE_EVT</a> and <a class="el" href="group___o_a_d___e_v_t_s.html#ga44dd9bfc1d95f95a691e5ed641c11373">OAD_DL_COMPLETE_EVT</a>.</p>
<h4>Processing OAD_QUEUE_EVT</h4>
<p>Inside the application task function, the queue event should be processed: </p><div class="fragment"><div class="line"><span class="comment">// OAD events</span></div><div class="line"><span class="keywordflow">if</span>(events &amp; <a class="code" href="group___o_a_d___e_v_t_s.html#ga280184274e90bd40627c540ca047437e">OAD_QUEUE_EVT</a>)</div><div class="line">{</div><div class="line">    <span class="comment">// Process the OAD Message Queue</span></div><div class="line">    uint8_t status = <a class="code" href="group___o_a_d___p_r_o_f_i_l_e.html#gab0101276c443b40db0a7325ea422bfab">OAD_processQueue</a>();</div><div class="line"></div><div class="line">    <span class="comment">// If the OAD state machine encountered an error, print it</span></div><div class="line">    <span class="keywordflow">if</span>(status == <a class="code" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#ga949380f115c50f31d6a039cf635b9f26">OAD_DL_COMPLETE</a>)</div><div class="line">    {</div><div class="line">        <span class="comment">//Display or print the message</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status == <a class="code" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#gada83cbac11b4ef51ccd2d3a8f3f09efa">OAD_IMG_ID_TIMEOUT</a>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Display the error and terminate the link</span></div><div class="line">        MAP_GAP_TerminateLinkReq(<a class="code" href="group___o_a_d___p_r_o_f_i_l_e.html#ga13eb01eda6b99c0a92ddfee789c897ef">OAD_getactiveCxnHandle</a>(),</div><div class="line">                                    <a class="code" href="group___disconnect___reasons.html#ga426963729d7dcdd0895583a8f51bf61b">HCI_DISCONNECT_REMOTE_USER_TERM</a>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(status != <a class="code" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#ga9c3e1a9b2bdf941ee6d19d6872fa871d">OAD_SUCCESS</a>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Display the error</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4>Processing OAD_DL_COMPLETE_EVT</h4>
<p>At this time, the OAD is entirely complete and the system should be reset. The reset behavior is defined by the application. </p><dl class="section warning"><dt>Warning</dt><dd>The application should ensure the BLE-Stack has no pending items in its transmit buffer (i.e. final OAD response messages) before rebooting </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga277d13f4e5d87e0bc37e95afc50e19da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga277d13f4e5d87e0bc37e95afc50e19da">&sect;&nbsp;</a></span>EXT_CTRL_OP_CODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXT_CTRL_OP_CODE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pData</td><td>)</td>
          <td>&#160;&#160;&#160;(pData[0])</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Macro to parse op-code from external control command </p>

</div>
</div>
<a id="ga5b21227a27d1f619fb8c0df673e9ad35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b21227a27d1f619fb8c0df673e9ad35">&sect;&nbsp;</a></span>OAD_ATT_OVERHEAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_ATT_OVERHEAD&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The ATT header overhead required to send a GATT_notifiation() This is used in calculating acceptable block sizes </p>

</div>
</div>
<a id="gae480be4051078cfd255c63898979e53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae480be4051078cfd255c63898979e53d">&sect;&nbsp;</a></span>OAD_BLK_NUM_HDR_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_BLK_NUM_HDR_SZ&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The size of the OAD block number in a block write or block request </p>

</div>
</div>
<a id="ga228354ce88f04c0fdb25f66f14f99d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga228354ce88f04c0fdb25f66f14f99d2d">&sect;&nbsp;</a></span>OAD_CCCD_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_CCCD_CNT&#160;&#160;&#160;<a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaa9c4528fb7d7dcc91b3d51ce0477876d">OAD_CHAR_CNT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of CCCDs in the OAD service </p>

</div>
</div>
<a id="gaa9c4528fb7d7dcc91b3d51ce0477876d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9c4528fb7d7dcc91b3d51ce0477876d">&sect;&nbsp;</a></span>OAD_CHAR_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_CHAR_CNT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of characteristics in the OAD service </p>

</div>
</div>
<a id="ga04aca5818ba2f122fe6c9161a0ab555e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04aca5818ba2f122fe6c9161a0ab555e">&sect;&nbsp;</a></span>OAD_DEFAULT_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_DEFAULT_BLOCK_SIZE&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum OAD block size OAD Block size can range from [OAD_DEFAULT_BLOCK_SIZE,OAD_MAX_BLOCK_SIZE] </p><dl class="section note"><dt>Note</dt><dd>OAD block size must be 4 Octet aligned </dd></dl>

</div>
</div>
<a id="ga11f88a9dc918a4345f48771d6642b09e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11f88a9dc918a4345f48771d6642b09e">&sect;&nbsp;</a></span>OAD_DEFAULT_INACTIVITY_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_DEFAULT_INACTIVITY_TIME&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default OAD inactivity timeout, the OAD state machine will cancel OAD if no activity is observed during this time.</p>
<p>The inactivity time is configurable via a parameter to <a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gaf9b27cf820ce479a22791f5cc88f3046">OAD_open</a> </p>

</div>
</div>
<a id="ga4b5c446f7eb43814e68b8a05d8d3ef04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b5c446f7eb43814e68b8a05d8d3ef04">&sect;&nbsp;</a></span>OAD_EFL_MAX_META</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_EFL_MAX_META&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum number of external flash image header entries </p><dl class="section note"><dt>Note</dt><dd>this only applies to off-chip OAD </dd></dl>

</div>
</div>
<a id="gaf5e2740ce38241476a129644fb37cd08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5e2740ce38241476a129644fb37cd08">&sect;&nbsp;</a></span>OAD_EXT_CTRL_CMD_NOT_SUPPORTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_EXT_CTRL_CMD_NOT_SUPPORTED&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error code returned when an external control command is received with an invalid opcode. </p>

</div>
</div>
<a id="gaaf12817150b842abffa2115911ff8a0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf12817150b842abffa2115911ff8a0a">&sect;&nbsp;</a></span>OAD_IMAGE_ID_RSP_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_IMAGE_ID_RSP_LEN&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of the payload in an image identify response. </p>

</div>
</div>
<a id="ga8211e712e3299a74aa0d661600eeb5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8211e712e3299a74aa0d661600eeb5b7">&sect;&nbsp;</a></span>OAD_IMG_ID_RETRIES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_IMG_ID_RETRIES&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of failed image IDs are allowed before OAD terminates the cxn </p>

</div>
</div>
<a id="gaf07ca8238231cc455648c061db748358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf07ca8238231cc455648c061db748358">&sect;&nbsp;</a></span>OAD_IMG_INFO_ONCHIP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_IMG_INFO_ONCHIP&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>There are two flavors of the get image info command:</p><ul>
<li>A short get info command: returns the image info for the image on the chip</li>
<li>A long get info command: return an array of image info structures from external flash </li>
</ul>

</div>
</div>
<a id="ga20e8f113dcbaba0b85bc5e03bff5ae6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20e8f113dcbaba0b85bc5e03bff5ae6e">&sect;&nbsp;</a></span>OAD_IMG_PG_INVALID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_IMG_PG_INVALID&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OAD Security Types. </p>
<p>Invalid image page (outside of device flash) </p>

</div>
</div>
<a id="ga33ff903e08b31dfa0c4da907d25db421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33ff903e08b31dfa0c4da907d25db421">&sect;&nbsp;</a></span>OAD_MAX_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_MAX_BLOCK_SIZE&#160;&#160;&#160;244</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum OAD block size OAD Block size can range from [OAD_DEFAULT_BLOCK_SIZE,OAD_MAX_BLOCK_SIZE] </p><dl class="section note"><dt>Note</dt><dd>OAD block size must be 4 Octet aligned </dd></dl>

</div>
</div>
<a id="ga92c966bf6f7d4eb9f0983ba24f4a0cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92c966bf6f7d4eb9f0983ba24f4a0cc2">&sect;&nbsp;</a></span>OAD_MIN_INACTIVITY_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_MIN_INACTIVITY_TIME&#160;&#160;&#160;4000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum OAD inactivity timeout, the OAD state machine will cancel OAD if no activity is observed during this time. </p>

</div>
</div>
<a id="gaabf8aa7f25ad91111192f18eb3a8a9f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabf8aa7f25ad91111192f18eb3a8a9f0">&sect;&nbsp;</a></span>OAD_WRITE_PERMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OAD_WRITE_PERMIT&#160;&#160;&#160;<a class="el" href="group___g_a_t_t___permits.html#gadefabc5a273d86efd52439dc7e539eb3">GATT_PERMIT_WRITE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This define controls whether the OAD profile requires BLE security By default, this is off. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga4be569b4d33c3294056b24ef3ac4f3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4be569b4d33c3294056b24ef3ac4f3ba">&sect;&nbsp;</a></span>oadWriteCB_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* oadWriteCB_t) (uint8_t event, uint16_t arg)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OAD Module Write Callback Function</p>
<p>This callback is used to signal to the application that the OAD profile has received data over the air or needs to process an event in its internal queue</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The event that the OAD module is posting in the application Can either <a class="el" href="group___o_a_d___e_v_t_s.html#ga280184274e90bd40627c540ca047437e">OAD_QUEUE_EVT</a> or <a class="el" href="group___o_a_d___e_v_t_s.html#ga44dd9bfc1d95f95a691e5ed641c11373">OAD_DL_COMPLETE_EVT</a> </td></tr>
    <tr><td class="paramname">arg</td><td>This is the bim_var if performing on-chip OAD, otherwise unused </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gad4b401cc4b8481417d8570d0e69827bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4b401cc4b8481417d8570d0e69827bf">&sect;&nbsp;</a></span>oadEvent_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gad4b401cc4b8481417d8570d0e69827bf">oadEvent_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event internal to the OAD module, use in state machine processing </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggad4b401cc4b8481417d8570d0e69827bfa46ac7c7b76ad0141979ca4d4fd69e738"></a>OAD_WRITE_IDENTIFY_REQ&#160;</td><td class="fielddoc"><p>Image identify received. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad4b401cc4b8481417d8570d0e69827bfaf0d1ffedbebe1c117a9fb6b4c5d62540"></a>OAD_WRITE_BLOCK_REQ&#160;</td><td class="fielddoc"><p>Image block request/response event. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad4b401cc4b8481417d8570d0e69827bfa1dc3da5c3825a5f028bce48cb0e4df80"></a>OAD_IMAGE_COMPLETE&#160;</td><td class="fielddoc"><p>OAD complete. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad4b401cc4b8481417d8570d0e69827bfacd28a632c2a0807ecbe5f61cc7a32db0"></a>OAD_EXT_CTRL_WRITE_CMD&#160;</td><td class="fielddoc"><p>External Control Command received. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad4b401cc4b8481417d8570d0e69827bfa1eadf83f6dc9f0eb40f77efc08f8c539"></a>OAD_TIMEOUT&#160;</td><td class="fielddoc"><p>OAD peer timed out. </p>
</td></tr>
</table>

</div>
</div>
<a id="gad1ea8a3da785c5a2093e0dbe1cd6377d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1ea8a3da785c5a2093e0dbe1cd6377d">&sect;&nbsp;</a></span>oadState_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_a_d___p_r_o_f_i_l_e.html#gad1ea8a3da785c5a2093e0dbe1cd6377d">oadState_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OAD state types </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377dab74044f1ed07ff166452832f0ec42ac2"></a>OAD_IDLE&#160;</td><td class="fielddoc"><p>OAD module is not performing any action. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377daf457278dd0fe8c986586c4c683d81e02"></a>OAD_VALIDATE_IMG&#160;</td><td class="fielddoc"><p>OAD module is checking an image. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377da95ffd72bb45ded99d361b2e30eb37111"></a>OAD_CONFIG&#160;</td><td class="fielddoc"><p>OAD module is configuring for a download. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377dae290b91e9b560084991b02879595f514"></a>OAD_DOWNLOAD&#160;</td><td class="fielddoc"><p>OAD module is receiving an image. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377da5e49471f213609dc9fb9882be793c8b7"></a>OAD_CHECK_DL&#160;</td><td class="fielddoc"><p>OAD module is validating an received image. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1ea8a3da785c5a2093e0dbe1cd6377dab33ff5a6c7db4f77bfb7c499307cd76b"></a>OAD_COMPLETE&#160;</td><td class="fielddoc"><p>OAD module has completed a download. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7e018834c081dac83b188060da0d9d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e018834c081dac83b188060da0d9d40">&sect;&nbsp;</a></span>OAD_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OAD_cancel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel and active OAD and reset the state </p>

</div>
</div>
<a id="ga784477682bc2262e2f7812c5aa28d3a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga784477682bc2262e2f7812c5aa28d3a7">&sect;&nbsp;</a></span>OAD_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OAD_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the OAD and its flash_interface, reset the state </p>

</div>
</div>
<a id="gaef92ab5984404f574055665323c0d423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef92ab5984404f574055665323c0d423">&sect;&nbsp;</a></span>OAD_evenBitCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OAD_evenBitCount </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function checks if the value field has even number of 1's.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Value field to check for even number of 1's.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if even number of 1's otherwise false. </dd></dl>

</div>
</div>
<a id="ga13eb01eda6b99c0a92ddfee789c897ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13eb01eda6b99c0a92ddfee789c897ef">&sect;&nbsp;</a></span>OAD_getactiveCxnHandle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t OAD_getactiveCxnHandle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the active connection handle of the OAD session</p>
<dl class="section return"><dt>Returns</dt><dd>handle - the 16-bit connection handle of the OAD session </dd></dl>

</div>
</div>
<a id="ga0b8279aa44644d2d6641bf22084cbb0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b8279aa44644d2d6641bf22084cbb0f">&sect;&nbsp;</a></span>OAD_getBlockSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t OAD_getBlockSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the block size currently used by the OAD module</p>
<dl class="section return"><dt>Returns</dt><dd>The block size being used. </dd></dl>

</div>
</div>
<a id="gacfe0535ff9350a7d0db0653c44577b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfe0535ff9350a7d0db0653c44577b80">&sect;&nbsp;</a></span>OAD_getSWVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OAD_getSWVersion </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>swVer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the currently running SW version field</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">swVer</td><td>- pointer to array to copy version into </td></tr>
    <tr><td class="paramname">len</td><td>- number of bytes to copy</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status - true if copy succeeded<ul>
<li>false if copy failed (invalid parameter) </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gaca9c5ead6eaf971e3e036143cd0dfaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca9c5ead6eaf971e3e036143cd0dfaf5">&sect;&nbsp;</a></span>OAD_isUsrAppValid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OAD_isUsrAppValid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns whether or not the user application is valid (on-chip OAD only)</p>
<dl class="section return"><dt>Returns</dt><dd>user app status - true if the user app hasn't been erased. </dd></dl>

</div>
</div>
<a id="gaf9b27cf820ce479a22791f5cc88f3046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf9b27cf820ce479a22791f5cc88f3046">&sect;&nbsp;</a></span>OAD_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t OAD_open </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>oadTimeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open the OAD module</p>
<p>Initializes the OAD Service by registering GATT attributes with the GATT server. Only call this function once.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oadTimeout</td><td>- the timeout on for a pending OAD operation (in ms)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success or Failure </dd></dl>

</div>
</div>
<a id="gab0101276c443b40db0a7325ea422bfab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0101276c443b40db0a7325ea422bfab">&sect;&nbsp;</a></span>OAD_processQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t OAD_processQueue </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process the OAD message queue/state machine</p>
<dl class="section return"><dt>Returns</dt><dd>status of operation - <a class="el" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html">OAD return status codes</a> </dd></dl>

</div>
</div>
<a id="ga87d66d35fff2fb99e519cf4d64af503c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87d66d35fff2fb99e519cf4d64af503c">&sect;&nbsp;</a></span>OAD_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OAD_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoad_target_c_bs__t.html">oadTargetCBs_t</a> *&#160;</td>
          <td class="paramname"><em>pfnOadCBs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a callback function with the OAD Target Profile.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pfnOadCBs</td><td>- struct holding function pointers to OAD application callbacks <a class="el" href="structoad_target_c_bs__t.html">oadTargetCBs_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae8f663cb72232d4a600152cf04390c91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8f663cb72232d4a600152cf04390c91">&sect;&nbsp;</a></span>OAD_setBlockSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t OAD_setBlockSize </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mtuSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the block size to be used during OAD based on a given MTU</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mtuSize</td><td>- The negotiated MTU size</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if operation is successful. </dd></dl>

</div>
</div>
<a id="ga8fdc85161b1c628746dee6c774f4e099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fdc85161b1c628746dee6c774f4e099">&sect;&nbsp;</a></span>oadCreateFactoryImageBackup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t oadCreateFactoryImageBackup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function creates factory image backup of current running image</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#ga9c3e1a9b2bdf941ee6d19d6872fa871d">OAD_SUCCESS</a> on successful erasure else <a class="el" href="group___o_a_d___s_t_a_t_u_s___c_o_d_e_s.html#gaf7e53a6c81b1b69cea12aec029438278">OAD_FLASH_ERR</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="https://www.ti.com/corp/docs/legal/copyright.shtml">© Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br/>
  <a href="https://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="https://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="https://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="https://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
