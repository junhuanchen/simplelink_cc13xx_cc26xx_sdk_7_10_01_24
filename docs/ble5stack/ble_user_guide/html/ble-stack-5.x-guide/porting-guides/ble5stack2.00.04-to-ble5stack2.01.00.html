<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BLE5-Stack 2.00.04 (SDK 3.20) to BLE5-Stack 2.01.00 (SDK 3.30) &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User&#39;s Guide
 2.02.08.01 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BLE5-Stack 2.00.03 (SDK 3.10) to BLE5-Stack 2.00.04 (SDK 3.20)" href="ble5stack2.00.03-to-ble5stack2.00.04.html" />
    <link rel="prev" title="BLE5-Stack 2.01.00 (SDK 3.30) to BLE5-Stack 2.01.01 (SDK 3.40)" href="ble5stack2.01.00-to-ble5stack2.01.01.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ble-stack-5.x-guide porting-guides ble5stack2.00.04-to-ble5stack2.01.00";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide

          </a>
              <div class="version">
                2.02.08.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart-guide/ble5-quick-start.html">TI BLE5-Stack Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform-cc13xx_cc26xx.html">The CC13xx or CC26xx SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freertos-index.html">FreeRTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5-index-cc13xx_cc26xx.html">BLE5-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing-with-sdk-index-cc13xx_cc26xx.html">Developing a Bluetooth LE Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coexistence/coexistence.html">Coexistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../localization-index-cc13xx_cc26xx.html">RTLS Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ble-mesh/index.html">Bluetooth Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../u-stack-index-cc13xx_cc26xx.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../memory-index.html">Memory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble5-oad-index-cc13xx_cc26xx.html">TI Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble5-oad-index-mcuboot.html">MCUBoot Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security-tfm/index.html">Security Features of CC13x4 and CC26x4 Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sysconfig-index-cc13xx_cc26xx.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../migration-cc13xx_cc26xx.html">Porting Guide and Migration Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../migration-cc13xx_cc26xx.html#porting-guides">Porting Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.07-to-ble5stack2.02.08.html">BLE5-Stack 2.02.07 (SDK 6.40) to BLE5-Stack 2.02.08 (SDK 7.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.06-to-ble5stack2.02.07.html">BLE5-Stack 2.02.06 (SDK 6.20) to BLE5-Stack 2.02.07 (SDK 6.30)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.05-to-ble5stack2.02.06.html">BLE5-Stack 2.02.05 (SDK 6.10) to BLE5-Stack 2.02.06 (SDK 6.20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.04-to-ble5stack2.02.05.html">BLE5-Stack 2.02.04 (SDK 5.40) to BLE5-Stack 2.02.05 (SDK 6.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.03-to-ble5stack2.02.04.html">BLE5-Stack 2.02.03 (SDK 5.30) to BLE5-Stack 2.02.04 (SDK 5.40)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.02-to-ble5stack2.02.03.html">BLE5-Stack 2.02.02 (SDK 5.20) to BLE5-Stack 2.02.03 (SDK 5.30)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.01-to-ble5stack2.02.02.html">BLE5-Stack 2.02.01 (SDK 5.10) to BLE5-Stack 2.02.02 (SDK 5.20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.02.00-to-ble5stack2.02.01.html">BLE5-Stack 2.02.00 (SDK 4.40) to BLE5-Stack 2.02.01 (SDK 5.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.01.04-to-ble5stack2.02.00.html">BLE5-Stack 2.01.04 (SDK 4.30) to BLE5-Stack 2.02.00 (SDK 4.40)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.01.03-to-ble5stack2.01.04.html">BLE5-Stack 2.01.03 (SDK 4.20) to BLE5-Stack 2.01.04 (SDK 4.30)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.01.02-to-ble5stack2.01.03.html">BLE5-Stack 2.01.02 (SDK 4.10) to BLE5-Stack 2.01.03 (SDK 4.20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.01.01-to-ble5stack2.01.02.html">BLE5-Stack 2.01.01 (SDK 3.40) to BLE5-Stack 2.01.02 (SDK 4.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.01.00-to-ble5stack2.01.01.html">BLE5-Stack 2.01.00 (SDK 3.30) to BLE5-Stack 2.01.01 (SDK 3.40)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BLE5-Stack 2.00.04 (SDK 3.20) to BLE5-Stack 2.01.00 (SDK 3.30)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#brief-overview-of-ble5-stack-2-01-00-sysconfig-enabled-example-projects">Brief Overview of BLE5-Stack 2.01.00 SysConfig-Enabled Example Projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#porting-a-sysconfig-preview-syscfg-preview-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00">Porting A SysConfig Preview (syscfg_preview) BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00</a></li>
<li class="toctree-l4"><a class="reference internal" href="#porting-a-non-sysconfig-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00">Porting A non-SysConfig BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.00.03-to-ble5stack2.00.04.html">BLE5-Stack 2.00.03 (SDK 3.10) to BLE5-Stack 2.00.04 (SDK 3.20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.00.02-to-ble5stack2.00.03.html">BLE5-Stack 2.00.02 (SDK 3.10)  to BLE5-Stack 2.00.03 (SDK 3.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.00.01-to-ble5stack2.00.02.html">BLE5-Stack 2.00.01 (SDK 2.40) to BLE5-Stack 2.00.02 (SDK 3.10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack2.00.00-to-ble5stack2.00.01.html">BLE5-Stack 2.00.00 to BLE5-Stack 2.00.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack1.02.01-to-ble5stack2.00.00.html">BLE5-Stack 1.02.01 to BLE5-Stack 2.00.00</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble5stack1.02.00-to-ble5stack1.02.01.html">BLE5-Stack 1.02.00 to BLE5-Stack 1.02.01</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../migration-cc13xx_cc26xx.html#year-to-year-migration-guides">Year-to-Year Migration Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration-cc13xx_cc26xx.html#migration-guides">Migration Guides</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference-cc13xx_cc26xx.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../migration-cc13xx_cc26xx.html">Porting Guide and Migration Guides</a> &raquo;</li>
      <li>BLE5-Stack 2.00.04 (SDK 3.20) to BLE5-Stack 2.01.00 (SDK 3.30)</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="ble5-stack-2-00-04-sdk-3-20-to-ble5-stack-2-01-00-sdk-3-30">
<h1>BLE5-Stack 2.00.04 (SDK 3.20) to BLE5-Stack 2.01.00 (SDK 3.30)<a class="headerlink" href="#ble5-stack-2-00-04-sdk-3-20-to-ble5-stack-2-01-00-sdk-3-30" title="Permalink to this headline">¶</a></h1>
<p>This section will describe a way to migrate a project from BLE5-Stack 2.00.04 to
a BLE5-Stack 2.01.00 project. The porting steps are provided in section
<a class="reference internal" href="#sec-porting-examplesgen-2-00-05"><span class="std std-ref">Porting A non-SysConfig BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00</span></a> below which in turn partly overlap with
the <a class="reference internal" href="../../sysconfig/ble5-migration.html#ble-sysconfig-migration"><span class="std std-ref">SysConfig Migration</span></a> guide.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most of the projects in the BLE5-Stack 2.01.00 SDK are now fully SysConfig
enabled.</p>
</div>
<div class="section" id="brief-overview-of-ble5-stack-2-01-00-sysconfig-enabled-example-projects">
<h2>Brief Overview of BLE5-Stack 2.01.00 SysConfig-Enabled Example Projects<a class="headerlink" href="#brief-overview-of-ble5-stack-2-01-00-sysconfig-enabled-example-projects" title="Permalink to this headline">¶</a></h2>
<p>As all the examples are SysConfig enabled the reader is encouraged to get
familiar with the tool by reading the <a class="reference internal" href="../../sysconfig/getting-started.html#sysconfig-sysconfig"><span class="std std-ref">Get started with SysConfig</span></a> chapter. This
Chapter will provide a very brief overview only for the BLE SysConfig examples.</p>
<p>SysConfig is short for System Configuration Tool, a GUI tool used to configure
and generate source code for TI-RTOS Driver configuration
(ti_drivers_config.c/h), Device configuration (ti_devices_config.c), Board file,
radio configuration (ti_radio_config.c/h), BLE stack configuration
(ti_ble_config.c/h), BLE build config options (ti_build_config.opt) and BLE
module defines (ti_ble_app_config.opt). Some of the generated files replace
certain projects files from earlier non-SysConfig example projects:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ti_devices_config</span></code> replace <code class="docutils literal notranslate"><span class="pre">ccfg_app_ble.c</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ti_drivers_config</span></code> replace board files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ti_ble_config</span></code> replace BLE related application code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ti_radio_config</span></code> expose low level Radio configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ti_build_config.opt</span></code> replace <code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ti_ble_app_config.opt</span></code> replace <code class="docutils literal notranslate"><span class="pre">project_name_app.opt</span></code>.</p></li>
</ul>
</div></blockquote>
<p>All the default SysConfig settings for the examples can be found in the
<code class="docutils literal notranslate"><span class="pre">project_name.syscfg</span></code> file that reside in the examples folders. In CCS the
SysConfig generated files will be created in a build step and placed in the
build output folder under a separate <code class="docutils literal notranslate"><span class="pre">syscfg</span></code> folder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BLE stack module in SysConfig is intended to simplify the stack
configuration for the user. This module can be used only with the following
applications: multi_role, simple_broadcaster, simple_central and
simple_peripheral. For more information, refer to the BLE User’s Guide. This
module will generate BLE application specific code such as Bond manager
parameters, advertising set configuration, advertising data and more.</p>
</div>
<p>Here is an overview of SysConfig generated files for the different examples.
ti_ble_config in the table below indicate that SysConfig will generate the BLE
module defines ti_build_config.opt and ti_ble_app_config.opt as well.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Example Project</p></th>
<th class="head" colspan="2"><p>SysConfig Generated Files</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Host test</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config</p></td>
</tr>
<tr class="row-odd"><td><p>Multi role</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config, ti_ble_config</p></td>
</tr>
<tr class="row-even"><td><p>Project zero</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config</p></td>
</tr>
<tr class="row-odd"><td><p>rtls_master</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config</p></td>
</tr>
<tr class="row-even"><td><p>rtls_passive</p></td>
<td colspan="2"><p>ti_drivers_config, ti_devices_config</p></td>
</tr>
<tr class="row-odd"><td><p>rtls_slave</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config</p></td>
</tr>
<tr class="row-even"><td><p>Simple broadcaster</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config, ti_ble_config</p></td>
</tr>
<tr class="row-odd"><td><p>Simple central</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config, ti_ble_config</p></td>
</tr>
<tr class="row-even"><td><p>Simple peripheral</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_devices_config, ti_ble_config</p></td>
</tr>
<tr class="row-odd"><td><p>Simple peripheral oad off-chip</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_ble_config</p></td>
</tr>
<tr class="row-even"><td><p>Simple peripheral oad on-chip</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config, ti_ble_config</p></td>
</tr>
<tr class="row-odd"><td><p>Persistent app</p></td>
<td colspan="2"><p>ti_drivers_config, ti_radio_config</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Other changes (not needed for method used in porting guide below) between
BLE5-Stack 2.00.04 and BLE5-Stack 2.01.00 are:</p>
<ol class="arabic">
<li><p>NVS Driver updated to be configurable for more than 2 NV pages.
The previous NVS driver (nvoctp.c) with constraint for maximum of 2 flash pages
has been updated (nvocmp.c) with number of NV pages configurable to more than 2.
Refer to <a class="reference internal" href="../../ble-stack-common/flash_memory-cc13xx_cc26xx.html#using-simple-nv"><span class="std std-ref">Non-Volatile Storage Architecture</span></a> for more details. The nv include directory has
been changed from <code class="docutils literal notranslate"><span class="pre">/source/ti/ble5stack/services/src/nv/</span></code> to
<code class="docutils literal notranslate"><span class="pre">/source/ti/common/nv/</span></code>.</p></li>
<li><p>New API functions defined in icall_ble_api.h:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HCI_EXT_SetVirtualAdvAddrCmd</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAPBondMgr_SCGetLocalOOBParameters</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAPBondMgr_SCGetLocalOOBParameters</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAPBondMgr_GenerateEccKeys</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GapAdv_setVirtualAdvAddr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SM_GenerateRandBuf</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAPBondMgr_Init</span></code> called in osal_icall_ble.c takes on 2 extra arguments to
define maximum number of bonds and client characteristic configurations that can
be saved in SNV:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">GAPBondMgr_Init(</span> <span class="pre">taskID++,</span> <span class="pre">GAP_BONDINGS_MAX,</span> <span class="pre">GAP_CHAR_CFG_MAX)</span></code></p>
</div></blockquote>
</li>
<li><p>XDCtools updated from version 3.51.03.28_core to 3.60.00.24_core.</p></li>
</ol>
</div>
<div class="section" id="porting-a-sysconfig-preview-syscfg-preview-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00">
<h2>Porting A SysConfig Preview (syscfg_preview) BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00<a class="headerlink" href="#porting-a-sysconfig-preview-syscfg-preview-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00" title="Permalink to this headline">¶</a></h2>
<p>In BLE5-Stack 2.01.00 Sysconfig has moved to version 2.0 compared to version 1.0
for preview state in BLE5-Stack 2.00.04. In v2.0 there is added support for
Dynamic Multi-protocol Manager (DMM), Device configuration that control
variables in CCFG, TI Driver apps (high level IO funcationality) and generally
more finer grained settings. There has been some change in naming convention
used as well as GUI layout changes. For simplicity, the user it is advised
to follow the same guide for porting as in the section
<a class="reference internal" href="#sec-porting-examplesgen-2-00-05"><span class="std std-ref">Porting A non-SysConfig BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00</span></a> below.</p>
</div>
<div class="section" id="porting-a-non-sysconfig-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00">
<span id="sec-porting-examplesgen-2-00-05"></span><h2>Porting A non-SysConfig BLE5-Stack 2.00.04 Project to BLE5-Stack 2.01.00<a class="headerlink" href="#porting-a-non-sysconfig-ble5-stack-2-00-04-project-to-ble5-stack-2-01-00" title="Permalink to this headline">¶</a></h2>
<p>For this migration guide, Simple non-SysConfig Peripheral from BLE5-Stack
2.00.04 will be ported over to BLE5-Stack 2.01.00. The recommended approach
is to start with a BLE5-Stack 2.01.00 project that contains the same base
functionality as the porting target project and merge in any custom
functionality.</p>
<ol class="arabic">
<li><p>Choose a BLE5-Stack 2.01.00 example project that contains your target
project’s base functionality.</p></li>
<li><p>Transfer all modified application files from BLE5-Stack 2.00.04 into the
BLE5-Stack 2.01.00 example project.</p>
<p>In this example, the following files from BLE5-Stack 2.00.04 were moved into
Simple Peripheral BLE5-Stack 2.01.00 example:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">simple_peripheral.h</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Remove #include &lt;Board.h&gt; from <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code>.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="c1">//#include &lt;Board.h&gt;</span>
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p>Add the following to the INCLUDES section in <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code>:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ti_drivers_config.h&gt;</span><span class="cp"></span>
<span class="linenos">2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ti_ble_config.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Follow the <a class="reference internal" href="../../sysconfig/ble5-migration.html#ble-sysconfig-migration"><span class="std std-ref">SysConfig Migration</span></a> guide from step “Changes in
Application File”.</p></li>
<li><p>Rename the variables <code class="docutils literal notranslate"><span class="pre">advParamLegacy</span></code> to <code class="docutils literal notranslate"><span class="pre">advParams1</span></code> and
<code class="docutils literal notranslate"><span class="pre">advParamLongRange</span></code> to <code class="docutils literal notranslate"><span class="pre">advParams2</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code> replace define <code class="docutils literal notranslate"><span class="pre">Board_PIN_BUTTON0</span></code> with
<code class="docutils literal notranslate"><span class="pre">CONFIG_PIN_BTN1</span></code> and <code class="docutils literal notranslate"><span class="pre">Board_PIN_BUTTON1</span></code> with <code class="docutils literal notranslate"><span class="pre">CONFIG_PIN_BTN2</span></code>.</p></li>
<li><p>Advertising set 1 now refer to <code class="docutils literal notranslate"><span class="pre">advData1</span></code> and <code class="docutils literal notranslate"><span class="pre">scanResData1</span></code> and
advertising set 2 refer to <code class="docutils literal notranslate"><span class="pre">advData2</span></code> and <code class="docutils literal notranslate"><span class="pre">scanResData2</span></code>.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// Load advertising data for set #1 that is statically allocated by the app</span>
<span class="linenos"> 2</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GapAdv_loadByHandle</span><span class="p">(</span><span class="n">advHandleLegacy</span><span class="p">,</span><span class="w"> </span><span class="n">GAP_ADV_DATA_TYPE_ADV</span><span class="p">,</span><span class="w"></span>
<span class="hll"><span class="linenos"> 3</span><span class="c1">//                             sizeof(advertData), advertData);</span>
</span><span class="linenos"> 4</span><span class="w">                             </span><span class="k">sizeof</span><span class="p">(</span><span class="n">advData1</span><span class="p">),</span><span class="w"> </span><span class="n">advData1</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span><span class="n">SIMPLEPERIPHERAL_ASSERT</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SUCCESS</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1">// Load scan response data for set #1 that is statically allocated by the app</span>
<span class="linenos"> 8</span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GapAdv_loadByHandle</span><span class="p">(</span><span class="n">advHandleLegacy</span><span class="p">,</span><span class="w"> </span><span class="n">GAP_ADV_DATA_TYPE_SCAN_RSP</span><span class="p">,</span><span class="w"></span>
<span class="hll"><span class="linenos"> 9</span><span class="c1">//                            sizeof(scanRspData), scanRspData);</span>
</span><span class="linenos">10</span><span class="w">                             </span><span class="k">sizeof</span><span class="p">(</span><span class="n">scanResData1</span><span class="p">),</span><span class="w"> </span><span class="n">scanResData1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">11</span><span class="n">SIMPLEPERIPHERAL_ASSERT</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SUCCESS</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code> replace references to <code class="docutils literal notranslate"><span class="pre">advertData</span></code> in a
similar fashion as shown below:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="c1">//advertData[2] = &#39;G&#39;;</span>
</span><span class="hll"><span class="linenos">2</span><span class="c1">//advertData[3] = &#39;A&#39;;</span>
</span><span class="linenos">3</span><span class="n">advData1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;G&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">4</span><span class="n">advData1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">5</span><span class="n">advData2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;G&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">6</span><span class="n">advData2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Modify <code class="docutils literal notranslate"><span class="pre">main.c</span></code> in the BLE5-Stack 2.01.00 example if additional tasks were
added in the BLE5-Stack 2.00.04 project.</p></li>
<li><p>Move any profiles and services that the application is using to the BLE5-Stack
2.01.00 project.</p></li>
<li><p>If necessary, update the project to use the newer TI-RTOS drivers that are
supplied with the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>.</p></li>
<li><p>Refer to the Core SDK release notes for additional information and the TI-RTOS
examples included with <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>.</p>
<p>For additional information on how BLE5-Stack 2.01.00 uses TI-RTOS see
<a class="reference internal" href="../tirtos-index-cc13xx_cc26xx.html#sec-tirtos-overview"><span class="std std-ref">TI-RTOS7 (RTOS Kernel) Overview</span></a>.</p>
<p>For any utilized TI Drivers, review <a class="reference external" href="../../../../../tirtos7/Bios_User_Guide.pdf">TI-RTOS Kernel (SYS/BIOS) User’s Guide</a> and <a class="reference external" href="../../../../../drivers/tidriversAPIs.html">TI Drivers API Reference</a>.</p>
</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ble5stack2.01.00-to-ble5stack2.01.01.html" class="btn btn-neutral float-left" title="BLE5-Stack 2.01.00 (SDK 3.30) to BLE5-Stack 2.01.01 (SDK 3.40)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ble5stack2.00.03-to-ble5stack2.00.04.html" class="btn btn-neutral float-right" title="BLE5-Stack 2.00.03 (SDK 3.10) to BLE5-Stack 2.00.04 (SDK 3.20)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>