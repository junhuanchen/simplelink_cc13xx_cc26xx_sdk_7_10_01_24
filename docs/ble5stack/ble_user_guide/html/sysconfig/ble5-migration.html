<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SysConfig Migration &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User&#39;s Guide
 2.02.08.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="UART to UART2 Porting Guide" href="../cc13xx_cc26xx/uart_to_uart2.html" />
    <link rel="prev" title="CC13x2x1 or CC26x2x1 to CC13x1x3 or CC26x1x3 Software Migration" href="../ble-stack-5.x-guide/porting-guides/cc26x2_to_cc26x2x1.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug sysconfig ble5-migration";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide

          </a>
              <div class="version">
                2.02.08.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/ble5-quick-start.html">TI BLE5-Stack Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/platform-cc13xx_cc26xx.html">The CC13xx or CC26xx SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/freertos-index.html">FreeRTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble-stack-5-index-cc13xx_cc26xx.html">BLE5-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/developing-with-sdk-index-cc13xx_cc26xx.html">Developing a Bluetooth LE Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coexistence/coexistence.html">Coexistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/localization-index-cc13xx_cc26xx.html">RTLS Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-mesh/index.html">Bluetooth Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/u-stack-index-cc13xx_cc26xx.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/memory-index.html">Memory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble5-oad-index-cc13xx_cc26xx.html">TI Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble5-oad-index-mcuboot.html">MCUBoot Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security-tfm/index.html">Security Features of CC13x4 and CC26x4 Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/sysconfig-index-cc13xx_cc26xx.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html">Porting Guide and Migration Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html#porting-guides">Porting Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html#year-to-year-migration-guides">Year-to-Year Migration Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html#migration-guides">Migration Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/gpio-porting-guide.html">GPIO++ Driver Porting Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/software-on-cc2652xSIP-cc2651RSIPA.html">Running Software Examples on CC2652XSIP and CC2651RSIPA devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/software-on-cc2652p.html">Running Software Examples on CC2652P</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/software-on-cc13x2x7-26x2x7.html">Running Software Examples on the CC13x2x7 or CC26x2x7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/software-on-cc13x1x-26x1x.html">Running Software Examples on the CC13x1x3 or CC26x1x3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/software-on-cc13x4-26x4.html">Running Software Examples on the CC13x4 or CC26x4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ble-stack-5.x-guide/porting-guides/cc2640r2_to_cc26x2.html">CC2640R2 to CC26x2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ble-stack-5.x-guide/porting-guides/cc2640r2_to_cc26x2.html#porting-ble-stack-to-ble5-stack">Porting BLE-Stack to BLE5-Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ble-stack-5.x-guide/porting-guides/cc26x2_to_cc26x2x1.html">CC13x2x1 or CC26x2x1 to CC13x1x3 or CC26x1x3 Software Migration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SysConfig Migration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#add-a-syscfg-file-to-your-project">1. Add a .syscfg File to Your Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-sysconfig-options">2. Add SysConfig Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-board-files-from-your-project">3. Remove Board Files From Your Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#migrate-build-config-opt">4. Migrate <code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#migrate-project-name-app-opt">5. Migrate <code class="docutils literal notranslate"><span class="pre">project_name_app.opt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#changes-in-application-file">6. Changes in Application File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changes-in-the-menu-file">7. Changes in the Menu File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tirtos/bios7_migration.html">TI-RTOS to TI-RTOS7 Migration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cc13xx_cc26xx/uart_to_uart2.html">UART to UART2 Porting Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/api-reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/reference-cc13xx_cc26xx.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html">Porting Guide and Migration Guides</a> &raquo;</li>
      <li>SysConfig Migration</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="sysconfig-migration">
<span id="ble-sysconfig-migration"></span><h1>SysConfig Migration<a class="headerlink" href="#sysconfig-migration" title="Permalink to this headline">¶</a></h1>
<p>If you have an existing CC13xx or CC26xx software project and you want to start
developing with SysConfig, follow the steps below. This guide assumes you
have a stack project from the SimpleLink CC13xx or CC26xx 2.40 SDK or newer. If this
is not the case, please look at the Stack Porting Guides to see how to update
to SimpleLink CC13xx or CC26xx 2.40 SDK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are starting development with a fresh project, you don’t need to
migrate from non-SysConfig to SysConfig-enabled project. In <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a> v. 2.40 and
later, SysConfig-enabled projects are found in the syscfg_preview folder.</p>
</div>
<div class="section" id="add-a-syscfg-file-to-your-project">
<h2>1. Add a .syscfg File to Your Project<a class="headerlink" href="#add-a-syscfg-file-to-your-project" title="Permalink to this headline">¶</a></h2>
<p>In this guide, we will start with a BLE5-Stack project, then apply necessary changes
to start using SysConfig.</p>
<p>You can use the standalone SysConfig tool to make this file. Please see the
<a class="reference external" href="http://www.ti.com/tool/download/SYSCONFIG">SysConfig Standalone Installer Download Page</a>.</p>
<ul class="simple">
<li><p>Choose the “Start a new Design” option. Choose your device, part and package.
For the <code class="docutils literal notranslate"><span class="pre">product</span></code> path, add the following for your SDK:
<code class="docutils literal notranslate"><span class="pre">{SDK_INSTALL_DIR}\.metadata\product.json</span></code>.</p></li>
<li><p>Add an RF stack according to your existing project (BLE5-Stack). Add any TI
Drivers configuration that your project requires. If applicable, add one or
more Radio Configuration. You can find guidelines for configuring each of these
in the <a class="reference internal" href="getting-started.html#sysconfig-sysconfig"><span class="std std-ref">Get started with SysConfig</span></a> chapter.</p></li>
<li><p>Save the file and add it to your project.</p></li>
</ul>
<p>If you are using <a class="reference internal" href="../ble-stack-5.x-guide/reference-cc13xx_cc26xx.html#term-CCS"><span class="xref std std-term">CCS</span></a>, you can add the file by dragging it into your CCS
workspace. When you add the file, the following dialog box will appear and allow
you to add SysConfig to your project:</p>
<div class="figure align-center">
<img alt="../_images/enable_dialog.png" src="../_images/enable_dialog.png" />
</div>
<p>If you are using <a class="reference internal" href="../ble-stack-5.x-guide/reference-cc13xx_cc26xx.html#term-IAR"><span class="xref std std-term">IAR</span></a>, follow the steps in <a class="reference internal" href="getting-started.html#sysconfig-use-iar"><span class="std std-ref">Using SysConfig with IAR Workbench</span></a> before you
add the <code class="docutils literal notranslate"><span class="pre">.syscfg</span></code> file. The steps for adding the file are as follows:</p>
<ul class="simple">
<li><p>Include the .syscfg file you want to use in the project (right click on the
project → Add Files → Navigate to the .syscfg file and add it).</p></li>
<li><p>Create a custom build step: Right click on project → Options →
Custom Build → Populate the following:</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Option</p></td>
<td><p>Populate with the following:</p></td>
</tr>
<tr class="row-even"><td><p>File Name Extensions</p></td>
<td><p>.syscfg</p></td>
</tr>
<tr class="row-odd"><td><p>Command Line</p></td>
<td><p>$SYSCONFIG_ROOT$/nw/nw.exe
$SYSCONFIG_ROOT$/dist/cli.js -o $PROJ_DIR$ -s “$
COM_TI_SIMPLELINK_CC13XX_CC26XX_SDK_INSTALL_DIR$/.metadata/product.json”
–compiler iar $FILE_PATH$</p></td>
</tr>
<tr class="row-even"><td><p>Output files (one per line)</p></td>
<td><p>SysConfig_Generated_Files.ipcf</p></td>
</tr>
<tr class="row-odd"><td><p>Run this tool before all other tools</p></td>
<td><p>Checked</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="add-sysconfig-options">
<h2>2. Add SysConfig Options<a class="headerlink" href="#add-sysconfig-options" title="Permalink to this headline">¶</a></h2>
<p>If you are using CCS, open the Project Properties and do the following:</p>
<ul class="simple">
<li><p>In System Configuration Tool → Basic Options → Name of the board file
(-b, –board), set it to <code class="docutils literal notranslate"><span class="pre">/ti/boards/.meta/&lt;BOARD_NAME&gt;</span></code>. (E.g., if you are
using a CC1312R LaunchPad, set the name to
<code class="docutils literal notranslate"><span class="pre">/ti/boards/.meta/CC1312R1_LAUNCHXL</span></code>). It is not necessary to set the name of
the device.</p></li>
<li><p>In System Configuration Tool → Basic Options → Root system config
meta data file in a product or SDK (-s, –product), add
<code class="docutils literal notranslate"><span class="pre">${COM_TI_SIMPLELINK_CC13XX_CC26XX_SDK_INSTALL_DIR}/.metadata/product.json</span></code>.</p></li>
</ul>
</div>
<div class="section" id="remove-board-files-from-your-project">
<h2>3. Remove Board Files From Your Project<a class="headerlink" href="#remove-board-files-from-your-project" title="Permalink to this headline">¶</a></h2>
<p>These are not needed as the board configuration is done in SysConfig. E.g. if
you are using a <a class="reference external" href="https://www.ti.com/tool/LAUNCHXL-CC1352R1">CC1352R LaunchPad</a>, delete the <code class="docutils literal notranslate"><span class="pre">Board.h</span></code>,
<code class="docutils literal notranslate"><span class="pre">CC1352R1_LAUNCHXL.h</span></code>, and <code class="docutils literal notranslate"><span class="pre">CC1352R1_LAUNCHXL.c</span></code> from the project. If your
project contains board files ending with <code class="docutils literal notranslate"><span class="pre">*_fxns.c</span></code> or <code class="docutils literal notranslate"><span class="pre">*.cmd</span></code>, don’t
delete them.</p>
<p>You can see how to configure your board files and TI driver instances with
SysConfig in <a class="reference internal" href="sysconfig-board.html#sysconfig-board-files"><span class="std std-ref">Configure The Board Files with SysConfig</span></a>. If you’re not exactly sure what
peripherals are on your board and you have a TI development board, you can check
the <code class="docutils literal notranslate"><span class="pre">.syscfg</span></code> file from an existing syscfg project for your board. E.g.
if you’re using a <a class="reference external" href="https://www.ti.com/tool/LAUNCHXL-CC26x2R1">CC26X2R LaunchPad</a> board, you can check the <code class="docutils literal notranslate"><span class="pre">.syscfg</span></code> file
in one of the projects in <code class="docutils literal notranslate"><span class="pre">${COM_TI_SIMPLELINK_CC13XX_CC26XX_SDK_INSTALL_DIR}</span>
<span class="pre">/examples/rtos/CC26X2R1_LAUNCHXL</span></code>.</p>
</div>
<div class="section" id="migrate-build-config-opt">
<h2>4. Migrate <code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code><a class="headerlink" href="#migrate-build-config-opt" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code> contains build configuration settings. These settings can
all be set by SysConfig. The associated settings are found in the main BLE view
in SysConfig.</p>
<div class="figure align-center">
<img alt="../_images/build_config.png" src="../_images/build_config.png" />
</div>
<p>When you have configured these parameters in SysConfig, delete the
<code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code> file from your project.</p>
<p>When you have eventually built the project with SysConfig enabled, you will find
the SysConfig-built version of <code class="docutils literal notranslate"><span class="pre">build_config.opt</span></code> in the output folder of the
project.</p>
</div>
<div class="section" id="migrate-project-name-app-opt">
<h2>5. Migrate <code class="docutils literal notranslate"><span class="pre">project_name_app.opt</span></code><a class="headerlink" href="#migrate-project-name-app-opt" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">project_name_app.opt</span></code> contain user-configurable pre-processor defines. The
file name is formed by the project name. For example, in the multi_role example
project this file is called <code class="docutils literal notranslate"><span class="pre">multi_role_app.opt</span></code> and
<code class="docutils literal notranslate"><span class="pre">simple_peripheral_app.opt</span></code> in the simple_peripheral example. These defines
will now be located in the SysConfig generated files <code class="docutils literal notranslate"><span class="pre">ble_app_config.opt</span></code> and
<code class="docutils literal notranslate"><span class="pre">ble_config.h</span></code>.</p>
<p>When you have configured these parameters in SysConfig, delete the
<code class="docutils literal notranslate"><span class="pre">simple_peripheral_app.opt</span></code> file from your project.</p>
</div>
<div class="section" id="changes-in-application-file">
<h2>6. Changes in Application File<a class="headerlink" href="#changes-in-application-file" title="Permalink to this headline">¶</a></h2>
<p>For this section, the example project Simple Peripheral will be used as an
example.</p>
<div class="section" id="include-ble-config-h-in-the-application-file">
<h3>Include <code class="docutils literal notranslate"><span class="pre">ble_config.h</span></code> in the application file<a class="headerlink" href="#include-ble-config-h-in-the-application-file" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ble_config.h</span></code> is where most of the parameters defined by SysConfig are stored.
Add the following to you application file (in this case <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ble_config.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="remove-default-application-parameter-defines">
<h3>Remove default application parameter defines<a class="headerlink" href="#remove-default-application-parameter-defines" title="Permalink to this headline">¶</a></h3>
<p>Most of these parameters are now configured in SysConfig.</p>
<p>For Simple Peripheral, the following parameter defines should be removed in the
<code class="docutils literal notranslate"><span class="pre">CONSTANTS</span></code> section of <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos"> 1</span><span class="w">    </span><span class="c1">// Address mode of the local device</span>
</span><span class="hll"><span class="linenos"> 2</span><span class="w">    </span><span class="c1">// Note: When using the DEFAULT_ADDRESS_MODE as ADDRMODE_RANDOM or</span>
</span><span class="hll"><span class="linenos"> 3</span><span class="w">    </span><span class="c1">// ADDRMODE_RP_WITH_RANDOM_ID, GAP_DeviceInit() should be called with</span>
</span><span class="hll"><span class="linenos"> 4</span><span class="w">    </span><span class="c1">// it&#39;s last parameter set to a static random address</span>
</span><span class="hll"><span class="linenos"> 5</span><span class="w">    </span><span class="c1">// #define DEFAULT_ADDRESS_MODE                  ADDRMODE_RP_WITH_PUBLIC_ID</span>
</span><span class="hll"><span class="linenos"> 6</span>
</span><span class="hll"><span class="linenos"> 7</span><span class="w">    </span><span class="c1">// General discoverable mode: advertise indefinitely</span>
</span><span class="hll"><span class="linenos"> 8</span><span class="w">    </span><span class="c1">// #define DEFAULT_DISCOVERABLE_MODE             GAP_ADTYPE_FLAGS_GENERAL</span>
</span><span class="hll"><span class="linenos"> 9</span>
</span><span class="hll"><span class="linenos">10</span><span class="w">    </span><span class="c1">// Minimum connection interval (units of 1.25ms, 80=100ms) for parameter update request</span>
</span><span class="hll"><span class="linenos">11</span><span class="w">    </span><span class="c1">// #define DEFAULT_DESIRED_MIN_CONN_INTERVAL     80</span>
</span><span class="hll"><span class="linenos">12</span>
</span><span class="hll"><span class="linenos">13</span><span class="w">    </span><span class="c1">// Maximum connection interval (units of 1.25ms, 104=130ms) for  parameter update request</span>
</span><span class="hll"><span class="linenos">14</span><span class="w">    </span><span class="c1">// #define DEFAULT_DESIRED_MAX_CONN_INTERVAL     104</span>
</span><span class="hll"><span class="linenos">15</span>
</span><span class="hll"><span class="linenos">16</span><span class="w">    </span><span class="c1">// Slave latency to use for parameter update request</span>
</span><span class="hll"><span class="linenos">17</span><span class="w">    </span><span class="c1">// #define DEFAULT_DESIRED_SLAVE_LATENCY         0</span>
</span><span class="hll"><span class="linenos">18</span>
</span><span class="hll"><span class="linenos">19</span><span class="w">    </span><span class="c1">// Supervision timeout value (units of 10ms, 300=3s) for parameter update request</span>
</span><span class="hll"><span class="linenos">20</span><span class="w">    </span><span class="c1">// #define DEFAULT_DESIRED_CONN_TIMEOUT          300</span>
</span><span class="hll"><span class="linenos">21</span>
</span><span class="hll"><span class="linenos">22</span><span class="w">    </span><span class="c1">// Pass parameter updates to the app for it to decide.</span>
</span><span class="hll"><span class="linenos">23</span><span class="w">    </span><span class="c1">// #define DEFAULT_PARAM_UPDATE_REQ_DECISION     GAP_UPDATE_REQ_PASS_TO_APP</span>
</span><span class="linenos">24</span>
<span class="linenos">25</span><span class="w">    </span><span class="c1">// How often to perform periodic event (in ms)</span>
<span class="linenos">26</span><span class="w">    </span><span class="cp">#define SP_PERIODIC_EVT_PERIOD               5000</span>
<span class="linenos">27</span>
<span class="hll"><span class="linenos">28</span><span class="w">    </span><span class="c1">// How often to read current current RPA (in ms)</span>
</span><span class="hll"><span class="linenos">29</span><span class="w">    </span><span class="c1">// #define SP_READ_RPA_EVT_PERIOD               3000</span>
</span><span class="hll"><span class="linenos">30</span>
</span><span class="hll"><span class="linenos">31</span><span class="w">    </span><span class="c1">// Delay (in ms) after connection establishment before sending a parameter update request</span>
</span><span class="hll"><span class="linenos">32</span><span class="w">    </span><span class="c1">// #define SP_SEND_PARAM_UPDATE_DELAY           6000</span>
</span></pre></div>
</div>
<p>If your application is setting the following parameters in any other way, make
sure they are instead configured in SysConfig.</p>
</div>
<div class="section" id="remove-the-initialization-of-advertisement-data-and-other-local-variables">
<h3>Remove the initialization of advertisement data and other local variables<a class="headerlink" href="#remove-the-initialization-of-advertisement-data-and-other-local-variables" title="Permalink to this headline">¶</a></h3>
<p>Advertisement data is set in the Broadcaster Configuration section of SysConfig.
(Only applicable for BLE Peripherals and BLE Broadcasters.)</p>
<p>For Simple Peripheral, the following lines of code should be removed from the
<code class="docutils literal notranslate"><span class="pre">LOCAL</span> <span class="pre">VARIABLES</span></code> section of <code class="docutils literal notranslate"><span class="pre">simple_peripheral.c</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">    </span><span class="cm">/*********************************************************************</span>
<span class="linenos"> 2</span><span class="cm">    * LOCAL VARIABLES</span>
<span class="linenos"> 3</span><span class="cm">    */</span><span class="w"></span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="c1">// ....</span>
<span class="linenos"> 6</span>
<span class="hll"><span class="linenos"> 7</span><span class="w">    </span><span class="c1">// GAP GATT Attributes</span>
</span><span class="hll"><span class="linenos"> 8</span><span class="w">    </span><span class="c1">// static uint8_t attDeviceName[GAP_DEVICE_NAME_LEN] = &quot;Simple Peripheral&quot;;</span>
</span><span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w">    </span><span class="c1">// Auto connect Disabled/Enabled {0 - Disabled, 1- Group A , 2-Group B, ...}</span>
<span class="linenos">11</span><span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">autoConnect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AUTOCONNECT_DISABLE</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span>
<span class="hll"><span class="linenos">13</span><span class="w">    </span><span class="c1">// Advertisement data</span>
</span><span class="hll"><span class="linenos">14</span><span class="w">    </span><span class="c1">// static uint8_t advertData[] =</span>
</span><span class="hll"><span class="linenos">15</span><span class="w">    </span><span class="c1">// {</span>
</span><span class="hll"><span class="linenos">16</span><span class="w">    </span><span class="c1">//   0x03,</span>
</span><span class="hll"><span class="linenos">17</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_LOCAL_NAME_SHORT,</span>
</span><span class="hll"><span class="linenos">18</span><span class="w">    </span><span class="c1">//   &#39;S&#39;,</span>
</span><span class="hll"><span class="linenos">19</span><span class="w">    </span><span class="c1">//   &#39;P&#39;,</span>
</span><span class="hll"><span class="linenos">20</span><span class="w">    </span><span class="c1">//   0x02,   // length of this data</span>
</span><span class="hll"><span class="linenos">21</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_FLAGS,</span>
</span><span class="hll"><span class="linenos">22</span><span class="w">    </span><span class="c1">//   DEFAULT_DISCOVERABLE_MODE | GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED,</span>
</span><span class="hll"><span class="linenos">23</span>
</span><span class="hll"><span class="linenos">24</span><span class="w">    </span><span class="c1">// service UUID, to notify central devices what services are included</span>
</span><span class="hll"><span class="linenos">25</span><span class="w">    </span><span class="c1">// in this peripheral</span>
</span><span class="hll"><span class="linenos">26</span><span class="w">    </span><span class="c1">//   0x03,   // length of this data</span>
</span><span class="hll"><span class="linenos">27</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_16BIT_MORE,      // some of the UUID&#39;s, but not all</span>
</span><span class="hll"><span class="linenos">28</span><span class="w">    </span><span class="c1">//   LO_UINT16(SIMPLEPROFILE_SERV_UUID),</span>
</span><span class="hll"><span class="linenos">29</span><span class="w">    </span><span class="c1">//   HI_UINT16(SIMPLEPROFILE_SERV_UUID)</span>
</span><span class="hll"><span class="linenos">30</span><span class="w">    </span><span class="c1">// };</span>
</span><span class="hll"><span class="linenos">31</span>
</span><span class="hll"><span class="linenos">32</span><span class="w">    </span><span class="c1">// Scan Response Data</span>
</span><span class="hll"><span class="linenos">33</span><span class="w">    </span><span class="c1">// static uint8_t scanRspData[] =</span>
</span><span class="hll"><span class="linenos">34</span><span class="w">    </span><span class="c1">// {</span>
</span><span class="hll"><span class="linenos">35</span><span class="w">      </span><span class="c1">// complete name</span>
</span><span class="hll"><span class="linenos">36</span><span class="w">    </span><span class="c1">//   17,   // length of this data</span>
</span><span class="hll"><span class="linenos">37</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_LOCAL_NAME_COMPLETE,</span>
</span><span class="hll"><span class="linenos">38</span><span class="w">    </span><span class="c1">//   &#39;S&#39;,</span>
</span><span class="hll"><span class="linenos">39</span><span class="w">    </span><span class="c1">//   &#39;i&#39;,</span>
</span><span class="hll"><span class="linenos">40</span><span class="w">    </span><span class="c1">//   &#39;m&#39;,</span>
</span><span class="hll"><span class="linenos">41</span><span class="w">    </span><span class="c1">//   &#39;p&#39;,</span>
</span><span class="hll"><span class="linenos">42</span><span class="w">    </span><span class="c1">//   &#39;l&#39;,</span>
</span><span class="hll"><span class="linenos">43</span><span class="w">    </span><span class="c1">//   &#39;e&#39;,</span>
</span><span class="hll"><span class="linenos">44</span><span class="w">    </span><span class="c1">//   &#39;P&#39;,</span>
</span><span class="hll"><span class="linenos">45</span><span class="w">    </span><span class="c1">//   &#39;e&#39;,</span>
</span><span class="hll"><span class="linenos">46</span><span class="w">    </span><span class="c1">//   &#39;r&#39;,</span>
</span><span class="hll"><span class="linenos">47</span><span class="w">    </span><span class="c1">//   &#39;i&#39;,</span>
</span><span class="hll"><span class="linenos">48</span><span class="w">    </span><span class="c1">//   &#39;p&#39;,</span>
</span><span class="hll"><span class="linenos">49</span><span class="w">    </span><span class="c1">//   &#39;h&#39;,</span>
</span><span class="hll"><span class="linenos">50</span><span class="w">    </span><span class="c1">//   &#39;e&#39;,</span>
</span><span class="hll"><span class="linenos">51</span><span class="w">    </span><span class="c1">//   &#39;r&#39;,</span>
</span><span class="hll"><span class="linenos">52</span><span class="w">    </span><span class="c1">//   &#39;a&#39;,</span>
</span><span class="hll"><span class="linenos">53</span><span class="w">    </span><span class="c1">//   &#39;l&#39;,</span>
</span><span class="hll"><span class="linenos">54</span>
</span><span class="hll"><span class="linenos">55</span><span class="w">      </span><span class="c1">// connection interval range</span>
</span><span class="hll"><span class="linenos">56</span><span class="w">    </span><span class="c1">//   5,   // length of this data</span>
</span><span class="hll"><span class="linenos">57</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_SLAVE_CONN_INTERVAL_RANGE,</span>
</span><span class="hll"><span class="linenos">58</span><span class="w">    </span><span class="c1">//   LO_UINT16(DEFAULT_DESIRED_MIN_CONN_INTERVAL),   // 100ms</span>
</span><span class="hll"><span class="linenos">59</span><span class="w">    </span><span class="c1">//   HI_UINT16(DEFAULT_DESIRED_MIN_CONN_INTERVAL),</span>
</span><span class="hll"><span class="linenos">60</span><span class="w">    </span><span class="c1">//   LO_UINT16(DEFAULT_DESIRED_MAX_CONN_INTERVAL),   // 1s</span>
</span><span class="hll"><span class="linenos">61</span><span class="w">    </span><span class="c1">//   HI_UINT16(DEFAULT_DESIRED_MAX_CONN_INTERVAL),</span>
</span><span class="hll"><span class="linenos">62</span>
</span><span class="hll"><span class="linenos">63</span><span class="w">      </span><span class="c1">// Tx power level</span>
</span><span class="hll"><span class="linenos">64</span><span class="w">    </span><span class="c1">//   2,   // length of this data</span>
</span><span class="hll"><span class="linenos">65</span><span class="w">    </span><span class="c1">//   GAP_ADTYPE_POWER_LEVEL,</span>
</span><span class="hll"><span class="linenos">66</span><span class="w">    </span><span class="c1">//   0       // 0dBm</span>
</span><span class="hll"><span class="linenos">67</span><span class="w">    </span><span class="c1">// };</span>
</span></pre></div>
</div>
</div>
<div class="section" id="remove-advertisement-sets-parameter-initializations">
<h3>Remove advertisement sets parameter initializations<a class="headerlink" href="#remove-advertisement-sets-parameter-initializations" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">GapAdv_params_t</span> <span class="pre">advParamLegacy</span></code> and <code class="docutils literal notranslate"><span class="pre">GapAdv_params_t</span> <span class="pre">advParamLongRange</span></code> are
not set in the SysConfig generated file <code class="docutils literal notranslate"><span class="pre">ble_config.c</span></code>. These must not be
initialized in the main application source file. (Only applicable to BLE
broadcasters (peripheral, broadcaster, multirole.)).</p>
<p>For example, in SimplePeripheral_init(), the following lines should be removed:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">// Temporary memory for advertising parameters for set #1. These will be copied</span>
<span class="linenos">2</span><span class="c1">// by the GapAdv module</span>
<span class="hll"><span class="linenos">3</span><span class="c1">// GapAdv_params_t advParamLegacy = GAPADV_PARAMS_LEGACY_SCANN_CONN;</span>
</span><span class="linenos">4</span><span class="p">...</span><span class="w"></span>
<span class="linenos">5</span><span class="c1">// Use long range params to create long range set #2</span>
<span class="hll"><span class="linenos">6</span><span class="c1">// GapAdv_params_t advParamLongRange = GAPADV_PARAMS_AE_LONG_RANGE_CONN;</span>
</span></pre></div>
</div>
</div>
<div class="section" id="replace-gap-bond-manager-configuration-block-with-sysconfig-function">
<h3>Replace GAP Bond Manager configuration block with SysConfig function<a class="headerlink" href="#replace-gap-bond-manager-configuration-block-with-sysconfig-function" title="Permalink to this headline">¶</a></h3>
<p>The GAP Bond manager parameters are now configured by SysConfig and generated in
the <code class="docutils literal notranslate"><span class="pre">ble_config.c</span></code> file along with the <code class="docutils literal notranslate"><span class="pre">setBondManagerParameters()</span></code> function
that initialize all the bond manager parameters. This function should to be
called from the application.</p>
<p>Also the defines that were removed from the <code class="docutils literal notranslate"><span class="pre">CONSTANTS</span></code> section of the
application are used throughout the application. If you don’t remove these code
lines you will get compiler errors.</p>
<p>For example, in <code class="docutils literal notranslate"><span class="pre">SimplePeripheral_init()</span></code>, The complete Bond Manager
configuration block should be replaced by the <code class="docutils literal notranslate"><span class="pre">setBondManagerParameters()</span></code>
function call:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/*********************************************************************</span>
<span class="linenos"> 2</span><span class="cm">    * @fn      SimplePeripheral_init</span>
<span class="linenos"> 3</span><span class="cm">    *</span>
<span class="linenos"> 4</span><span class="cm">    * @brief   Called during initialization and contains application</span>
<span class="linenos"> 5</span><span class="cm">    *          specific initialization (ie. hardware initialization/setup,</span>
<span class="linenos"> 6</span><span class="cm">    *          table initialization, power up notification, etc), and</span>
<span class="linenos"> 7</span><span class="cm">    *          profile initialization/setup.</span>
<span class="linenos"> 8</span><span class="cm">    */</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">SimplePeripheral_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">// ...</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">    </span><span class="c1">// Setup the GAP Bond Manager. For more information see the GAP Bond Manager</span>
<span class="linenos">15</span><span class="w">    </span><span class="c1">// section in the User&#39;s Guide:</span>
<span class="linenos">16</span><span class="w">    </span><span class="c1">// http://software-dl.ti.com/lprf/ble5stack-latest/</span>
<span class="hll"><span class="linenos">17</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="linenos">18</span><span class="w">    </span><span class="c1">// Don&#39;t send a pairing request after connecting; the peer device must</span>
</span><span class="hll"><span class="linenos">19</span><span class="w">    </span><span class="c1">// initiate pairing</span>
</span><span class="hll"><span class="linenos">20</span><span class="w">    </span><span class="c1">// uint8_t pairMode = GAPBOND_PAIRING_MODE_WAIT_FOR_REQ;</span>
</span><span class="hll"><span class="linenos">21</span><span class="w">    </span><span class="c1">// Use authenticated pairing: require passcode.</span>
</span><span class="hll"><span class="linenos">22</span><span class="w">    </span><span class="c1">// uint8_t mitm = TRUE;</span>
</span><span class="hll"><span class="linenos">23</span><span class="w">    </span><span class="c1">// This device only has display capabilities. Therefore, it will display the</span>
</span><span class="hll"><span class="linenos">24</span><span class="w">    </span><span class="c1">// passcode during pairing. However, since the default passcode is being</span>
</span><span class="hll"><span class="linenos">25</span><span class="w">    </span><span class="c1">// used, there is no need to display anything.</span>
</span><span class="hll"><span class="linenos">26</span><span class="w">    </span><span class="c1">// uint8_t ioCap = GAPBOND_IO_CAP_DISPLAY_ONLY;</span>
</span><span class="hll"><span class="linenos">27</span><span class="w">    </span><span class="c1">// Request bonding (storing long-term keys for re-encryption upon subsequent</span>
</span><span class="hll"><span class="linenos">28</span><span class="w">    </span><span class="c1">// connections without repairing)</span>
</span><span class="hll"><span class="linenos">29</span><span class="w">    </span><span class="c1">// uint8_t bonding = TRUE;</span>
</span><span class="hll"><span class="linenos">30</span>
</span><span class="hll"><span class="linenos">31</span><span class="w">    </span><span class="c1">// GAPBondMgr_SetParameter(GAPBOND_PAIRING_MODE, sizeof(uint8_t), &amp;pairMode);</span>
</span><span class="hll"><span class="linenos">32</span><span class="w">    </span><span class="c1">// GAPBondMgr_SetParameter(GAPBOND_MITM_PROTECTION, sizeof(uint8_t), &amp;mitm);</span>
</span><span class="hll"><span class="linenos">33</span><span class="w">    </span><span class="c1">// GAPBondMgr_SetParameter(GAPBOND_IO_CAPABILITIES, sizeof(uint8_t), &amp;ioCap);</span>
</span><span class="hll"><span class="linenos">34</span><span class="w">    </span><span class="c1">// GAPBondMgr_SetParameter(GAPBOND_BONDING_ENABLED, sizeof(uint8_t), &amp;bonding);</span>
</span><span class="hll"><span class="linenos">35</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span class="linenos">36</span><span class="w">    </span><span class="n">setBondManagerParameters</span><span class="p">();</span><span class="w"> </span><span class="c1">// Add this function call.</span>
</pre></div>
</div>
<p>The GAPBondManager can be configured in the Bond Manager section of SysConfig.</p>
</div>
<div class="section" id="change-the-name-of-certain-parameters">
<h3>Change the name of certain parameters<a class="headerlink" href="#change-the-name-of-certain-parameters" title="Permalink to this headline">¶</a></h3>
<p>Some parameters have been moved from the application into SysConfig. Please make
sure you are using the correct name of these parameters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 35%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>New Name</p></th>
<th class="head"><p>Old Name</p></th>
<th class="head"><p>SysConfig Section</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ_RPA_PERIOD</p></td>
<td><p>SP_READ_RPA_EVT_PERIOD
SC_READ_RPA_PERIOD</p></td>
<td><p>General Configuration</p></td>
</tr>
<tr class="row-odd"><td><p>SEND_PARAM_UPDATE_DELAY</p></td>
<td><p>SP_SEND_PARAM_UPDATE_DELAY</p></td>
<td><p>Peripheral Configuration</p></td>
</tr>
<tr class="row-even"><td><p>DEFAULT_SCAN_INTERVAL</p></td>
<td><p>SCAN_PARAM_DFLT_INTERVAL</p></td>
<td><p>Observer Configuration</p></td>
</tr>
<tr class="row-odd"><td><p>DEFAULT_SCAN_WINDOW</p></td>
<td><p>SCAN_PARAM_DFLT_INTERVAL</p></td>
<td><p>Observer Configuration</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="changes-in-the-menu-file">
<h2>7. Changes in the Menu File<a class="headerlink" href="#changes-in-the-menu-file" title="Permalink to this headline">¶</a></h2>
<p>Include <code class="docutils literal notranslate"><span class="pre">ble_config.h</span></code> in the application menu file. <code class="docutils literal notranslate"><span class="pre">ble_config.h</span></code> is where
most of the parameters defined by SysConfig are stored. Add the following to your
application file (in this case <code class="docutils literal notranslate"><span class="pre">simple_peripheral_menu.c</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ble_config.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ble-stack-5.x-guide/porting-guides/cc26x2_to_cc26x2x1.html" class="btn btn-neutral float-left" title="CC13x2x1 or CC26x2x1 to CC13x1x3 or CC26x1x3 Software Migration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cc13xx_cc26xx/uart_to_uart2.html" class="btn btn-neutral float-right" title="UART to UART2 Porting Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>