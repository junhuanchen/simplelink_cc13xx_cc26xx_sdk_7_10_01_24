<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Key Storage Overview &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User&#39;s Guide
 2.02.08.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Migrating to a secure environment" href="secure-migration-guide.html" />
    <link rel="prev" title="Trusted Firmware-M Implementation Overview" href="tfm_architecture.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug security-tfm key-storage";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide

          </a>
              <div class="version">
                2.02.08.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/ble5-quick-start.html">TI BLE5-Stack Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/platform-cc13xx_cc26xx.html">The CC13xx or CC26xx SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/freertos-index.html">FreeRTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble-stack-5-index-cc13xx_cc26xx.html">BLE5-Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/developing-with-sdk-index-cc13xx_cc26xx.html">Developing a Bluetooth LE Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coexistence/coexistence.html">Coexistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/localization-index-cc13xx_cc26xx.html">RTLS Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-mesh/index.html">Bluetooth Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/u-stack-index-cc13xx_cc26xx.html">Micro BLE Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/memory-index.html">Memory Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-common/npi-index.html">Network Processor Interface (NPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble5-oad-index-cc13xx_cc26xx.html">TI Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/ble5-oad-index-mcuboot.html">MCUBoot Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Security Features of CC13x4 and CC26x4 Devices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tfm_architecture.html">Trusted Firmware-M Implementation Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Key Storage Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-storage-implementation">Key Storage Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tf-m-enabled-key-storage-implementation">TF-M Enabled Key Storage Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adding-key-storage-to-custom-project">Adding Key Storage to Custom Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="secure-migration-guide.html">Migrating to a secure environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/sysconfig-index-cc13xx_cc26xx.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc13xx_cc26xx.html">Porting Guide and Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/api-reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/reference-cc13xx_cc26xx.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
BLE5-Stack User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../ble-stack-5.x-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Security Features of CC13x4 and CC26x4 Devices</a> &raquo;</li>
      <li>Key Storage Overview</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="key-storage-overview">
<span id="sec-ks-overview"></span><h1>Key Storage Overview<a class="headerlink" href="#key-storage-overview" title="Permalink to this headline">¶</a></h1>
<p>The following sections provide a high level overview of the Key Storage
functionality available in the CC13x4 and CC26x4 family of devices.</p>
<p>Key Storage is the storage mechanism by which the Key Store driver will
retrieve/store keys used for cryptographic operations. This
functionality is used by the application to import, export, generate
and/or destroy plain text keys &amp; certificates with an associated
key identifier. Key Storage keys are stored in a secured partition in TF-M
enabled projects.</p>
<p>We will discuss how Key Storage works as well as how to add Key Storage
to an existing project. <a class="reference external" href="https://www.psacertified.org">Platform Security Architecture</a> Internal Trusted Storage (ITS) service
handles the storage and retrieval of the data in flash and calls TI’s CMSIS driver
to perform any required write, read, or erase operations on internal flash.</p>
</div>
<div class="section" id="key-storage-implementation">
<h1>Key Storage Implementation<a class="headerlink" href="#key-storage-implementation" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Key Storage module is only available in TF-M Enabled projects.</p>
</div>
<p>This implementation requires the KeyStore API to enable its core functionality. The KeyStore API is used interface
with the keys stored in the secured/non-secure partition.</p>
<p>The KeyStore API allows application code to store cryptographic keys and use them
indirectly via a key identifier. The KeyStore API supports the storage of keys generated using
the following algorithms:</p>
<blockquote>
<div><ul class="simple">
<li><p>AES (128, 192, 256-bit keys)</p></li>
<li><p>HMAC (up to 1024-bit keys)</p></li>
<li><p>Elliptic Curve (key pairs with size up to SECP512 curve)</p></li>
</ul>
</div></blockquote>
<p>The KeyStore API provides the following functionality:</p>
<blockquote>
<div><ul class="simple">
<li><p>Import of keys along with their attributes</p></li>
<li><p>Enforcement of policies relating to key usage</p></li>
<li><p>Retrieval of key attributes</p></li>
<li><p>Generation of random keys</p></li>
<li><p>Retrieval of key pre-provisioned keys</p></li>
<li><p>Purging of keys cached in RAM.</p></li>
<li><p>Export of public keys and any keys designated as exportable when originally created.</p></li>
<li><p>Destruction of persistent and volatile keys &amp; certificates.</p></li>
</ul>
</div></blockquote>
<p>Types of keys supported by KeyStore:</p>
<blockquote>
<div><ul class="simple">
<li><p>Volatile keys</p></li>
<li><p>Persistent keys</p></li>
<li><p>Persistent certificates</p></li>
</ul>
</div></blockquote>
<div class="section" id="tf-m-enabled-key-storage-implementation">
<h2>TF-M Enabled Key Storage Implementation<a class="headerlink" href="#tf-m-enabled-key-storage-implementation" title="Permalink to this headline">¶</a></h2>
<p>In the TF-M enabled configuration the keys are stored in the secure partition’s secure memory which cannot be access by the application code.</p>
<p>For additional details on the TF-M enabled configuration, please reference <a class="reference internal" href="tfm_architecture.html#sec-tfm-overview"><span class="std std-ref">Trusted Firmware-M (TF-M)</span></a>.
section of the User’s Guide.</p>
<p>In TF-M enabled projects, the KeyStore API is used to communicate between the non-secure and secure partitions to store and retrieve cryptographic keys.
Since memory is not shared between the secure and non-secure partitions, the KeyStore keys cannot be accessed by the non-secure application.
Both persistent and volatile keys are owned by the partition which called the key import API and pre-provisioned keys have
predefined owners.</p>
</div>
</div>
<div class="section" id="adding-key-storage-to-custom-project">
<h1>Adding Key Storage to Custom Project<a class="headerlink" href="#adding-key-storage-to-custom-project" title="Permalink to this headline">¶</a></h1>
<p>A few relevant APIs are listed in the following table for future reference:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-number">Table 48. </span><span class="caption-text">Relevant KeyStore APIs</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>KeyStore API</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_init()</span></code></p></td>
<td><p>Initializes the KeyStore driver</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_setKeyId()</span></code></p></td>
<td><p>Sets the key ID attribute</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_setKeyLifetime()</span></code></p></td>
<td><p>Sets the key Lifetime attribute</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_setKeyType()</span></code></p></td>
<td><p>Sets the key type attribute</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_setKeyUsageFlags()</span></code></p></td>
<td><p>Sets the key usage flags attribute</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_setKeyAlgorithm()</span></code></p></td>
<td><p>Sets the key algorithm attribute</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_importKey()</span></code></p></td>
<td><p>Stores a plaintext key in KeyStore</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_initKey()</span></code></p></td>
<td><p>Initializes a <code class="docutils literal notranslate"><span class="pre">CryptoKey</span></code> type</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_initBlankKey()</span></code></p></td>
<td><p>Initializes a blank <code class="docutils literal notranslate"><span class="pre">CryptoKey</span></code> type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_exportKey()</span></code></p></td>
<td><p>Export a key in binary format, if allowed by key properties</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_exportPublicKey()</span></code></p></td>
<td><p>Export a public key or the public part of a key pair in binary format</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_purgeKey()</span></code></p></td>
<td><p>Remove non-essential copies of key material from memory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">KeyStore_PSA_destroyKey()</span></code></p></td>
<td><p>Destroy a key</p></td>
</tr>
</tbody>
</table>
<p>The following code example showcases how to create a KeyStore key and how to import the key after creation.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">KeyStore_PSA_key_file_id_t</span><span class="w"> </span><span class="n">keyID</span><span class="p">;</span><span class="w"></span>
<span class="kt">int_fast16_t</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w"></span>
<span class="n">KeyStore_PSA_key_attributes_t</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ATTRIBUTES_INIT</span><span class="p">;</span><span class="w"></span>

<span class="n">KeyStore_PSA_setKeyUsageFlags</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">KEYSTORE_PSA_KEY_USAGE_DECRYPT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_USAGE_ENCRYPT</span><span class="p">));</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyAlgorithm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_ALG_CCM</span><span class="p">);</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyType</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_TYPE_AES</span><span class="p">);</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyLifetime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_LIFETIME_PERSISTENT</span><span class="p">);</span><span class="w"></span>
<span class="n">keyID</span><span class="p">.</span><span class="n">key_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ID_PERSISTENT_USER_MIN</span><span class="p">;</span><span class="w"></span>
<span class="n">GET_KEY_ID</span><span class="p">(</span><span class="n">keyID</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ID_PERSISTENT_USER_MIN</span><span class="p">);</span><span class="w"></span>

<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KeyStore_PSA_importKey</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="n">symmetricKeyMaterial</span><span class="p">,</span><span class="w"> </span><span class="n">AES_KEY_LENGTH</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">keyID</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The code example shown above may be used as a reference for adding Key Storage to a project that
does not currently have Key Storage capabilities.</p>
<p>As a reference point, the code example showed below shows how to use AESCCM encryption with a key identifier from
Key Storage.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">AESCCM_Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">;</span><span class="w"></span>
<span class="n">AESCCM_Operation</span><span class="w"> </span><span class="n">operation</span><span class="p">;</span><span class="w"></span>
<span class="n">CryptoKey</span><span class="w"> </span><span class="n">symmetricKey</span><span class="p">;</span><span class="w"></span>

<span class="c1">//...</span>

<span class="n">CryptoKeyPlaintext_initKey</span><span class="o">&amp;</span><span class="n">symmetricKey</span><span class="p">,</span><span class="w"> </span><span class="n">symmetricKeyMaterial</span><span class="p">,</span><span class="w"> </span><span class="n">AES_KEY_LENGTH</span><span class="p">);</span><span class="w"></span>

<span class="c1">//...</span>

<span class="n">operation</span><span class="p">.</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">symmetricKey</span><span class="p">;</span><span class="w"></span>

<span class="c1">//...</span>

<span class="n">encryptionResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AESCCM_oneStepEncrypt</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">operation</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The code example shown above may be modified to use Key Storage as shown below:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">AESCCM_Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">;</span><span class="w"></span>
<span class="n">AESCCM_Operation</span><span class="w"> </span><span class="n">operation</span><span class="p">;</span><span class="w"></span>
<span class="n">KeyStore_PSA_key_file_id_t</span><span class="w"> </span><span class="n">keyID</span><span class="p">;</span><span class="w"></span>
<span class="kt">int_fast16_t</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w"></span>
<span class="n">KeyStore_PSA_key_attributes_t</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ATTRIBUTES_INIT</span><span class="p">;</span><span class="w"></span>

<span class="n">KeyStore_PSA_setKeyUsageFlags</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">KEYSTORE_PSA_KEY_USAGE_DECRYPT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_USAGE_ENCRYPT</span><span class="p">));</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyAlgorithm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_ALG_CCM</span><span class="p">);</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyType</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_TYPE_AES</span><span class="p">);</span><span class="w"></span>
<span class="n">KeyStore_PSA_setKeyLifetime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_LIFETIME_PERSISTENT</span><span class="p">);</span><span class="w"></span>
<span class="n">keyID</span><span class="p">.</span><span class="n">key_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ID_PERSISTENT_USER_MIN</span><span class="p">;</span><span class="w"></span>
<span class="n">GET_KEY_ID</span><span class="p">(</span><span class="n">keyID</span><span class="p">,</span><span class="w"> </span><span class="n">KEYSTORE_PSA_KEY_ID_PERSISTENT_USER_MIN</span><span class="p">);</span><span class="w"></span>

<span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">KeyStore_PSA_importKey</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attributes</span><span class="p">,</span><span class="n">symmetricKeyMaterial</span><span class="p">,</span><span class="w"> </span><span class="n">AES_KEY_LENGTH</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">keyID</span><span class="p">);</span><span class="w"></span>
<span class="n">KeyStore_PSA_initKey</span><span class="p">(</span><span class="o">&amp;</span><span class="n">symmetricKey</span><span class="p">,</span><span class="w"> </span><span class="n">keyID</span><span class="p">,</span><span class="w"> </span><span class="n">AES_KEY_LENGTH</span><span class="p">);</span><span class="w"></span>

<span class="c1">//...</span>

<span class="n">operation</span><span class="p">.</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">symmetricKey</span><span class="p">;</span><span class="w"></span>

<span class="c1">//...</span>

<span class="n">encryptionResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AESCCM_oneStepEncrypt</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">operation</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt>For more information about the  the KeyStore API please reference the following API references:</dt><dd><ul class="simple">
<li><p><span>cryptoutils/cryptokey/CryptoKeyKeyStore_PSA.h</span></p></li>
<li><p><span>cryptoutils/cryptokey/CryptoKeyKeyStore_PSA_init.h</span></p></li>
</ul>
</dd>
</dl>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tfm_architecture.html" class="btn btn-neutral float-left" title="Trusted Firmware-M Implementation Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="secure-migration-guide.html" class="btn btn-neutral float-right" title="Migrating to a secure environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>