<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Architectural Overview &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
DMM User&#39;s Guide
 5.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Application States and Scheduling Policies" href="states-and-policies.html" />
    <link rel="prev" title="Dynamic Multi-protocol Manager (DMM)" href="../dmm-guide/dmm-index-cc13xx_cc26xx.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug dmm architecture";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../dmm-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
DMM User's Guide

          </a>
              <div class="version">
                5.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/dmm-quick-start.html">Dynamic Multi-protocol Manager Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/tirtos-index.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dmm-guide/dmm-index-cc13xx_cc26xx.html">Dynamic Multi-protocol Manager (DMM)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Architectural Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="states-and-policies.html">Application States and Scheduling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduling.html">RF Command Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">System Performance and Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="example-applications.html">Example Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/custom-hardware-cc13xx_cc26xx.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/oad-secure-index.html">Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/sysconfig-index-cc13xx_cc26xx.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/index-migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/reference.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../dmm-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
DMM User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../dmm-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../dmm-guide/dmm-index-cc13xx_cc26xx.html">Dynamic Multi-protocol Manager (DMM)</a> &raquo;</li>
      <li>Architectural Overview</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="architectural-overview">
<span id="sec-dmm-architecture"></span><h1>Architectural Overview<a class="headerlink" href="#architectural-overview" title="Permalink to this headline">¶</a></h1>
<p>The Dynamic Multi-protocol Manger (<a class="reference internal" href="../dmm-guide/reference.html#term-DMM"><span class="xref std std-term">DMM</span></a>) is an arbiter of RF commands
between multiple protocol stacks and the RF Driver. It controls the scheduling
of RF commands by providing a set of hooks to the RF driver, replacing the
default scheduling behavior.</p>
<p>DMM bases scheduling on the constraints and requirements set by the policy
table and global priority table, and has the ability to re-order the RF
command queue provided by the RF driver as needed. DMM also intercepts RF
driver API calls and can, in certain scenarios, perform additional changes to
the RF commands besides the scheduling order based on the current policy and
scheduled stack activity.</p>
<p>The diagram below shows how the DMM interacts with the protocol stacks and
user application.</p>
<div class="figure align-center" id="id2">
<img alt="../_images/dmm-overview.png" src="../_images/dmm-overview.png" />
<p class="caption"><span class="caption-number">Figure 28. </span><span class="caption-text">DMM architectural overview block diagram</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The red blocks in the block diagram above are part of the DMM component. The
other components (RF Driver, application task, protocol stack) would be
present in a typical single mode application. From the diagram above, it can
be seen that DMM is made up of two primary components:</p>
<blockquote>
<div><ul class="simple">
<li><p>DMM scheduler</p></li>
<li><p>DMM policy manager</p></li>
</ul>
</div></blockquote>
<p>The DMM scheduler is as a single component in the application. It keeps track
of RF commands submitted by each stack and PHY switching events originating in
the RF driver. The DMM policy manager knows the current state of each stack
application as well as what scheduling parameters to use for a specific
combination of application states. The scheduler gets information from the
policy manager on how to perform scheduling of the associated stacks.</p>
<p>Initialization of the policy manager and scheduler happens in
<a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__policy_8h.html#a0628d93d02aa11182608c8fb38fe27b0">DMMPolicy_init()</a> and <a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__scheduler_8h.html#a8b759869efad3b4428ba1cbd5a31a2be">DMMSch_init()</a>. Before any of the
modules are used, the modules need to be opened by calls to
<a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__policy_8h.html#ab734042a6d7057a69b68dd438de2f7fd">DMMPolicy_open()</a> and <a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__scheduler_8h.html#ad53b1679ba0e2557222075ceffa0c8ed">DMMSch_open()</a>.</p>
<p>Setting up the antenna switching is important if one stack operates in the 2.4
GHz band while the other uses the Sub-1 GHz band. DMM is not able to directly
control the antenna switching, but is typically handled by RF driver callbacks
registered in the project’s board file.</p>
<p>The <a class="reference internal" href="../dmm-guide/api-reference.html#dmm-api-reference"><span class="std std-ref">DMM scheduler</span></a> software redefines some of the
command execution APIs of the RF driver. Therefore, when using a function
mapping table like below, no changes to the stack implementation would be
needed.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 18. </span><span class="caption-text">DMM RF API remapping</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ti/dmm/dmm_scheduler.h&gt;</span><span class="cp"></span>

<span class="cp">#define RF_open             DMMSch_rfOpen</span>
<span class="cp">#define RF_postCmd          DMMSch_rfPostCmd</span>
<span class="cp">#define RF_runCmd           DMMSch_rfRunCmd</span>
<span class="cp">#define RF_scheduleCmd      DMMSch_rfScheduleCmd</span>
<span class="cp">#define RF_runScheduleCmd   DMMSch_rfRunScheduleCmd</span>
<span class="cp">#define RF_cancelCmd        DMMSch_rfCancelCmd</span>
<span class="cp">#define RF_flushCmd         DMMSch_rfFlushCmd</span>
<span class="cp">#define RF_runImmediateCmd  DMMSch_rfRunImmediateCmd</span>
<span class="cp">#define RF_runDirectCmd     DMMSch_rfRunDirectCmd</span>
</pre></div>
</div>
</div>
<p>The DMM scheduler does not redefine all RF APIs, most of them are left as is.
Primarily, the DMM intercepts <a class="reference external" href="../../../rflib/html/group__rf__driver.html#ga1175bb5ce9b32dfc102482e8cfbb2f5b">RF_open()</a>. The DMM scheduler provides
the RF driver hooks for scheduling and execution of RF commands.</p>
<p>When the scheduler hook is invoked from the RF driver, the DMM will update the
priority based on the active policy and scheduled stack activity. It will then
inspect the command and based on the active policy, it will either:</p>
<blockquote>
<div><ul class="simple">
<li><p>Put the commands in the queue as is</p></li>
<li><p>Put the command in the queue with a delayed start time</p></li>
<li><p>Call conflict resolution hook if there is a conflict in time</p></li>
<li><p>Cancel the command based on current policy</p></li>
</ul>
</div></blockquote>
<p>The execution hook is invoked from the RF driver when a command from the
queue is about to be run. The DMM will at this point decide based on the
current active policy and status whether to run the command or not. This includes
solving potential conflict between commands and means it will either:</p>
<blockquote>
<div><ul class="simple">
<li><p>Cancel the conflicting command</p></li>
<li><p>Cancel a command if the stack has been blocked by the application</p></li>
<li><p>Delay one of the conflicting commands</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For further information on how a stack may be blocked by the application,
see the <a class="reference internal" href="states-and-policies.html#subsec-dmm-block-mode"><span class="std std-ref">Block Mode</span></a> section in the
<a class="reference internal" href="states-and-policies.html#sec-dmm-policy"><span class="std std-ref">Application States and Scheduling Policies</span></a></p>
</div>
<p>A stack is registered by calling <a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__scheduler_8h.html#a1628a99f53b1b2431cadfd83cd1b9823">DMMSch_registerClient()</a>. The DMM
scheduler assumes that each stack operates in a separate <a class="reference internal" href="../tirtos/tasks.html#sec-rtos-overview-tasks"><span class="std std-ref">TI-RTOS7 task</span></a>. Since the remapped RF driver functions do not know
anything about tasks, the task handle submitted during registration is later
being used to deduce the current active stack in each function call.</p>
<p>The actual command scheduling is fully transparent for the application. It is
only necessary to update the policy manager with the current application
state. This is done using the <a class="reference external" href="../../../../dmm/doxygen/dmm/html/dmm__policy_8h.html#a3b80c97cb962dad0928eb42f6bf44c1b">DMMPolicy_updateStackState</a> API.</p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../dmm-guide/dmm-index-cc13xx_cc26xx.html" class="btn btn-neutral float-left" title="Dynamic Multi-protocol Manager (DMM)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="states-and-policies.html" class="btn btn-neutral float-right" title="Application States and Scheduling Policies" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>