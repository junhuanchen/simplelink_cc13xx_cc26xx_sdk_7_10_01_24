<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Performance and Limitations &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
DMM User&#39;s Guide
 5.10.01 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example Applications" href="example-applications.html" />
    <link rel="prev" title="RF Command Scheduling" href="scheduling.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug dmm performance";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../dmm-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
DMM User's Guide

          </a>
              <div class="version">
                5.10.01
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/dmm-quick-start.html">Dynamic Multi-protocol Manager Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/tirtos-index.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dmm-guide/dmm-index-cc13xx_cc26xx.html">Dynamic Multi-protocol Manager (DMM)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architectural Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="states-and-policies.html">Application States and Scheduling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduling.html">RF Command Scheduling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">System Performance and Limitations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dmm-current-limitations">DMM Current Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protocol-stack-limitations">Protocol Stack Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bit-rate-and-transmission-time">Bit Rate and Transmission Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#end-to-end-stack-reliance-and-latency">End-to-End Stack Reliance and Latency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#estimating-throughput">Estimating Throughput</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-simple-estimate">The Simple Estimate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-absolute-timing-case">The Absolute Timing Case</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-periodic-event-case">The Periodic Event Case</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#long-range-mode-lrm-phy-considerations">Long Range Mode (LRM) PHY Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adjusting-the-ble-connection-interval">Adjusting the BLE Connection Interval</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-ble-connections">Multiple BLE Connections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="example-applications.html">Example Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/custom-hardware-cc13xx_cc26xx.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/oad-secure-index.html">Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/sysconfig-index-cc13xx_cc26xx.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/index-migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmm-guide/reference.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../dmm-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
DMM User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../dmm-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../dmm-guide/dmm-index-cc13xx_cc26xx.html">Dynamic Multi-protocol Manager (DMM)</a> &raquo;</li>
      <li>System Performance and Limitations</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="system-performance-and-limitations">
<span id="sec-dmm-performance"></span><h1>System Performance and Limitations<a class="headerlink" href="#system-performance-and-limitations" title="Permalink to this headline">¶</a></h1>
<p>The typical use case for DMM is a smart phone being used to interface with a
multi-protocol TI device, such as a CC13xx or CC26xx device, and an application on the
smart phone to control or configure the device or a network of devices.
Typically the BLE connection is not used for streaming content, but only
intermittent information exchange.</p>
<div class="section" id="dmm-current-limitations">
<h2>DMM Current Limitations<a class="headerlink" href="#dmm-current-limitations" title="Permalink to this headline">¶</a></h2>
<p>The current DMM implementation has the following limitations:</p>
<ul class="simple">
<li><p>The DMM only supports 2 simultaneous stacks.</p></li>
<li><p>The DMM scheduler does NOT pause a stack regardless of the policy settings.
When a policy enters a pause state, an application callback is invoked to
notify the stack that it should pause its activity. The pause policy should
only be used if the application callback has been implemented and registered
with DMM.</p></li>
<li><p>The DMM has only been tested/characterized with the stack and role combinations
covered by the examples provided in the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>.</p></li>
<li><p>The DMM does not perform arbitration of peripherals or hardware other than the
RF Core. The high level applications must be written in such a way that
conflicting access to peripherals is avoided.</p></li>
<li><p>The DMM BLE examples are tested for up to four concurrent BLE connections.
Please note that connecting to multiple peers over BLE requires more resources
(SRAM, radio time).</p></li>
</ul>
</div>
<div class="section" id="protocol-stack-limitations">
<h2>Protocol Stack Limitations<a class="headerlink" href="#protocol-stack-limitations" title="Permalink to this headline">¶</a></h2>
<p>The DMM will attempt to maximize the time domain utilization of the radio
while still respecting the constraints of the protocol stacks that are using
it. However, unlike CPU scheduling RF commands cannot resume once they have
been canceled or preempted. Combining two protocol stacks means that there
must be application defined limits of the parameters that can be used by each
stack based on what the application needs to operate. Time-synchronous
protocols such as BLE further increase these limitations.</p>
<p>For example, assuming a low-priority BLE connection in connected state, the
application must make sure that the BLE-Stack is able to operate within the
supervision timeout of the connection(s) to avoid disconnecting from the peer
device(s).</p>
<p>TI has characterized a subset of possible protocol stack combinations. TI does
<em>not</em> guarantee proper operations for other stack combinations. Below is a
list of the characterized stack combinations:</p>
<ul class="simple">
<li><p>BLE5 Peripheral + TI 15.4 Collector (all modes)</p></li>
<li><p>BLE5 Peripheral + TI 15.4 Sensor (all modes)</p></li>
<li><p>BLE5 Peripheral + Zigbee Coordinator</p></li>
<li><p>BLE5 Peripheral + Zigbee Router</p></li>
<li><p>BLE5 Peripheral + Zigbee End Device</p></li>
</ul>
<p>The TI-characterized use cases are available as example projects in the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>.
While only a limited subset has been characterized by TI, possible protocol stack
combinations are not limited to these.</p>
<p>Before using DMM to combine two arbitrary protocol stacks, a basic analysis
should be done to determine the feasibility of said combination:</p>
<ul class="simple">
<li><p>Do both stacks support DMM, i.e. implement the DMM RF mapping table?</p></li>
<li><p>If two instances of one stack are needed, does the stack support multiple
instances?</p></li>
<li><p>What are the radio requirements of the stack application? Is there enough
free radio time to accommodate both stacks?</p></li>
<li><p>How will the stacks handle being rejected radio access? What level of
rejection is acceptable?</p></li>
</ul>
<p>Following the initial feasibility analysis, the use case of each stack should
be considered to determine what application states exist for each stack. An initial
policy table should then be created based on the defined application states.</p>
<p>In order to optimize the DMM performance for a given set of stacks, the
individual stack parameters also need to be tweaked to improve the
co-existence of the two stacks. An example of this would be the connection
interval and supervision timeout of a BLE5 connection, or the report interval of
a 15.4-Stack Sensor example.</p>
</div>
<div class="section" id="bit-rate-and-transmission-time">
<h2>Bit Rate and Transmission Time<a class="headerlink" href="#bit-rate-and-transmission-time" title="Permalink to this headline">¶</a></h2>
<p>When choosing a PHY for your stack, the bit rate of that PHY will directly
impact the feasibility of the DMM system. The bit rate is proportional to the
amount of time required to complete the transmissions, which means a lower bit
rate requires the DMM device to use the radio more to complete the
transmission.</p>
<p>In some cases it can be useful to calculate the amount of radio time is
required to complete a transmission of a given length based on the selected
PHY. This could for instance help to decide how long intervals need to be.</p>
<p>Calculating the transmission time requires you to know the PHY protocol data
unit (PPDU), which is PHY dependent. In most cases, this includes knowing the
preamble length, syncword length, PHY header length, packet length and CRC
length. The transmission time is then calculated as the PPDU divided by the
bit rate.</p>
<div class="math">
<p><img src="../_images/math/08f6b29d9d7dd18c9905e115602010f3c14d34b9.svg" alt="\text{PPDU}\ [\text{bit}] &amp;= \text{preamble length} + \text{syncword length} + \text{PHY header length} + \text{packet length} + \text{CRC length}\\
\text{transmission time}\ [\text{s}] &amp;= \text{PPDU} / \text{bit rate}"/></p>
</div></div>
<div class="section" id="end-to-end-stack-reliance-and-latency">
<h2>End-to-End Stack Reliance and Latency<a class="headerlink" href="#end-to-end-stack-reliance-and-latency" title="Permalink to this headline">¶</a></h2>
<p>When looking at a given DMM stack combination, it is important to consider
the DMM impact on the network’s end-to-end reliance and latency. These factors
vary between protocols, stacks and even roles within a stack. Many protocols
such as BLE and Zigbee features for example retry logic to prevent data loss due
to network instability. The same applies to the TI 15.4-Stack offering.</p>
<p>These features mean that even in the DMM use-case, where for example a BLE
peripheral could be starved radio access and suffer in terms if throughput,
the end-to-end reliance should remain stable and the packet loss at 0% (as long
as the connection is maintained).</p>
<p>While retries might solve potential packet losses when running a DMM
system, they will also introduce a (potential) end-to-end latency depending on
how many times a packet has to be retried in order to be successful. Please note
this latency increase is the same for all packet loss reasons, it is not
particular to using DMM.</p>
<p>While, as mentioned above, many protocols and stacks include features to
mitigate network issues, it can still be important to consider impact of these
in the complete system. In cases where a protocol or stack do not support
any such logic, the user is responsible for resending data in case of a DMM
preemption or packet loss.</p>
</div>
<div class="section" id="estimating-throughput">
<h2>Estimating Throughput<a class="headerlink" href="#estimating-throughput" title="Permalink to this headline">¶</a></h2>
<p>Knowing the bit rate and transmission times of the stacks in use, simple
calculations can be made to estimate the theoretical throughput for a given
stack.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following section provides equations to calculate a theoretical estimation
of the expected throughput. The real-life scenario numbers could be varying
depending on factors not included in the theoretical equations.</p>
<p>Internal testing shows that the equations below yields results in line with
what is measured with an error margin of roughly 2 %. As such, they
can be considered a good way to get an initial overview of how well a certain
DMM system might perform.</p>
</div>
<p>The following section will assume two stacks, stack A and stack B, are
being coordinated by DMM.</p>
<div class="section" id="the-simple-estimate">
<h3>The Simple Estimate<a class="headerlink" href="#the-simple-estimate" title="Permalink to this headline">¶</a></h3>
<p>A simplified average throughput estimation, <img class="math" src="../_images/math/45cd0fffb2acf3f4e3565fdff65f14b27f3e5fe0.svg" alt="T"/>, for stack A, assumed to be
operating at maximum throughput, could be defined as follows:</p>
<div class="math">
<p><img src="../_images/math/b224ff5787d73c1f1bee28487202ab5794a2402c.svg" alt="RBW_B [\text{percent}] &amp;= \frac{RTT_B [\text{s}]}{PI_B [\text{s}]}\\
T_A &amp;= 1 - \sum RBW_B(n)"/></p>
</div><p>This assumes that stack B is only sending periodic messages and thus takes up a
given part of the available radio bandwidth (<img class="math" src="../_images/math/805e7e043de6e28ca815f4a3c44628d7bffef9e8.svg" alt="RBW"/>) given in percent. The
radio bandwidth requirement for a particular type of packet is given by the
round trip time (<img class="math" src="../_images/math/ddc47ab34ac4ebd12071fd0a3d07ed763cb830ea.svg" alt="RTT"/>) of that packet type divided by the packet interval
(<img class="math" src="../_images/math/cb90ddf5cbb9217fea4fb6a130ec15e6f4dc1af6.svg" alt="PI"/>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><img class="math" src="../_images/math/cb90ddf5cbb9217fea4fb6a130ec15e6f4dc1af6.svg" alt="PI"/> assumes the packet is set to a higher priority than the running
stack A command. If the packet is not of higher priority then there will be no
impact to the throughput of stack A.</p>
</div>
<p>The average throughput of stack A is defined as the ratio of the throughput of
the standalone application and the theoretically available radio bandwidth in the
DMM use-case. The available radio bandwidth is the remaining radio bandwidth
after subtracting the sum of the bandwidth requirement for each packet type in
stack B that is of a higher priority than stack A.</p>
<p>This simple estimate has some limitations as it assumes non-absolute scheduling.
Non-absolute scheduling corresponds to radio commands that could be delayed by
the DMM scheduler as they have no given fixed time to be sent out. In a real
use-case, it is likely that both stacks use absolute timing to some degree of
the commands.</p>
</div>
<div class="section" id="the-absolute-timing-case">
<h3>The Absolute Timing Case<a class="headerlink" href="#the-absolute-timing-case" title="Permalink to this headline">¶</a></h3>
<p>In the case of an absolute time conflict between two stacks, there would be an
unrecoverable loss of bandwidth that we need to factor into the equation of the
radio bandwidth. For this the following assumptions is made:</p>
<ol class="arabic simple">
<li><p>Stack A, in order to maximize throughput, would resume operations as soon as possible after getting interrupted by an absolute command from stack B</p></li>
<li><p>There is an equal chance that stack A is interrupted at any given time of the operation</p></li>
</ol>
<p>With these assumptions made, the round trip time of stack A’s interrupted packet
is factored in:</p>
<div class="math">
<p><img src="../_images/math/4fc48da49d5d2151ae09ba6ba7dcb890f9f29114.svg" alt="&amp;RBW_B = \frac{RTT_B + \frac{RTT_A}{2}}{PI_B}"/></p>
</div><p>The new definition of radio bandwidth assumes that stack A would maximize
for throughput. This might not always be the case due to power consumption
restrictions. For many protocols, such as BLE, communication is performed on a
periodic event basis which allow for lower power consumption of the devices.</p>
</div>
<div class="section" id="the-periodic-event-case">
<h3>The Periodic Event Case<a class="headerlink" href="#the-periodic-event-case" title="Permalink to this headline">¶</a></h3>
<p>Taking BLE as an example, data exchange is limited to the periodic connection
events only. To get an estimate in this case, we redefine the radio bandwidth as
number of missed events (<img class="math" src="../_images/math/4bfaa3c771ad2bdaa1509107b2c3ee2cf2ad117d.svg" alt="ME"/>) for stack A divided by the total number of
events (<img class="math" src="../_images/math/785dfa7e1716f3bb12c4f015735ff801418f4689.svg" alt="TE"/>) that would occur during a conflicting stack B packet. Again,
the assumption that only non-absolute scheduling is used which means that
stack B would never interrupt an ongoing event:</p>
<div class="math">
<p><img src="../_images/math/ec51055d030c3f5a254e330b9bdf1d9e5a75c5f3.svg" alt="ME_A &amp;= \frac{RTT_B}{PI_A} \\
TE_A &amp;= \frac{PI_B}{PI_A} \\
RBW_B &amp;= \frac{\lceil ME_A \rceil}{TE_A} \\"/></p>
</div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of <img class="math" src="../_images/math/efce35ce4557fba8bb6a5cc50b1fb8a4b8123677.svg" alt="\lceil x \rceil"/> and <img class="math" src="../_images/math/cb699b093a8dd229fcdea5eeb2706d5ebebd0b1c.svg" alt="\lfloor x \rfloor"/> refers to
the ceiling and floor functions respectively. In this case the ceil
value of <img class="math" src="../_images/math/4bfaa3c771ad2bdaa1509107b2c3ee2cf2ad117d.svg" alt="ME"/> is used. This means that any partially missed event is
counted against the maximum bandwidth.</p>
</div>
<p>As previously noted, non-absolute timing might not always be an option and the
absolute time would ideally have to be factored in as well. This is however a
bit more complicated in the periodic event case as the following needs to be
considered:</p>
<ol class="arabic simple">
<li><p>Stack B finishes the operation before the next periodic event of stack A.</p></li>
<li><p>Stack B finish just after stack A has missed the event.</p></li>
</ol>
<p>By calculating the probability (<img class="math" src="../_images/math/ff2174f183eecf6d837e699abe9e8d9ab224a739.svg" alt="P"/>) of case one and two occurring, the
average bandwidth cost could be estimated. This is then used to calculate the
average time lost (<img class="math" src="../_images/math/8132cbbbb85a027f8b212a9d02c8d63bd10384d8.svg" alt="ATL"/>) where the <img class="math" src="../_images/math/a51db14df388b296e76dcaaa7336fdb30637f14a.svg" alt="C1"/> and <img class="math" src="../_images/math/c5fb895a91b38814f61d987d049b503693ac9ec4.svg" alt="C2"/> subscript
refers to the cases mentioned above:</p>
<div class="math">
<p><img src="../_images/math/0b183da1ad3b02ac7ba04e43105ea3651cb65bb8.svg" alt="ATL_{C1} &amp;= PI_A * \lfloor ME_A \rfloor + \frac{PI_A - (RTT_B \% PI_A)}{2} \\
ATL_{C2} &amp;= PI_A * \lceil ME_A \rceil + \frac{RTT_B \% PI_A}{2} \\
P_{C2} &amp;= \frac{RTT_B \% PI_A}{PI_A} \\
ATL_A &amp;= P_{C2} * ATL_{C2} + (1 - P_{C2}) * ATL_{C1} \\"/></p>
</div><p>In the case of <img class="math" src="../_images/math/0c8d503cef1246757c69c7ccf4f985b5833b66d9.svg" alt="ATL_{C1}"/> partially missed events, <img class="math" src="../_images/math/d37ef9f279f181beb0667babdc8c80c72cb4a794.svg" alt="ME_A"/>, are not
counted towards the time lost. Since stack B is assumed to be finished before
stack A’s next event, only the events that are guaranteed to fall inside the
period where stack B is active would be missed. For <img class="math" src="../_images/math/bce7e552b0f262d7395a198d04714c1d1e767038.svg" alt="ATL_{C2}"/>, the
partially missed events is counted towards the time lost. This since stack B is
assumed to finish after the start of the next stack A event.</p>
<p>As the final average time lost, <img class="math" src="../_images/math/66cf38f7d5cb2ca65e78f49b7ea349e0779b43f2.svg" alt="ATL_A"/>, is the same as the time not
available for stack A, the radio bandwidth is given by:</p>
<div class="math">
<p><img src="../_images/math/817cecef9879b424504722bd751f3e433297c893.svg" alt="&amp;RBW_B = \frac{ATL_A}{PI_B}"/></p>
</div><p>The expected throughput is then given by our first equation:</p>
<div class="math">
<p><img src="../_images/math/bdaa460c185506651b0c40e051a6962905aa693d.svg" alt="&amp;T_A = 1 - \sum RBW_B(n)"/></p>
</div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>As <img class="math" src="../_images/math/2919d8f53f69decc7e26b577a944dbe381f59fea.svg" alt="PI_A"/> gets smaller, the difference between the non-absolute and
absolute versions of the radio bandwidth equation approaches each other.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All of the equations above are theoretical and some simplification to a stack’s
assumed scheduling behavior has been made. In reality there are more
limitations then possible to mention as the ultimate behavior depends on the
actual behavior of the stacks used as well as the DMM priorities defined in
the system.</p>
<p>Because of this, they should <em>ONLY</em> serve as a guideline for what could be
expected by a certain stack combination.</p>
</div>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Assume stack A is working alongside a stack B that sends two type of packets:
* 20 byte long packets sent out once every second.
* 200 byte long packets sent out once every 10 seconds.</p>
<p>Depending on the scheduling nature of stack A and stack B, different
equations would be used. These examples showcase the “simple estimate” and the
“periodic event case”. In the “periodic event case” examples are given for
both non-absolute and absolute stack B scheduling. In all cases, stack B is
considered to be of higher priority having a bit rate of 50 kbps.</p>
<p>In the “simple estimate” example, stack A is assumed to constantly be working
to send data out, effectively filling up any remaining bandwidth. It is also
assumed that stack B is using non-absolute scheduling:</p>
<div class="math">
<p><img src="../_images/math/1f9732124610fb5ec3df815ef6cfcbaf9269ed87.svg" alt="RTT_{B[packet 1]} &amp;= \frac{20*8}{50000} [\text{s}] \\
RTT_{B[packet 2]} &amp;= \frac{200*8}{50000} [\text{s}] \\
RBW_{B[packet 1]} &amp;= \frac{RTT_{B[packet 1]}}{1} \\
RBW_{B[packet 2]} &amp;= \frac{RTT_{B[packet 2]}}{10} \\

T_A &amp;= 1-(RBW_{B[packet 1]} + RBW_{B[packet 2]}) \\
T_A &amp;= 1 - 0.0064 \approxeq 99.4\%"/></p>
</div><p>For the “periodic event case” examples, it is assumed that stack A is instead
the BLE stack with a connection event interval set to 100 ms. In the first
example it is assumed that stack B is using non-absolute scheduling:</p>
<div class="math">
<p><img src="../_images/math/813a8ecd2e8e1e99dc88577975ceb72a09eba122.svg" alt="PI_{B[packet 1]} &amp;= 1 \\
ME_{A[packet 1]} &amp;= \frac{RTT_{B[packet 1]}}{0.1} = 0.032 \\
TE_{A[packet 1]} &amp;= \frac{PI_{B[packet 1]}}{0.1} = 10 \\

PI_{B[packet 2]} &amp;= 10 \\
ME_{A[packet 2]} &amp;= \frac{RTT_{B[packet 2]}}{0.1} = 0.32 \\
TE_{A[packet 2]} &amp;= \frac{PI_{B[packet 2]}}{0.1} = 100 \\

RBW_{B[packet 1]} &amp;= \frac{\lceil ME_{A[packet 1]} \rceil}{TE_{A[packet 1]}} = 0.1\\
RBW_{B[packet 2]} &amp;= \frac{\lceil ME_{A[packet 2]} \rceil}{TE_{A[packet 2]}} = 0.01\\

T_A &amp;= 1 - 0.11 \approxeq 89\%"/></p>
</div><p>The second “periodic event case” example assumes that stack B is using absolute
scheduling. Stack A is assumed to be the same as in the first “periodic event
case”:</p>
<div class="math">
<p><img src="../_images/math/e925963d71290121b2340949430edddd310490b9.svg" alt="ME_{A[packet 1]} &amp;= \frac{RTT_{B[packet 1]}}{0.1} = 0.032 \\
ATL_{C1[packet 1]} &amp;= PI_A*\lfloor ME_A \rfloor + \frac{0.1 - (RTT_{B[packet 1]}\%0.1)}{2} = 0.0484 \\
ATL_{C2[packet 1]} &amp;= PI_A*\lceil ME_A \rceil + \frac{RTT_{B[packet 1]}\%0.1}{2} = 0.1016 \\
P_{C2[packet1]} &amp;= \frac{RTT_{B[packet 1]}\%0.1}{0.1} = 0.032 \\

ME_{A[packet 2]} &amp;= \frac{RTT_{B[packet 2]}}{0.1} = 0.32 \\
ATL_{C1[packet 2]} &amp;= 0.1*\lfloor ME_A \rfloor + \frac{0.1 - (RTT_{B[packet 2]}\%0.1)}{2} = 0.034 \\
ATL_{C2[packet 2]} &amp;= 0.1*\lceil ME_A \rceil + \frac{RTT_{B[packet 2]}\%0.1}{2} = 0.116 \\
P_{C2[packet 2]} &amp;= \frac{RTT_{B[packet 2]}\%0.1}{0.1} = 0.32 \\

ATL_{A[packet 1]} &amp;= P_{C2[packet 1]}*ATL_{C2[packet 1]} + (1-P_{C2[packet1]})*ATL_{C1[packet 1]} = 0.050102 \\
ATL_{A[packet 2]} &amp;= P_{C2[packet 2]}*ATL_{C2[packet 2]} + (1-P_{C2[packet2]})*ATL_{C1[packet 2]} = 0.06024 \\

RBW_{B[packet 1]} &amp;= \frac{ATL_{A[packet 1]}}{1} = 0.050102 \\
RBW_{B[packet 2]} &amp;= \frac{ATL_{B[packet 2]}}{10} = 0.006024 \\

T_A &amp;= 1 - 0.056126 \approxeq 94.4\%"/></p>
</div><p>In all the examples, it is clear that stack B is not interfering to much
with stack A as it does not use up much of the radio bandwidth. It can however be
seen that the expected throughput goes down as the assumption on how stack A
access the radio changes from freely polling the radio to be bound to a given
interval.</p>
</div>
</div>
<div class="section" id="long-range-mode-lrm-phy-considerations">
<h2>Long Range Mode (LRM) PHY Considerations<a class="headerlink" href="#long-range-mode-lrm-phy-considerations" title="Permalink to this headline">¶</a></h2>
<p>When a stack operates with the <a class="reference internal" href="../dmm-guide/reference.html#term-SimpleLink-LRM"><span class="xref std std-term">SimpleLink LRM</span></a> PHY, the radio timing
often increases significantly as the bit rate is much lower. For example, the
TI 15.4 default sensor data + MAC Ack require approximately 200 ms of radio
time to complete.</p>
<p>If the stack operating in LRM is considered lower priority in the context of
DMM, this has to be taking into considerations when setting up the radio
interval of the high priority stack to avoid starving the stack using LRM.</p>
<p>A practical example is when combining TI 15.4 together with the BLE-Stack,
where the advertising and connection interval must be chosen to allow
time slots big enough for the TI 15.4-Stack to operate.</p>
</div>
<div class="section" id="adjusting-the-ble-connection-interval">
<h2>Adjusting the BLE Connection Interval<a class="headerlink" href="#adjusting-the-ble-connection-interval" title="Permalink to this headline">¶</a></h2>
<p>The BLE peripheral is not able to directly control the connection interval; it
may, however, request a connection parameter update to the central device.</p>
<p>For more information about the connection parameter update process, refer to
the Generic Access Profile (GAP) Section in the <a class="reference external" href="../../../../ble5stack/ble_user_guide/ble5stack-users-guide.html">BLE5-Stack User’s Guide</a>. In
the GAP chapter there is a section that covers the connection parameter update
process and the APIs needed to perform one.</p>
</div>
<div class="section" id="multiple-ble-connections">
<h2>Multiple BLE Connections<a class="headerlink" href="#multiple-ble-connections" title="Permalink to this headline">¶</a></h2>
<p>The maximum number of BLE connections can be set in SysConfig -&gt; RF STACKS -&gt;
BLE -&gt; General Configuration -&gt; Max Number of Connections. DMM examples are
tested with up to four BLE connections.</p>
<p>In the <a class="reference external" href="../../../../ble5stack/ble_user_guide/ble5stack-users-guide.html">BLE5-Stack User’s Guide</a> you can read more about how the BLE-Stack
handles and prioritizes multiple connections. Please see the Link Layer chapter.</p>
<p>It is recommended to set the <code class="docutils literal notranslate"><span class="pre">Max</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Connections</span></code> as low as possible.
This is because the BLE-Stack will allocate a unique Rx/Tx packet buffer per
connection from the ICall heap. Per default this buffer is around 1 kB. You can
read about these buffers in the <a class="reference external" href="../../../../ble5stack/ble_user_guide/ble5stack-users-guide.html">BLE5-Stack User’s Guide</a>, in the Link Layer
Buffers section.</p>
<p>If you choose to use multiple BLE connections, please remember that each
connection takes the same amount of resources as the first one. The DMM
scheduler will have to schedule twice as many BLE connection events etc. Please
consider how this will affect the other RF protocol stack running in your project.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scheduling.html" class="btn btn-neutral float-left" title="RF Command Scheduling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="example-applications.html" class="btn btn-neutral float-right" title="Example Applications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>