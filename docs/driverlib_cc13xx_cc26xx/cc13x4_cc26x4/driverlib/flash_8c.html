<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.ico" >
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>CC26xx Driver Library: flash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ti_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%">
 <tbody>
 <tr>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CC26xx Driver Library
   </div>
  </td>
  <td id="projectlogo"><a href="http://www.ti.com"><img align="right" alt="Logo" src="ti_logo_header.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('flash_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">flash.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;../inc/hw_types.h&quot;</code><br />
<code>#include &quot;../inc/hw_ccfg.h&quot;</code><br />
<code>#include &quot;../inc/hw_fcfg2.h&quot;</code><br />
<code>#include &quot;<a class="el" href="flash_8h.html">flash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="chipinfo_8h.html">chipinfo.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0deec414b65f0ff3eed4090622aa88db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a0deec414b65f0ff3eed4090622aa88db">CCFG_OFFSET_SECURITY</a>&#160;&#160;&#160;CCFG_O_BL_CONFIG</td></tr>
<tr class="separator:a0deec414b65f0ff3eed4090622aa88db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0aa31cac992635609a2deebcd549ab7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#aa0aa31cac992635609a2deebcd549ab7">CCFG_OFFSET_SECT_PROT</a>&#160;&#160;&#160;CCFG_O_CCFG_WEPROT_31_0_BY2K</td></tr>
<tr class="separator:aa0aa31cac992635609a2deebcd549ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef3757a6660f8f31335f751d3a400cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a9ef3757a6660f8f31335f751d3a400cb">CCFG_SIZE_SECURITY</a>&#160;&#160;&#160;0x00000018</td></tr>
<tr class="separator:a9ef3757a6660f8f31335f751d3a400cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7dcf259421ea88b25355cdd9c4ab597"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#ae7dcf259421ea88b25355cdd9c4ab597">CCFG_SIZE_SECT_PROT</a>&#160;&#160;&#160;0x00000004</td></tr>
<tr class="separator:ae7dcf259421ea88b25355cdd9c4ab597"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0d7f0c6a07a628e82e8465645449bd18"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a0d7f0c6a07a628e82e8465645449bd18">FlashPrgPointer_t</a>) (uint8_t *, uint32_t, uint32_t)</td></tr>
<tr class="separator:a0d7f0c6a07a628e82e8465645449bd18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2722a5d9af3556df719ac7464a2f6ce7"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a2722a5d9af3556df719ac7464a2f6ce7">FlashSectorErasePointer_t</a>) (uint32_t)</td></tr>
<tr class="separator:a2722a5d9af3556df719ac7464a2f6ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a65a79b18e1d8aac07316edff4fd37c96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a65a79b18e1d8aac07316edff4fd37c96">IssueFsmCommand</a> (<a class="el" href="group__flash__api.html#ga74317d740c4f9d1fd97657e624cb16d2">tFlashStateCommandsType</a> eCommand)</td></tr>
<tr class="separator:a65a79b18e1d8aac07316edff4fd37c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91b9b5c21521dffa9a296aff60d6d61a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga91b9b5c21521dffa9a296aff60d6d61a">FlashPowerModeSet</a> (uint32_t ui32PowerMode, uint32_t ui32BankGracePeriod, uint32_t ui32PumpGracePeriod)</td></tr>
<tr class="memdesc:ga91b9b5c21521dffa9a296aff60d6d61a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set power mode.  <a href="group__flash__api.html#ga91b9b5c21521dffa9a296aff60d6d61a">More...</a><br /></td></tr>
<tr class="separator:ga91b9b5c21521dffa9a296aff60d6d61a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4723ad9993c19b938240f374fbb362e3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga4723ad9993c19b938240f374fbb362e3">FlashPowerModeGet</a> (void)</td></tr>
<tr class="memdesc:ga4723ad9993c19b938240f374fbb362e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current configured power mode.  <a href="group__flash__api.html#ga4723ad9993c19b938240f374fbb362e3">More...</a><br /></td></tr>
<tr class="separator:ga4723ad9993c19b938240f374fbb362e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38e87a3a78cd05dec83c404ff0ccc0c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga38e87a3a78cd05dec83c404ff0ccc0c2">FlashProtectionSet</a> (uint32_t ui32SectorAddress, uint32_t ui32ProtectMode)</td></tr>
<tr class="memdesc:ga38e87a3a78cd05dec83c404ff0ccc0c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set sector protection.  <a href="group__flash__api.html#ga38e87a3a78cd05dec83c404ff0ccc0c2">More...</a><br /></td></tr>
<tr class="separator:ga38e87a3a78cd05dec83c404ff0ccc0c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca0d39806f2d9bec6a341712d242647d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gaca0d39806f2d9bec6a341712d242647d">FlashProtectionGet</a> (uint32_t ui32SectorAddress)</td></tr>
<tr class="memdesc:gaca0d39806f2d9bec6a341712d242647d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get sector protection.  <a href="group__flash__api.html#gaca0d39806f2d9bec6a341712d242647d">More...</a><br /></td></tr>
<tr class="separator:gaca0d39806f2d9bec6a341712d242647d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6ceb528432984b641ee26078e088675"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gae6ceb528432984b641ee26078e088675">FlashProtectionSave</a> (uint32_t ui32SectorAddress)</td></tr>
<tr class="memdesc:gae6ceb528432984b641ee26078e088675"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save sector protection to make it permanent.  <a href="group__flash__api.html#gae6ceb528432984b641ee26078e088675">More...</a><br /></td></tr>
<tr class="separator:gae6ceb528432984b641ee26078e088675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace3e1af81dafa8192dc1cd583d246ce9"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">FlashSectorErase</a> (uint32_t ui32SectorAddress)</td></tr>
<tr class="memdesc:gace3e1af81dafa8192dc1cd583d246ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase a flash sector.  <a href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">More...</a><br /></td></tr>
<tr class="separator:gace3e1af81dafa8192dc1cd583d246ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6649430b8d8a9f0fa7f159dbb76fd0ea"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a6649430b8d8a9f0fa7f159dbb76fd0ea">FlashCopyOneFlashWordToHW</a> (uint8_t *pBuf, uint32_t FlashAddr, uint32_t startIdx, uint32_t endIdx)</td></tr>
<tr class="separator:a6649430b8d8a9f0fa7f159dbb76fd0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef40db97ae13451d743febcce8a1a561"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#aef40db97ae13451d743febcce8a1a561">FlashCopyMultiFlashWordToHW</a> (uint8_t *pBuf, uint32_t FlashAddr, uint32_t numBytes)</td></tr>
<tr class="separator:aef40db97ae13451d743febcce8a1a561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d891d79df6dbba0288b15a8c30c1331"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga0d891d79df6dbba0288b15a8c30c1331">FlashProgram</a> (uint8_t *pui8DataBuffer, uint32_t ui32Address, uint32_t ui32Count)</td></tr>
<tr class="memdesc:ga0d891d79df6dbba0288b15a8c30c1331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programs unprotected flash sectors in the main bank.  <a href="group__flash__api.html#ga0d891d79df6dbba0288b15a8c30c1331">More...</a><br /></td></tr>
<tr class="separator:ga0d891d79df6dbba0288b15a8c30c1331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1138abe16257199fbacb5822542919e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gad1138abe16257199fbacb5822542919e">FlashProgram4X</a> (uint8_t *pui8DataBuffer, uint32_t ui32Address, uint32_t ui32Count)</td></tr>
<tr class="separator:gad1138abe16257199fbacb5822542919e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab26816f75d67b77c1c37acf0e58b1c25"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gab26816f75d67b77c1c37acf0e58b1c25">FlashProgramNowait</a> (uint32_t ui32StartAddress, uint8_t *pui8DataBuffer, uint8_t ui8NoOfBytes)</td></tr>
<tr class="memdesc:gab26816f75d67b77c1c37acf0e58b1c25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts programming within unprotected main bank flash sector and returns.  <a href="group__flash__api.html#gab26816f75d67b77c1c37acf0e58b1c25">More...</a><br /></td></tr>
<tr class="separator:gab26816f75d67b77c1c37acf0e58b1c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacecbeef915333831a97d054df9e8fc40"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gacecbeef915333831a97d054df9e8fc40">FlashEfuseReadRow</a> (uint32_t *pui32EfuseData, uint32_t ui32RowAddress)</td></tr>
<tr class="memdesc:gacecbeef915333831a97d054df9e8fc40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads efuse data from specified row.  <a href="group__flash__api.html#gacecbeef915333831a97d054df9e8fc40">More...</a><br /></td></tr>
<tr class="separator:gacecbeef915333831a97d054df9e8fc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09fccd53e3a5c8eb359618faa2c837cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga09fccd53e3a5c8eb359618faa2c837cf">FlashDisableSectorsForWrite</a> (void)</td></tr>
<tr class="memdesc:ga09fccd53e3a5c8eb359618faa2c837cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables all sectors for erase and programming on the active bank.  <a href="group__flash__api.html#ga09fccd53e3a5c8eb359618faa2c837cf">More...</a><br /></td></tr>
<tr class="separator:ga09fccd53e3a5c8eb359618faa2c837cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a236aeb661b703bfcf2138a145eee3992"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash_8c.html#a236aeb661b703bfcf2138a145eee3992">g_pui8CcfgDefaultSec</a> []</td></tr>
<tr class="separator:a236aeb661b703bfcf2138a145eee3992"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa0aa31cac992635609a2deebcd549ab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0aa31cac992635609a2deebcd549ab7">&sect;&nbsp;</a></span>CCFG_OFFSET_SECT_PROT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCFG_OFFSET_SECT_PROT&#160;&#160;&#160;CCFG_O_CCFG_WEPROT_31_0_BY2K</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0deec414b65f0ff3eed4090622aa88db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0deec414b65f0ff3eed4090622aa88db">&sect;&nbsp;</a></span>CCFG_OFFSET_SECURITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCFG_OFFSET_SECURITY&#160;&#160;&#160;CCFG_O_BL_CONFIG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">FlashSectorErase()</a>.</p>

</div>
</div>
<a id="ae7dcf259421ea88b25355cdd9c4ab597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7dcf259421ea88b25355cdd9c4ab597">&sect;&nbsp;</a></span>CCFG_SIZE_SECT_PROT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCFG_SIZE_SECT_PROT&#160;&#160;&#160;0x00000004</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__flash__api.html#gae6ceb528432984b641ee26078e088675">FlashProtectionSave()</a>.</p>

</div>
</div>
<a id="a9ef3757a6660f8f31335f751d3a400cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef3757a6660f8f31335f751d3a400cb">&sect;&nbsp;</a></span>CCFG_SIZE_SECURITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCFG_SIZE_SECURITY&#160;&#160;&#160;0x00000018</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">FlashSectorErase()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a0d7f0c6a07a628e82e8465645449bd18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d7f0c6a07a628e82e8465645449bd18">&sect;&nbsp;</a></span>FlashPrgPointer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t(*  FlashPrgPointer_t) (uint8_t *, uint32_t, uint32_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2722a5d9af3556df719ac7464a2f6ce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2722a5d9af3556df719ac7464a2f6ce7">&sect;&nbsp;</a></span>FlashSectorErasePointer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t(*  FlashSectorErasePointer_t) (uint32_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aef40db97ae13451d743febcce8a1a561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef40db97ae13451d743febcce8a1a561">&sect;&nbsp;</a></span>FlashCopyMultiFlashWordToHW()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FlashCopyMultiFlashWordToHW </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>FlashAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__flash__api.html#ga0d891d79df6dbba0288b15a8c30c1331">FlashProgram()</a>, and <a class="el" href="group__flash__api.html#gad1138abe16257199fbacb5822542919e">FlashProgram4X()</a>.</p>
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    uint32_t wordIdx;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    uint32_t flashdata=0;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    uint32_t cmdDataOffset;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// double check the Flash address is 32 or 64 byte aligned</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">/* based on the Flash addr to figure the cdata index register</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">       1. convert the system byte address to flash word address (&gt;&gt;4)</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">       2. based on the flash word address to find command data index (last 2 bit)</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">       3. cmddataOffset will be 0,32(0x20), 64 (0x40)</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    cmdDataOffset = ((FlashAddr &gt;&gt; 4) &amp; 0x3 ) &lt;&lt; 4 ;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// in 2X/4X program mode, Byte Enable register is required</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// to set to 0xFFFF</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDBYTEN ) = 0xFFFF;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// build data buffer from byte address to Flash word address</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">for</span> (wordIdx = 0; wordIdx &lt; (numBytes &gt;&gt; 2); wordIdx++)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        flashdata = ( pBuf[3] &lt;&lt; 24 ) |</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    ( pBuf[2] &lt;&lt; 16 ) |</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    ( pBuf[1] &lt;&lt; 8  ) |</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    ( pBuf[0] ) ;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        HWREG(NVMNW_BASE + NVMNW_O_CMDDATA0 + cmdDataOffset + (4 * wordIdx)) = flashdata ;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">/* next 4 data byte */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        pBuf += 4;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">return</span> (numBytes);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a6649430b8d8a9f0fa7f159dbb76fd0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6649430b8d8a9f0fa7f159dbb76fd0ea">&sect;&nbsp;</a></span>FlashCopyOneFlashWordToHW()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FlashCopyOneFlashWordToHW </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>FlashAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>endIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__flash__api.html#ga0d891d79df6dbba0288b15a8c30c1331">FlashProgram()</a>, and <a class="el" href="group__flash__api.html#gad1138abe16257199fbacb5822542919e">FlashProgram4X()</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    uint32_t dataBuf[<a class="code" href="group__flash__api.html#gad1a197b96133b94ac87ddd9c919d4320">FLASHWORDSIZE_ONE</a>/4];</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    uint32_t i,wordIdx,byteIdx;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    uint32_t byteEnableVal =0;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    uint32_t cmdDataOffset;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// init the dataBuf to zero</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="group__flash__api.html#gad1a197b96133b94ac87ddd9c919d4320">FLASHWORDSIZE_ONE</a>/4); i++)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        dataBuf[i] = 0x00000000;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// build data buffer from byte address to Flash word address</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// build the byte enable value</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">for</span> (i = startIdx; i &lt;= endIdx; i++)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        byteEnableVal |= 1 &lt;&lt; i ;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        wordIdx = i &gt;&gt; <a class="code" href="group__flash__api.html#ga558a931e9cd08e5760769eef18c95d02">FLASHWORD_SHIFTBIT</a> ;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        byteIdx = i &amp; <a class="code" href="group__flash__api.html#ga069c962685b078639e14558757883ab8">FLASHWORD_MASKBIT</a> ;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        dataBuf[wordIdx] |= (*pBuf) &lt;&lt; ( 8 * byteIdx );</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment">/* next data byte */</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        pBuf++;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">/* based on the Flash addr to figure the cdata index register</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">       1. convert the system byte address to flash word address (&gt;&gt;4)</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">       2. based on the flash word address to find command data index (last 2 bit)</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">       3. cmddataOffset will be 0,16(0x10),32(0x20),48(0x30)</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    cmdDataOffset = ((FlashAddr &gt;&gt; 4) &amp; 0x3 ) &lt;&lt; 4 ;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">/* write the data buffer to Flash Command data buffer */</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDDATA0 + cmdDataOffset ) = dataBuf[0];</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDDATA1 + cmdDataOffset ) = dataBuf[1];</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDDATA2 + cmdDataOffset ) = dataBuf[2];</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDDATA3 + cmdDataOffset ) = dataBuf[3];</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">/* update the byte enable register (mask) */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDBYTEN ) = byteEnableVal;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> (endIdx - startIdx + 1);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div><div class="ttc" id="group__flash__api_html_ga558a931e9cd08e5760769eef18c95d02"><div class="ttname"><a href="group__flash__api.html#ga558a931e9cd08e5760769eef18c95d02">FLASHWORD_SHIFTBIT</a></div><div class="ttdeci">#define FLASHWORD_SHIFTBIT</div><div class="ttdef"><b>Definition:</b> flash.h:162</div></div>
<div class="ttc" id="group__flash__api_html_ga069c962685b078639e14558757883ab8"><div class="ttname"><a href="group__flash__api.html#ga069c962685b078639e14558757883ab8">FLASHWORD_MASKBIT</a></div><div class="ttdeci">#define FLASHWORD_MASKBIT</div><div class="ttdef"><b>Definition:</b> flash.h:163</div></div>
<div class="ttc" id="group__flash__api_html_gad1a197b96133b94ac87ddd9c919d4320"><div class="ttname"><a href="group__flash__api.html#gad1a197b96133b94ac87ddd9c919d4320">FLASHWORDSIZE_ONE</a></div><div class="ttdeci">#define FLASHWORDSIZE_ONE</div><div class="ttdef"><b>Definition:</b> flash.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65a79b18e1d8aac07316edff4fd37c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65a79b18e1d8aac07316edff4fd37c96">&sect;&nbsp;</a></span>IssueFsmCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void IssueFsmCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__flash__api.html#ga74317d740c4f9d1fd97657e624cb16d2">tFlashStateCommandsType</a>&#160;</td>
          <td class="paramname"><em>eCommand</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Issues a command to the Flash State Machine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eCommand</td><td>specifies the FSM command.</td></tr>
  </table>
  </dd>
</dl>
<p>Issues a command to the Flash State Machine.</p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="group__flash__api.html#ga0d891d79df6dbba0288b15a8c30c1331">FlashProgram()</a>, <a class="el" href="group__flash__api.html#gad1138abe16257199fbacb5822542919e">FlashProgram4X()</a>, and <a class="el" href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">FlashSectorErase()</a>.</p>
<div class="fragment"><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// Check the arguments.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a>(</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2ac146eee92f7f72da6b43cb2773fb425d">FAPI_ERASE_SECTOR</a>    || eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a5e5cc34b5c3f813e07209b74ab347c5a">FAPI_ERASE_BANK</a> ||</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a10c9a3529c2aba44bc370bdb3c07cfda">FAPI_PROGRAM_FOURWORD</a> || eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a18661cecd3a92e9decbed779e2f9f8a8">FAPI_CLEAR_STATUS</a> ||</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a54eeb27310f602a64d67de3d68da8d95">FAPI_PROGRAM_ONEWORD</a>  || eCommand == <a class="code" href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a03e9d91b0da085ab8f2dc1478905270d">FAPI_PROGRAM_TWOWORD</a> );</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// write to NW COMMAND Type register</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDTYPE) = eCommand;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// write to NW Execute register</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    HWREG(NVMNW_BASE + NVMNW_O_CMDEXEC) = NVMNW_CMDEXEC_VAL_EXECUTE;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div><div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2a10c9a3529c2aba44bc370bdb3c07cfda"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a10c9a3529c2aba44bc370bdb3c07cfda">FAPI_PROGRAM_FOURWORD</a></div><div class="ttdoc">Program 4 Flash Word Mode. </div><div class="ttdef"><b>Definition:</b> flash.h:176</div></div>
<div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2ac146eee92f7f72da6b43cb2773fb425d"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2ac146eee92f7f72da6b43cb2773fb425d">FAPI_ERASE_SECTOR</a></div><div class="ttdoc">Erase sector. </div><div class="ttdef"><b>Definition:</b> flash.h:179</div></div>
<div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2a54eeb27310f602a64d67de3d68da8d95"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a54eeb27310f602a64d67de3d68da8d95">FAPI_PROGRAM_ONEWORD</a></div><div class="ttdoc">Program 1 Flash word mode. </div><div class="ttdef"><b>Definition:</b> flash.h:178</div></div>
<div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2a18661cecd3a92e9decbed779e2f9f8a8"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a18661cecd3a92e9decbed779e2f9f8a8">FAPI_CLEAR_STATUS</a></div><div class="ttdoc">Clear status. </div><div class="ttdef"><b>Definition:</b> flash.h:181</div></div>
<div class="ttc" id="group__debug__api_html_ga28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="group__debug__api.html#ga28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> debug.h:71</div></div>
<div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2a5e5cc34b5c3f813e07209b74ab347c5a"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a5e5cc34b5c3f813e07209b74ab347c5a">FAPI_ERASE_BANK</a></div><div class="ttdoc">Erase bank. </div><div class="ttdef"><b>Definition:</b> flash.h:180</div></div>
<div class="ttc" id="group__flash__api_html_gga74317d740c4f9d1fd97657e624cb16d2a03e9d91b0da085ab8f2dc1478905270d"><div class="ttname"><a href="group__flash__api.html#gga74317d740c4f9d1fd97657e624cb16d2a03e9d91b0da085ab8f2dc1478905270d">FAPI_PROGRAM_TWOWORD</a></div><div class="ttdoc">Program 4 Flash Word Mode. </div><div class="ttdef"><b>Definition:</b> flash.h:177</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a236aeb661b703bfcf2138a145eee3992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a236aeb661b703bfcf2138a145eee3992">&sect;&nbsp;</a></span>g_pui8CcfgDefaultSec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t g_pui8CcfgDefaultSec[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {0xFF, 0xFF, 0xFF, 0xC5,</div><div class="line">                                        0xFF, 0xFF, 0xFF, 0xFF,</div><div class="line">                                        0xFF, 0xFF, 0xFF, 0xFF,</div><div class="line">                                        0xC5, 0xC5, 0xC5, 0xFF,</div><div class="line">                                        0xC5, 0xC5, 0xC5, 0xFF,</div><div class="line">                                        0xC5, 0xC5, 0xC5, 0xFF</div><div class="line">                                       }</div></div><!-- fragment -->
<p>Referenced by <a class="el" href="group__flash__api.html#gace3e1af81dafa8192dc1cd583d246ce9">FlashSectorErase()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ccfc45fba3c59d28434cf038780bfc66.html">driverlib</a></li><li class="navelem"><a class="el" href="flash_8c.html">flash.c</a></li>
    <li class="footer">&copy Copyright 2015 - 2023 Texas Instruments Incorporated. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
