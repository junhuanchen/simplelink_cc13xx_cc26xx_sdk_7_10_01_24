<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OAD Image Tool &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Thread User&#39;s Guide
 1.10.00.00 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TI-OpenThread Native OAD" href="../thread-oad/native-oad.html" />
    <link rel="prev" title="Flash Layout for Off-Chip OAD" href="flash-layout-off-chip.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug oad-secure tools";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../thread-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Thread User's Guide

          </a>
              <div class="version">
                1.10.00.00
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/quickstart-intro-cc13xx_cc26xx.html">Introduction to the SimpleLink CC13xx/CC26xx SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread/ti-openthread-intro.html">TI-OpenThread Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/tirtos-index.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/software-development-index.html">Developing Thread Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread/thread-protocol.html">Thread Networking Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/custom-hardware-cc13xx_cc26xx.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/packet-sniffer-index.html">Packet Sniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/border-router-index.html">Linux Border Router Quick Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../thread-guide/oad-index.html">Over-the-Air Download (OAD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="oad-types.html">OAD Storage &amp; Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="bim.html">Boot Image Manager (BIM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="bim-off-chip.html">BIM for Off-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="image-header.html">OAD Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext-flash-image-header.html">OAD External Flash Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="flash-layout-off-chip.html">Flash Layout for Off-Chip OAD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">OAD Image Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool">Running the tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tool-from-source">Running the Tool from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-new-security-keys-embedded">Generating New Security Keys (Embedded)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#required-arguments-getting-help">Required Arguments/Getting Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../thread-oad/native-oad.html">TI-OpenThread Native OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thread-oad/non-native-oad.html">Non-native OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thread-oad/create-tiop-oad-image.html">Create a TI-OpenThread OAD Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/sysconfig-index.html">System Configuration (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread-guide/migration-index.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread/glossary.html">Terms and Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../thread-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Thread User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../thread-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../thread-guide/oad-index.html">Over-the-Air Download (OAD)</a> &raquo;</li>
      <li>OAD Image Tool</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="oad-image-tool">
<span id="sec-generating-image-header-vector"></span><span id="sec-oad-tools"></span><h1>OAD Image Tool<a class="headerlink" href="#oad-image-tool" title="Permalink to this headline">¶</a></h1>
<p>The OAD image tool is a script written in python that is intended to process
the compiler output in the form of a hex file and prepare the image for over the
air transfer.</p>
<p>The major components of the oad_image_tool include:</p>
<blockquote>
<div><ul class="simple">
<li><p>Conversion from *.hex to *.bin</p></li>
<li><p>Padding the image to be word aligned</p></li>
<li><p>Calculating the CRC and embedding it in the image header</p></li>
<li><p>Optional: Merging a split image into a single app + stack image</p></li>
<li><p>Optional: Adding security info to the image header if present</p></li>
</ul>
</div></blockquote>
<p>The tool is automatically invoked by the OAD enabled projects in the SDK as a
post build step. For sample invocations refer to the post build steps on these
projects</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OAD Image Tool does not support non-executable types.</p>
</div>
<div class="section" id="running-the-tool">
<h2>Running the tool<a class="headerlink" href="#running-the-tool" title="Permalink to this headline">¶</a></h2>
<p>The OAD Image Tool is distributed in both source and binary form. The correct
binary will be bundled with the installer for a given platform (i.e. Linux,
Windows, Mac). However, the tool can also be run in source if desired.</p>
<p>The tool is intended to run as a post build step to an OAD application.  When
run as a post build step, the tool will generate an output binary file named
<code class="docutils literal notranslate"><span class="pre">&lt;app_name&gt;_oad.bin</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;app_name&gt;</span></code> is the name and path specified by
the required <code class="docutils literal notranslate"><span class="pre">-o</span></code> argument to the script.</p>
<p>It is recommended to use the OAD enabled example application from the intended
protocol stack component of the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a> and copy + modify the post build step as
needed.</p>
</div>
<div class="section" id="running-the-tool-from-source">
<h2>Running the Tool from Source<a class="headerlink" href="#running-the-tool-from-source" title="Permalink to this headline">¶</a></h2>
<p>In general, it is recommended to invoke the tool via the binaries distributed
with the <a class="reference external" href="http://www.ti.com/tool/simplelink-cc13xx-cc26xx-sdk">SimpleLink CC13xx/CC26xx SDK</a>. However if it is required to run the tool in source, the
following steps should be taken:</p>
<blockquote>
<div><ul class="simple">
<li><p>Ensure Python is installed on the system (Python 3 recommended)</p></li>
<li><p>Install the required packages via pip (see <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> in the
same folder as the tool)</p></li>
</ul>
</div></blockquote>
<p>The tool project is located in <code class="docutils literal notranslate"><span class="pre">&lt;SDK_DIR&gt;/tools/common/oad</span></code></p>
</div>
<div class="section" id="generating-new-security-keys-embedded">
<span id="sec-gen-security-keys"></span><h2>Generating New Security Keys (Embedded)<a class="headerlink" href="#generating-new-security-keys-embedded" title="Permalink to this headline">¶</a></h2>
<p>By default, public and private keys will be provided in the <code class="docutils literal notranslate"><span class="pre">private.pem</span></code>
and <code class="docutils literal notranslate"><span class="pre">public.pem</span></code> files. The private key will be used by the OAD image tool to
sign the application image before outputting the binary. The path to the private
key must be provided if using using security, this is provided using the <code class="docutils literal notranslate"><span class="pre">-k</span></code>
option. You must be using the secure version of the tool to do this.</p>
<p>The default keys are also installed in the BIM projects in order for the out of
box demos to work.</p>
<p>However, before production it is recommended that the customer generate new
keys using the process detailed below:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">key_generate.py</span></code> script requires use of Python 3.7 to behave as expected.</p>
</div>
<ol class="arabic simple">
<li><p>Generate a new key pair by calling <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">keys/key_generate.py</span></code> from
within the OAD tool folder. This will override the existing <code class="docutils literal notranslate"><span class="pre">private.pem</span></code>
<code class="docutils literal notranslate"><span class="pre">public.pem</span></code>, and <code class="docutils literal notranslate"><span class="pre">key_info.txt</span></code> files.</p></li>
<li><p>Replace the keys used by the BIM with the new ones generated by the tool.
The code snippet below shows how to do this.
Replace the “NEW ** HERE” placeholders below with the contents of
the appropriate line in the <code class="docutils literal notranslate"><span class="pre">key_info.txt</span></code> file.</p></li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">version</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">SECURE_SIGN_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">len</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">SECURE_CERT_LENGTH</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">options</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">SECURE_CERT_OPTIONS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">signerInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="cm">/* NEW SIGNER INFO HERE */</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">certPayload</span><span class="p">.</span><span class="n">eccKey</span><span class="p">.</span><span class="n">pubKeyX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="cm">/* NEW PUB KEY X HERE */</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">certPayload</span><span class="p">.</span><span class="n">eccKey</span><span class="p">.</span><span class="n">pubKeyY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="cm">/* NEW PUB KEY Y HERE */</span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The structure above can be found in the following file:</p></li>
</ol>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 37%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>CC2640R2F</p></th>
<th class="head"><p>CC13xx/CC26xx</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Off-chip OAD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>On-chip OAD</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bim_onchip.c</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bim_main.c</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to add proper C style syntax to the key arrays when pasting
them into the BIM files. Be sure to add a comma between each element and
prepends all hex values with <code class="docutils literal notranslate"><span class="pre">0x</span></code>. Refer to the placeholder keys for
more information.</p>
</div>
</div>
<div class="section" id="required-arguments-getting-help">
<h2>Required Arguments/Getting Help<a class="headerlink" href="#required-arguments-getting-help" title="Permalink to this headline">¶</a></h2>
<p>If help is needed when running the tool, invoke it with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option which
will describe the supported features of the tool, the arguments and the actions
they perform.  Usage is as follows:</p>
<pre class="literal-block">python oad_image_tool.py -h
usage: oad_image_tool [-h] [-v] [-verbose] [-hex1 HEXPATH1] [-bdf BDFILEPATH]
                      [-hex2 [HEXPATH2]] [-k [KEYFILE]] -o OUTPUT
                      ProjType ProjDir BinaryType

OAD Hex to Binary Converter version

positional arguments:
  ProjType              Target project Type: (iar/ccs)
  ProjDir               Target project directory
  BinaryType            Persistent App = 0, Application = 1, Stack = 2,
                        Application + Stack Combined = 3, Application + Stack
                        Merged = 7

optional arguments:
  -h, --help            show this help message and exit
  -v, --version         show program's version number and exit
  -verbose, --verbose
  -hex1 HEXPATH1, --HexPath1 HEXPATH1
                        First .hex file path (app/stack)
  -bdf BDFILEPATH, --bdFilePath BDFILEPATH
                        Boundary file path
  -hex2 [HEXPATH2], --HexPath2 [HEXPATH2]
                        Second .hex file name (app/stack)
  -k [KEYFILE], --keyFile [KEYFILE]
                        Provide the location of the file containing your
                        private key
  -o OUTPUT, --output OUTPUT
                        Path and filename of output file(s) without extension</pre>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="flash-layout-off-chip.html" class="btn btn-neutral float-left" title="Flash Layout for Off-Chip OAD" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../thread-oad/native-oad.html" class="btn btn-neutral float-right" title="TI-OpenThread Native OAD" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>