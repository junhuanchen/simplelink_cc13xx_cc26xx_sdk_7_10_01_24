<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>OpenThread: TREL - Platform</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenThread
   &#160;<span id="projectnumber">1.05.03.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TREL - Platform<div class="ingroups"><a class="el" href="group__platform.html">Platform Abstraction</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This module includes the platform abstraction for Thread Radio Encapsulation Link (TREL) using DNS-SD and UDP/IPv6.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for TREL - Platform:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__plat-trel.png" border="0" alt="" usemap="#group____plat-trel"/>
<map name="group____plat-trel" id="group____plat-trel">
<area shape="rect" id="node2" href="group__platform.html" title="This module includes the platform abstraction used by the OpenThread stack. " alt="" coords="5,5,145,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5305265371676da813125c02aef58188"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#ga5305265371676da813125c02aef58188">otPlatTrelPeerInfo</a></td></tr>
<tr class="separator:ga5305265371676da813125c02aef58188"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga12f77f12e4b7ab9cbd51ef042613bea5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#ga12f77f12e4b7ab9cbd51ef042613bea5">otPlatTrelDisable</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:ga12f77f12e4b7ab9cbd51ef042613bea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c788ba85e3b4346d181807fdcbfd552"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#ga7c788ba85e3b4346d181807fdcbfd552">otPlatTrelEnable</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, uint16_t *aUdpPort)</td></tr>
<tr class="separator:ga7c788ba85e3b4346d181807fdcbfd552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae46274984c7f7ac0fee117eb586ed29f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#gae46274984c7f7ac0fee117eb586ed29f">otPlatTrelHandleDiscoveredPeerInfo</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, const <a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a> *aInfo)</td></tr>
<tr class="separator:gae46274984c7f7ac0fee117eb586ed29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b7a87d7d8f3006053d40e8ff6bccb57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#ga8b7a87d7d8f3006053d40e8ff6bccb57">otPlatTrelHandleReceived</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, uint8_t *aBuffer, uint16_t aLength)</td></tr>
<tr class="separator:ga8b7a87d7d8f3006053d40e8ff6bccb57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84817b0c6238e73f15825356446e2cbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#ga84817b0c6238e73f15825356446e2cbe">otPlatTrelRegisterService</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, uint16_t aPort, const uint8_t *aTxtData, uint8_t aTxtLength)</td></tr>
<tr class="separator:ga84817b0c6238e73f15825356446e2cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd843abe2928ca0b31af054bba86de1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__plat-trel.html#gafd843abe2928ca0b31af054bba86de1c">otPlatTrelSend</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, const uint8_t *aUdpPayload, uint16_t aUdpPayloadLen, const <a class="el" href="structot_sock_addr.html">otSockAddr</a> *aDestSockAddr)</td></tr>
<tr class="separator:gafd843abe2928ca0b31af054bba86de1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module includes the platform abstraction for Thread Radio Encapsulation Link (TREL) using DNS-SD and UDP/IPv6. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga5305265371676da813125c02aef58188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5305265371676da813125c02aef58188">&sect;&nbsp;</a></span>otPlatTrelPeerInfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a>  <a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This structure represents a TREL peer info discovered using DNS-SD browse on the service name "_trel._udp". </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7c788ba85e3b4346d181807fdcbfd552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c788ba85e3b4346d181807fdcbfd552">&sect;&nbsp;</a></span>otPlatTrelEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelEnable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>aUdpPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initializes and enables TREL platform layer.</p>
<p>Upon this call, the platform layer MUST perform the following:</p>
<p>1) TREL platform layer MUST open a UDP socket to listen for and receive TREL messages from peers. The socket is bound to an ephemeral port number chosen by the platform layer. The port number MUST be returned in <code>aUdpPort</code>. The socket is also bound to network interface(s) on which TREL is to be supported. The socket and the chosen port should stay valid while TREL is enabled.</p>
<p>2) Platform layer MUST initiate an ongoing DNS-SD browse on the service name "_trel._udp" within the local browsing domain to discover other devices supporting TREL. The ongoing browse will produce two different types of events: "add" events and "remove" events. When the browse is started, it should produce an "add" event for every TREL peer currently present on the network. Whenever a TREL peer goes offline, a "remove" event should be produced. "remove" events are not guaranteed, however. When a TREL service instance is discovered, a new ongoing DNS-SD query for an AAAA record should be started on the hostname indicated in the SRV record of the discovered instance. If multiple host IPv6 addressees are discovered for a peer, one with highest scope among all addresses MUST be reported (if there are multiple address at same scope, one must be selected randomly).</p>
<p>TREL platform MUST signal back the discovered peer info using <code><a class="el" href="group__plat-trel.html#gae46274984c7f7ac0fee117eb586ed29f">otPlatTrelHandleDiscoveredPeerInfo()</a></code> callback. This callback MUST be invoked when a new peer is discovered, when there is a change in an existing entry (e.g., new TXT record or new port number or new IPv6 address), or when the peer is removed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>The OpenThread instance. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">aUdpPort</td><td>A pointer to return the selected port number by platform layer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga12f77f12e4b7ab9cbd51ef042613bea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12f77f12e4b7ab9cbd51ef042613bea5">&sect;&nbsp;</a></span>otPlatTrelDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelDisable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function disables TREL platform layer.</p>
<p>After this call, the platform layer MUST stop DNS-SD browse on the service name "_trel._udp", stop advertising the TREL DNS-SD service (from <code><a class="el" href="group__plat-trel.html#ga84817b0c6238e73f15825356446e2cbe">otPlatTrelRegisterService()</a></code>) and MUST close the UDP socket used to receive TREL messages.</p>
<p>[in] aInstance The OpenThread instance. </p>

</div>
</div>
<a id="gae46274984c7f7ac0fee117eb586ed29f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae46274984c7f7ac0fee117eb586ed29f">&sect;&nbsp;</a></span>otPlatTrelHandleDiscoveredPeerInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelHandleDiscoveredPeerInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structot_plat_trel_peer_info.html">otPlatTrelPeerInfo</a> *&#160;</td>
          <td class="paramname"><em>aInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a callback function from platform layer to report a discovered TREL peer info.</p>
<dl class="section note"><dt>Note</dt><dd>The <code>aInfo</code> structure and its content (e.g., the <code>mTxtData</code> buffer) does not need to persist after returning from this call. OpenThread code will make a copy of all the info it needs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>The OpenThread instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aInfo</td><td>A pointer to the TREL peer info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga84817b0c6238e73f15825356446e2cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84817b0c6238e73f15825356446e2cbe">&sect;&nbsp;</a></span>otPlatTrelRegisterService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelRegisterService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>aPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>aTxtData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>aTxtLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function registers a new service to be advertised using DNS-SD [RFC6763].</p>
<p>The service name is "_trel._udp". The platform should use its own hostname, which when combined with the service name and the local DNS-SD domain name will produce the full service instance name, for example "example-host._trel._udp.local.".</p>
<p>The domain under which the service instance name appears will be 'local' for mDNS, and will be whatever domain is used for service registration in the case of a non-mDNS local DNS-SD service.</p>
<p>A subsequent call to this function updates the previous service. It is used to update the TXT record data and/or the port number.</p>
<p>The <code>aTxtData</code> buffer is not persisted after the return from this function. The platform layer MUST NOT keep the pointer and instead copy the content if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>The OpenThread instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aPort</td><td>The port number to include in the SRV record of the advertised service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aTxtData</td><td>A pointer to the TXT record data (encoded) to be include in the advertised service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aTxtLength</td><td>The length of <code>aTxtData</code> (number of bytes). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafd843abe2928ca0b31af054bba86de1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd843abe2928ca0b31af054bba86de1c">&sect;&nbsp;</a></span>otPlatTrelSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>aUdpPayload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>aUdpPayloadLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structot_sock_addr.html">otSockAddr</a> *&#160;</td>
          <td class="paramname"><em>aDestSockAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function requests a TREL UDP packet to be sent to a given destination.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>The OpenThread instance structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aUdpPayload</td><td>A pointer to UDP payload. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aUdpPayloadLen</td><td>The payload length (number of bytes). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aDestSockAddr</td><td>The destination socket address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8b7a87d7d8f3006053d40e8ff6bccb57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b7a87d7d8f3006053d40e8ff6bccb57">&sect;&nbsp;</a></span>otPlatTrelHandleReceived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otPlatTrelHandleReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>aBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>aLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is a callback from platform to notify of a received TREL UDP packet.</p>
<dl class="section note"><dt>Note</dt><dd>The buffer content (up to its specified length) may get changed during processing by OpenThread core (e.g., decrypted in place), so the platform implementation should expect that after returning from this function the <code>aBuffer</code> content may have been altered.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>The OpenThread instance structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aBuffer</td><td>A buffer containing the received UDP payload. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aLength</td><td>UDP payload length (number of bytes). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2022</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
