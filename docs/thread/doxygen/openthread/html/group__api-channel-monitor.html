<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>OpenThread: Channel Monitoring</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenThread
   &#160;<span id="projectnumber">1.05.03.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Channel Monitoring<div class="ingroups"><a class="el" href="group__api.html">API</a> &raquo; <a class="el" href="group__api-addons.html">Add-Ons</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This module includes functions for channel monitoring feature.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Channel Monitoring:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__api-channel-monitor.png" border="0" alt="" usemap="#group____api-channel-monitor"/>
<map name="group____api-channel-monitor" id="group____api-channel-monitor">
<area shape="rect" id="node1" href="group__api-addons.html" title="Add&#45;Ons" alt="" coords="5,5,79,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf2540643ecbbad45860a5b2b7a75ea74"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#gaf2540643ecbbad45860a5b2b7a75ea74">otChannelMonitorGetChannelOccupancy</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, uint8_t aChannel)</td></tr>
<tr class="separator:gaf2540643ecbbad45860a5b2b7a75ea74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1583309cc08b1d64ca2a5b9d07dc41ad"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#ga1583309cc08b1d64ca2a5b9d07dc41ad">otChannelMonitorGetRssiThreshold</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:ga1583309cc08b1d64ca2a5b9d07dc41ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f72370bd216c385440355113ef9fc45"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#ga5f72370bd216c385440355113ef9fc45">otChannelMonitorGetSampleCount</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:ga5f72370bd216c385440355113ef9fc45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9077ec1ec0e1e38257db097443dd31d6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#ga9077ec1ec0e1e38257db097443dd31d6">otChannelMonitorGetSampleInterval</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:ga9077ec1ec0e1e38257db097443dd31d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad353165d869ec7d451fdae28ef7caaf9"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#gad353165d869ec7d451fdae28ef7caaf9">otChannelMonitorGetSampleWindow</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:gad353165d869ec7d451fdae28ef7caaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3742f76aee1f9a47efc58c4c92b6bdb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#ga3742f76aee1f9a47efc58c4c92b6bdb8">otChannelMonitorIsEnabled</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance)</td></tr>
<tr class="separator:ga3742f76aee1f9a47efc58c4c92b6bdb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad15af69b1c22e84ad9fbf1fbde931924"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__api-error.html#ga592639bfe12528759d7368a8c9645993">otError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api-channel-monitor.html#gad15af69b1c22e84ad9fbf1fbde931924">otChannelMonitorSetEnabled</a> (<a class="el" href="structot_instance.html">otInstance</a> *aInstance, bool aEnabled)</td></tr>
<tr class="separator:gad15af69b1c22e84ad9fbf1fbde931924"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module includes functions for channel monitoring feature. </p>
<p>The functions in this module are available when channel monitor feature (<code>OPENTHREAD_CONFIG_CHANNEL_MONITOR_ENABLE</code>) is enabled.</p>
<p>Channel monitoring will periodically monitor all channels to help determine the cleaner channels (channels with less interference).</p>
<p>When channel monitoring is active, a zero-duration Energy Scan is performed, collecting a single RSSI sample on every channel per sample interval. The RSSI samples are compared with a pre-specified RSSI threshold. As an indicator of channel quality, the channel monitoring module maintains and provides the average rate/percentage of RSSI samples that are above the threshold within (approximately) a specified sample window (referred to as channel occupancy). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad15af69b1c22e84ad9fbf1fbde931924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad15af69b1c22e84ad9fbf1fbde931924">&sect;&nbsp;</a></span>otChannelMonitorSetEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__api-error.html#ga592639bfe12528759d7368a8c9645993">otError</a> otChannelMonitorSetEnabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>aEnabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables or disables the Channel Monitoring operation.</p>
<p>Once operation starts, any previously collected data is cleared. However, after operation is disabled, the previous collected data is still valid and can be read.</p>
<dl class="section note"><dt>Note</dt><dd>OpenThread core internally enables or disables the Channel Monitoring operation when the IPv6 interface is brought up or down, for example in a call to <code><a class="el" href="group__api-ip6.html#ga5c01df2121fb605fad92bb153302e6e2">otIp6SetEnabled()</a></code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aEnabled</td><td>TRUE to enable/start Channel Monitoring operation, FALSE to disable/stop it.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OT_ERROR_NONE</td><td>Channel Monitoring state changed successfully </td></tr>
    <tr><td class="paramname">OT_ERROR_ALREADY</td><td>Channel Monitoring is already in the same state. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="ga3742f76aee1f9a47efc58c4c92b6bdb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3742f76aee1f9a47efc58c4c92b6bdb8">&sect;&nbsp;</a></span>otChannelMonitorIsEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool otChannelMonitorIsEnabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function indicates whether the Channel Monitoring operation is enabled and running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the Channel Monitoring operation is enabled, FALSE otherwise. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="ga9077ec1ec0e1e38257db097443dd31d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9077ec1ec0e1e38257db097443dd31d6">&sect;&nbsp;</a></span>otChannelMonitorGetSampleInterval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t otChannelMonitorGetSampleInterval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get channel monitoring sample interval in milliseconds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The channel monitor sample interval in milliseconds. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="ga1583309cc08b1d64ca2a5b9d07dc41ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1583309cc08b1d64ca2a5b9d07dc41ad">&sect;&nbsp;</a></span>otChannelMonitorGetRssiThreshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t otChannelMonitorGetRssiThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get channel monitoring RSSI threshold in dBm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The RSSI threshold in dBm. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="gad353165d869ec7d451fdae28ef7caaf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad353165d869ec7d451fdae28ef7caaf9">&sect;&nbsp;</a></span>otChannelMonitorGetSampleWindow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t otChannelMonitorGetSampleWindow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get channel monitoring averaging sample window length (number of samples).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The averaging sample window. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="ga5f72370bd216c385440355113ef9fc45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f72370bd216c385440355113ef9fc45">&sect;&nbsp;</a></span>otChannelMonitorGetSampleCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t otChannelMonitorGetSampleCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get channel monitoring total number of RSSI samples (per channel).</p>
<p>The count indicates total number samples per channel by channel monitoring module since its start (since Thread network interface was enabled).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total number of RSSI samples (per channel) taken so far. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
<a id="gaf2540643ecbbad45860a5b2b7a75ea74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2540643ecbbad45860a5b2b7a75ea74">&sect;&nbsp;</a></span>otChannelMonitorGetChannelOccupancy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t otChannelMonitorGetChannelOccupancy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structot_instance.html">otInstance</a> *&#160;</td>
          <td class="paramname"><em>aInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>aChannel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the current channel occupancy for a given channel.</p>
<p>The channel occupancy value represents the average rate/percentage of RSSI samples that were above RSSI threshold ("bad" RSSI samples).</p>
<p>For the first "sample window" samples, the average is maintained as the actual percentage (i.e., ratio of number of "bad" samples by total number of samples). After "window" samples, the averager uses an exponentially weighted moving average. Practically, this means the average is representative of up to <code>3 * window</code> last samples with highest weight given to the latest <code>kSampleWindow</code> samples.</p>
<p>Max value of <code>0xffff</code> indicates all RSSI samples were above RSSI threshold (i.e. 100% of samples were "bad").</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aInstance</td><td>A pointer to an OpenThread instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aChannel</td><td>The channel for which to get the link occupancy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current channel occupancy for the given channel. </dd></dl>

<p>Referenced by <a class="el" href="classot_1_1_cli_1_1_interpreter.html#af24feb809ecd5c726b2ea0f6090bf832">Interpreter::SetUserCommands()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2022</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
